// https://hydrogenaud.io/themes/default/portal.js elk_jquery_plugins.js script.js script_elk.js theme.js topic.js mentioning.js

/*
 2015-2017 SimplePortal Team
 @license BSD 3-clause
 @version 1.0.0 RC1
*/
function sp_collapseBlock(a){$("#sp_block_"+a).slideToggle(300).promise().done(function(){var b=!1;$("#sp_block_"+a).is(":visible")&&(b=!0);0===elk_member_id?document.cookie="sp_block_"+a+"="+(b?0:1):elk_setThemeOption("sp_block_"+a,b?0:1,null,null);$("#sp_collapse_"+a).attr("class",b?"collapse":"expand")})}
function sp_collapseSide(a){var b=[,"sp_left",,,"sp_right"];mode=""===document.getElementById(b[a]).style.display?0:1;0===elk_member_id?document.cookie=b[a]+"="+(mode?0:1):elk_setThemeOption(b[a],mode?0:1,null,null);document.getElementById("sp_collapse_side"+a).className=mode?"dot collapse":"dot expand";$("#"+b[a]).toggle(400)}
function sp_collapse_object(a,b){var c=""===document.getElementById("sp_object_"+a).style.display?0:1;$("#sp_object_"+a).toggle(300);if("undefined"===typeof b||!0===b)document.getElementById("sp_collapse_"+a).src=elk_images_url+(c?"/collapse.png":"/expand.png")}
function sp_image_resize(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)if("bbc_img sp_article"===a[b].className){var c=new Image;c.src=a[b].src;300<c.width?(a[b].height=300*c.height/c.width,a[b].width=300):(a[b].width=c.width,a[b].height=c.height)}"undefined"!==typeof window_oldSPImageOnload&&window_oldSPImageOnload&&(window_oldSPImageOnload(),window_oldSPImageOnload=null)}
function sp_submit_shout(a,b,c){if(window.XMLHttpRequest){shoutbox_indicator(a,!0);var d=document.getElementById("new_shout_"+a).value.replace(/&#/g,"&#38;#").php_urlencode();sendXMLDocument(elk_prepareScriptUrl(sp_script_url)+"action=shoutbox;xml","shoutbox_id="+a+"&shout="+d+"&"+b+"="+c,onShoutReceived);document.getElementById("new_shout_"+a).value="";return!1}}
function sp_delete_shout(a,b,c,d){if(window.XMLHttpRequest)return shoutbox_indicator(a,!0),sendXMLDocument(elk_prepareScriptUrl(sp_script_url)+"action=shoutbox;xml","shoutbox_id="+a+"&delete="+b+"&"+c+"="+d,onShoutReceived),!1}function sp_refresh_shout(a,b){if(window.XMLHttpRequest)return shoutbox_indicator(a,!0),getXMLDocument(elk_prepareScriptUrl(sp_script_url)+"action=shoutbox;shoutbox_id="+a+";time="+b+";xml",onShoutReceived),!1}
function onShoutReceived(a){var b="";var c=a.getElementsByTagName("elk")[0].getElementsByTagName("shoutbox")[0].childNodes[0].nodeValue;if("1"===a.getElementsByTagName("elk")[0].getElementsByTagName("updated")[0].childNodes[0].nodeValue){shouts=a.getElementsByTagName("elk")[0].getElementsByTagName("shout");var d=a.getElementsByTagName("elk")[0].getElementsByTagName("error")[0].childNodes[0].nodeValue;var e=a.getElementsByTagName("elk")[0].getElementsByTagName("warning")[0].childNodes[0].nodeValue;
var f=a.getElementsByTagName("elk")[0].getElementsByTagName("reverse")[0].childNodes[0].nodeValue;"0"!==e&&(b+='<li class="shoutbox_warning smalltext">'+e+"</li>");if("0"!==d)document.getElementById("shouts_"+c).innerHTML=b+'<li class="smalltext">'+d+"</li>";else{for(var g=0;g<shouts.length;g++){var h=a.getElementsByTagName("elk")[0].getElementsByTagName("shout")[g];h.getElementsByTagName("id");d=h.getElementsByTagName("author")[0].childNodes[0].nodeValue;e=h.getElementsByTagName("time")[0].childNodes[0].nodeValue;
h.getElementsByTagName("timeclean");var k=h.getElementsByTagName("delete")[0].childNodes[0].nodeValue;var l=h.getElementsByTagName("content")[0].childNodes[0].nodeValue;h=h.getElementsByTagName("is_me")[0].childNodes[0].nodeValue;b+="<li>"+("0"===h?"<strong>"+d+":</strong> ":"")+l+"<br />"+(0!==k?'<span class="shoutbox_delete">'+k+"</span>":"")+'<span class="smalltext shoutbox_time">'+e+"</span></li>"}document.getElementById("shouts_"+c).innerHTML=b;"0"!==f?document.getElementById("shouts_"+c).scrollTop=
document.getElementById("shouts_"+c).scrollHeight:document.getElementById("shouts_"+c).scrollTop=0}}shoutbox_indicator(c,!1);return!1}function shoutbox_indicator(a,b){document.getElementById("shoutbox_load_"+a).style.display=b?"":"none"}function sp_catch_enter(a){if(window.event)var b=window.event.keyCode;else a&&(b=a.which);if(13===b)return!0}
function sp_show_ignored_shout(a){document.getElementById("ignored_shout_"+a).style.display="";document.getElementById("ignored_shout_link_"+a).style.display="none"}function sp_show_history_ignored_shout(a){document.getElementById("history_ignored_shout_"+a).style.display="";document.getElementById("history_ignored_shout_link_"+a).style.display="none"}
function sp_showMoreSmileys(a,b,c,d,e,f){if("undefined"!==typeof this.oSmileyPopupWindow&&"closed"in this.oSmileyPopupWindow&&!this.oSmileyPopupWindow.closed)this.oSmileyPopupWindow.focus();else{if("undefined"===typeof g){var g="";for(i=0;i<sp_smileys.length;i++)sp_smileys[i][2]=sp_smileys[i][2].replace(/"/g,"&quot;"),sp_smileys[i][0]=sp_smileys[i][0].replace(/"/g,"&quot;"),g+='<a href="javascript:void(0);" onclick="window.opener.replaceText(\' '+sp_smileys[i][0].php_addslashes()+"', window.opener.document.getElementById('new_shout_"+
a+'\')); window.focus(); return false;"><img src="'+f+"/"+sp_smileys[i][1]+'" id="sml_'+sp_smileys[i][1]+'" alt="'+sp_smileys[i][2]+'" title="'+sp_smileys[i][2]+'" style="padding: 4px;" border="0" /></a> '}this.oSmileyPopupWindow=window.open("","add_smileys","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,width=480,height=220,resizable=yes");this.oSmileyPopupWindow.document.open("text/html","replace");this.oSmileyPopupWindow.document.write(sp_moreSmileysTemplate.easyReplace({smileyRows:g}));
this.oSmileyPopupWindow.document.close()}}
function sp_update_editor(a,b){var c=$("textarea"),d=c.sceditor("instance"),e="";"bbc"===a&&"undefined"===typeof d?(e="html"===b?c.html().php_unhtmlspecialchars():"[code]"+c.val().replace(/\n/g,"<br >")+"[/code]",elk_editor(),d=c.sceditor("instance"),d.sourceMode(!1),d.setWysiwygEditorValue(e),d.sourceMode(!0)):"bbc"!==a&&"undefined"!==typeof d&&""!==b?("html"===a?""!==d.getSourceEditorValue()&&(e=d.getWysiwygEditorValue(!1),e=e.replace(/<span .*>\s?<\/span>/g,"").replace(/<br( \\)?>/g,"\n")):e=d.getSourceEditorValue(!1).replace(/<br( \\)?>/g,
"\n").php_unhtmlspecialchars().replace("[code]","").replace("[/code]",""),d.destroy(),$("textarea").val(e)):"bbc"!==a&&"undefined"!==typeof d&&("html"===a&&d.updateOriginal(),d.destroy())}function sp_editor_change_type(a){var b;$("#"+a).on("focus",function(){b=this.value}).change(function(){sp_update_editor(this.value,b);b=this.value})}function sp_theme_select(a){a=a.options[a.selectedIndex].value;document.getElementById("sp_ts_thumb").src=sp_ts_thumbs[a]}
function sp_collapseCalendar(a){new_day="sp_calendar_"+a;if(new_day===current_day)return!1;document.getElementById(current_day).style.display="none";document.getElementById(new_day).style.display="";current_day=new_day}function sp_collapseObject(a){var b=document.getElementById("sp_object_"+a).style.display;b=""===b|"block"===b?!1:!0;$("#sp_object_"+a).slideToggle(300);document.getElementById("sp_collapse_"+a).src=elk_images_url+(b?"/selected.png":"/selected_open.png")}
function check_style_options(){var a=document.getElementById("no_title").checked,b=document.getElementById("no_body").checked;document.getElementById("title_default_class").disabled=a;document.getElementById("title_custom_class").disabled=a;document.getElementById("title_custom_style").disabled=a;document.getElementById("body_default_class").disabled=b;document.getElementById("body_custom_class").disabled=b;document.getElementById("body_custom_style").disabled=b}
function sp_surroundText(a,b,c){if("caretPos"in c&&"createTextRange"in c){var d=c.caretPos,e=d.text.length;d.text=" "===d.text.charAt(d.text.length-1)?a+d.text+b+" ":a+d.text+b;0===e?(d.moveStart("character",-b.length),d.moveEnd("character",-b.length),d.select()):c.focus(d)}else if("selectionStart"in c){d=c.value.substr(0,c.selectionStart);e=c.value.substr(c.selectionStart,c.selectionEnd-c.selectionStart);var f=c.value.substr(c.selectionEnd),g=c.selectionStart,h=c.scrollTop;c.value=d+a+e+b+f;c.setSelectionRange&&
(0===e.length?c.setSelectionRange(g+a.length,g+a.length):c.setSelectionRange(g,g+a.length+e.length+b.length),c.focus());c.scrollTop=h}else c.value+=a+b,c.focus(c.value.length-1)};/*
 ElkArte Forum contributors
 @license   BSD http://opensource.org/licenses/BSD-3-Clause

 @version 1.1

 This file contains javascript plugins for use with jquery
 hoverIntent v1.9.0 // 2014.08.11 // jQuery v1.9.1+
 http://cherne.net/brian/resources/jquery.hoverIntent.html

 You may use hoverIntent under the terms of the MIT license. Basically that
 means you are free to use hoverIntent as long as this header is left intact.
 Copyright 2007, 2014 Brian Cherne
 Superclick v1.0.0 - jQuery menu widget
 Copyright (c) 2013 Joel Birch

 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html
 @name      ElkArte news fader
 @copyright ElkArte Forum contributors
 @license   MIT http://www.opensource.org/licenses/mit-license.php
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.hoverIntent&&a(jQuery)})(function(a){var b={interval:100,sensitivity:6,timeout:0},c=0,d,e,f=function(a){d=a.pageX;e=a.pageY},g=function(a,b,c,n){if(Math.sqrt((c.pX-d)*(c.pX-d)+(c.pY-e)*(c.pY-e))<n.sensitivity)return b.off("mousemove.hoverIntent"+c.namespace,f),delete c.timeoutId,c.isActive=!0,delete c.pX,delete c.pY,n.over.apply(b[0],[a]);c.pX=d;c.pY=e;c.timeoutId=setTimeout(function(){g(a,b,c,n)},n.interval)};
a.fn.hoverIntent=function(d,e,l){var h=c++,k=a.extend({},b);k=a.isPlainObject(d)?a.extend(k,d):a.isFunction(e)?a.extend(k,{over:d,out:e,selector:l}):a.extend(k,{over:d,out:d,selector:e});d=function(c){var b=a.extend({},c),d=a(this),e=d.data("hoverIntent");e||d.data("hoverIntent",e={});var r=e[h];r||(e[h]=r={id:h});r.timeoutId&&(r.timeoutId=clearTimeout(r.timeoutId));e=r.namespace=".hoverIntent"+h;"mouseenter"===c.type?r.isActive||(r.pX=b.pageX,r.pY=b.pageY,d.on("mousemove.hoverIntent"+e,f),r.timeoutId=
setTimeout(function(){g(b,d,r,k)},k.interval)):r.isActive&&(d.off("mousemove.hoverIntent"+e,f),r.timeoutId=setTimeout(function(){var a=r,c=k.out;delete d.data("hoverIntent")[a.id];c.apply(d[0],[b])},k.timeout))};return this.on({"mouseenter.hoverIntent":d,"mouseleave.hoverIntent":d},k.selector)}});
(function(a,b){var c=function(){(function(){a(window).on("load",function(){a("body").children().on("click.superfish",function(){a(".sf-js-enabled").superfish("hide","true")})})})();var c=function(){var c=/^(?![\w\W]*Windows Phone)[\w\W]*(iPhone|iPad|iPod)/i.test(navigator.userAgent);if(c)a("html").css("cursor","pointer").on("click",a.noop);return c}(),e=function(){var a=document.documentElement.style;return"behavior"in a&&"fill"in a&&/iemobile/i.test(navigator.userAgent)}(),f=!!b.PointerEvent,g=function(a,
c,b){var d="sf-js-enabled";c.cssArrows&&(d+=" sf-arrows");a[b?"addClass":"removeClass"](d)},h=function(c,b){return c.find("li."+b.pathClass).slice(0,b.pathLevels).addClass(b.hoverClass+" sf-breadcrumb").filter(function(){return a(this).children(b.popUpSelector).hide().show().length}).removeClass(b.pathClass)},k=function(a,c){var b=c?"addClass":"removeClass";a.children("a")[b]("sf-with-ul")},l=function(a){var c=a.css("ms-touch-action"),b=a.css("touch-action");b="pan-y"===(b||c)?"auto":"pan-y";a.css({"ms-touch-action":b,
"touch-action":b})},n=function(a){return a.closest(".sf-js-enabled").data("sfOptions")},p=function(){var c=a(this),b=n(c);clearTimeout(b.sfTimer);c.siblings().superfish("hide").end().superfish("show")},m=function(c){c.retainPath=-1<a.inArray(this[0],c.$path);this.superfish("hide");this.parents("."+c.hoverClass).length||(c.onIdle.call(this.closest(".sf-js-enabled")),c.$path.length&&a.proxy(p,c.$path)())},q=function(){var b=a(this),d=n(b);c?a.proxy(m,b,d)():(clearTimeout(d.sfTimer),d.sfTimer=setTimeout(a.proxy(m,
b,d),d.delay))},u=function(c){var b=a(this),d=n(b),e=b.siblings(c.data.popUpSelector);if(!1===d.onHandleTouch.call(e))return this;0<e.length&&e.is(":hidden")&&(b.one("click.superfish",!1),"MSPointerDown"===c.type||"pointerdown"===c.type?b.trigger("focus"):a.proxy(p,b.parent("li"))())};return{hide:function(c){if(this.length){var b=n(this);if(!b)return this;var d=!0===b.retainPath?b.$path:"";d=this.find("li."+b.hoverClass).add(this).not(d).removeClass(b.hoverClass).children(b.popUpSelector);var e=b.speedOut;
c&&(d.show(),e=0);b.retainPath=!1;if(!1===b.onBeforeHide.call(d))return this;d.stop(!0,!0).animate(b.animationOut,e,function(){var c=a(this);b.onHide.call(c)})}return this},show:function(){var a=n(this);if(!a)return this;var b=this.addClass(a.hoverClass).children(a.popUpSelector);if(!1===a.onBeforeShow.call(b))return this;b.stop(!0,!0).animate(a.animation,a.speed,function(){a.onShow.call(b)});return this},destroy:function(){return this.each(function(){var b=a(this),c=b.data("sfOptions");if(!c)return!1;
var d=b.find(c.popUpSelector).parent("li");clearTimeout(c.sfTimer);g(b,c);k(d);l(b);b.off(".superfish").off(".hoverIntent");d.children(c.popUpSelector).attr("style",function(a,b){return b.replace(/display[^;]+;?/g,"")});c.$path.removeClass(c.hoverClass+" sf-breadcrumb").addClass(c.pathClass);b.find("."+c.hoverClass).removeClass(c.hoverClass);c.onDestroy.call(b);b.removeData("sfOptions")})},init:function(b){return this.each(function(){var d=a(this);if(d.data("sfOptions"))return!1;var m=a.extend({},
a.fn.superfish.defaults,b),n=d.find(m.popUpSelector).parent("li");m.$path=h(d,m);d.data("sfOptions",m);g(d,m,!0);k(n,!0);l(d);var t="li:has("+m.popUpSelector+")";if(a.fn.hoverIntent&&!m.disableHI)d.hoverIntent(p,q,t);else d.on("mouseenter.superfish",t,p).on("mouseleave.superfish",t,q);t="MSPointerDown.superfish";f&&(t="pointerdown.superfish");c||(t+=" touchend.superfish");e&&(t+=" mousedown.superfish");d.on("focusin.superfish","li",p).on("focusout.superfish","li",q).on(t,"a",m,u);n.not(".sf-breadcrumb").superfish("hide",
!0);m.onInit.call(this)})}}}();a.fn.superfish=function(b,e){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof b&&b?a.error("Method "+b+" does not exist on jQuery.fn.superfish"):c.init.apply(this,arguments)};a.fn.superfish.defaults={popUpSelector:"ul,.sf-mega",hoverClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,disableHI:!1,onInit:a.noop,onBeforeShow:a.noop,
onShow:a.noop,onBeforeHide:a.noop,onHide:a.noop,onIdle:a.noop,onDestroy:a.noop,onHandleTouch:a.noop}})(jQuery,window);
(function(a,b){var c=function(){(function(){a(b).on("load",function(){a("body").children().on("click.superclick",function(){a(".sf-js-enabled").superclick("reset")})})})();var c=function(a,b){var c="sf-js-enabled";b.cssArrows&&(c+=" sf-arrows");a.toggleClass(c)},e=function(b,c){return b.find("li."+c.pathClass).slice(0,c.pathLevels).addClass(c.activeClass+" sf-breadcrumb").filter(function(){return a(this).children(c.popUpSelector).hide().show().length}).removeClass(c.pathClass)},f=function(a){var b=
a.css("ms-touch-action"),c=a.css("touch-action");c="pan-y"===(c||b)?"auto":"pan-y";a.css({"ms-touch-action":c,"touch-action":c})},g=function(b){var c=a(this),d=c.siblings(b.data.popUpSelector);if(d.length)return b=!d.is(":hidden"),d=d.is(":hidden")?k:l,a.proxy(d,c.parent("li"))(),!!b},h=function(b){var c=a(this),d=c.siblings(b.data.popUpSelector);b=b.currentTarget.href;if(1===d.length&&b)return d.not(":hidden")&&a.proxy(l,c.parent("li"))(),window.location=b,!1},k=function(){var b=a(this);p(b);b.siblings().superclick("hide").end().superclick("show")},
l=function(){var b=a(this),c=p(b);a.proxy(n,b,c)()},n=function(b){b.retainPath=-1<a.inArray(this[0],b.$path);this.superclick("hide");this.parents("."+b.activeClass).length||(b.onIdle.call(this.closest(".sf-js-enabled")),b.$path.length&&a.proxy(k,b.$path)())},p=function(a){return a.closest(".sf-js-enabled").data("sf-options")};return{hide:function(b){if(this.length){var c=p(this);if(!c)return this;var d=!0===c.retainPath?c.$path:"";d=this.find("li."+c.activeClass).add(this).not(d).removeClass(c.activeClass).children(c.popUpSelector);
var e=c.speedOut;b&&(d.show(),e=0);c.retainPath=!1;c.onBeforeHide.call(d);d.stop(!0,!0).animate(c.animationOut,e,function(){var b=a(this);c.onHide.call(b)})}return this},show:function(){var a=p(this);if(!a)return this;var b=this.addClass(a.activeClass).children(a.popUpSelector);a.onBeforeShow.call(b);b.stop(!0,!0).animate(a.animation,a.speed,function(){a.onShow.call(b)});return this},destroy:function(){return this.each(function(){var b=a(this),d=b.data("sf-options");if(!d)return!1;var e=b.find(d.popUpSelector).parent("li");
c(b,d);e.children("a").toggleClass("sf-with-ul");f(b);b.off(".superclick");e.children(d.popUpSelector).attr("style",function(a,b){return b.replace(/display[^;]+;?/g,"")});d.$path.removeClass(d.activeClass+" sf-breadcrumb").addClass(d.pathClass);b.find("."+d.activeClass).removeClass(d.activeClass);d.onDestroy.call(b);b.removeData("sf-options")})},reset:function(){return this.each(function(){var b=a(this),c=p(b);a(b.find("."+c.activeClass).toArray().reverse()).children("a").trigger("click")})},init:function(b){return this.each(function(){var d=
a(this);if(d.data("sf-options"))return!1;var k=a.extend({},a.fn.superclick.defaults,b),l=d.find(k.popUpSelector).parent("li");k.$path=e(d,k);d.data("sf-options",k);c(d,k);l.children("a").toggleClass("sf-with-ul");f(d);d.on("click.superclick","a",k,g);l.on("dblclick.superclick","a",k,h);l.not(".sf-breadcrumb").superclick("hide",!0);k.onInit.call(this)})}}}();a.fn.superclick=function(b,e){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof b&&b?a.error("Method "+b+
" does not exist on jQuery.fn.superclick"):c.init.apply(this,arguments)};a.fn.superclick.defaults={popUpSelector:"ul,.sf-mega",activeClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,onInit:a.noop,onBeforeShow:a.noop,onShow:a.noop,onBeforeHide:a.noop,onHide:a.noop,onIdle:a.noop,onDestroy:a.noop}})(jQuery,window);
(function(a){a.fn.Elk_NewsFader=function(b){var c={iFadeDelay:5E3,iFadeSpeed:1E3},d=0,e=a(this).find("li");1<e.length&&(a.extend(c,b),e.hide(),e.eq(0).fadeIn(c.iFadeSpeed),setInterval(function(){a(e[d]).fadeOut(c.iFadeSpeed,function(){d++;d==e.length&&(d=0);a(e[d]).fadeIn(c.iFadeSpeed)})},c.iFadeSpeed+c.iFadeDelay));return this}})(jQuery);/*
 @name      ElkArte Forum
 @copyright ElkArte Forum contributors
 @license   BSD http://opensource.org/licenses/BSD-3-Clause

 This file contains code covered by:
 copyright:	2011 Simple Machines (http://www.simplemachines.org)
 license:		BSD, See included LICENSE.TXT for terms and conditions.

 @version 1.1
*/
var elk_formSubmitted=!1,lastKeepAliveCheck=(new Date).getTime(),ajax_indicator_ele=null,ua=navigator.userAgent.toLowerCase(),is_opera=!!window.opera,is_ff="undefined"!==typeof InstallTrigger||(-1!==ua.indexOf("iceweasel")||-1!==ua.indexOf("icecat")||-1!==ua.indexOf("shiretoko")||-1!==ua.indexOf("minefield"))&&!is_opera,is_safari=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),is_chrome=!!window.chrome,is_ie=!!document.documentMode,is_webkit=-1!==ua.indexOf("applewebkit");
is_osx=0<=navigator.platform.toUpperCase().indexOf("MAC");is_mobile=-1!==navigator.userAgent.indexOf("Mobi");is_touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;"getElementsByClassName"in document||(document.getElementsByClassName=function(a){return $("."+a)});
function getXMLDocument(a,b){var c=new XMLHttpRequest,d="undefined"!==typeof b,e=this;d&&(c.onreadystatechange=function(){4===c.readyState&&(null!==c.responseXML&&200===c.status?b.call(e,c.responseXML):b.call(e,!1))});c.open("GET",a,d);c.send(null);return c}
function sendXMLDocument(a,b,c){var d=new window.XMLHttpRequest,e=this;"undefined"!==typeof c&&(d.onreadystatechange=function(){4===d.readyState&&(null!==d.responseXML&&200===d.status?c.call(e,d.responseXML):c.call(e,!1))});d.open("POST",a,!0);"setRequestHeader"in d&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(b);return!0}String.prototype.php_strtr=function(a,b){return this.replace(new RegExp("["+a+"]","g"),function(c){return b.charAt(a.indexOf(c))})};
String.prototype.php_strtolower=function(){return"boolean"===typeof elk_iso_case_folding&&!0===elk_iso_case_folding?this.php_strtr("ABCDEFGHIJKLMNOPQRSTUVWXYZ\u008a\u008c\u008e\u009f\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d7\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de","abcdefghijklmnopqrstuvwxyz\u009a\u009c\u009e\u00ff\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f7\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe"):
this.php_strtr("ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")};String.prototype.php_urlencode=function(){return encodeURIComponent(this).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")};String.prototype.php_htmlspecialchars=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};
String.prototype.php_unhtmlspecialchars=function(){return this.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};String.prototype.php_addslashes=function(){return this.replace(/\\/g,"\\\\").replace(/'/g,"\\'")};String.prototype._replaceEntities=function(a,b,c){return String.fromCharCode(parseInt(c))};String.prototype.removeEntities=function(){return this.replace(/&(amp;)?#(\d+);/g,this._replaceEntities)};
String.prototype.easyReplace=function(a){var b=this;for(c in a){var c=c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");b=b.replace(new RegExp("%"+c+"%","g"),a[c])}return b};function php_str_repeat(a,b){return 1>b?"":a+php_str_repeat(a,b-1)}
function reqWin(a,b,c,d){b&&.8*self.screen.availWidth<b||c&&.8*self.screen.availHeight<c?(d=!1,b=Math.min(b,.8*self.screen.availWidth),c=Math.min(c,.8*self.screen.availHeight)):d="boolean"===typeof d&&!0===d;window.open(a,"requested_popup","toolbar=no,location=no,status=no,menubar=no,scrollbars="+(d?"no":"yes")+",width="+(b?b:480)+",height="+(c?c:220)+",resizable=no");return!1}
function reqOverlayDiv(a,b,c){b="string"===typeof b?b:help_popup_heading_text;b=new smc_Popup({heading:b,content:'<div class="centertext"><i class="icon icon-spin icon-big i-spinner"></i></div>',icon:"string"===typeof c?c:"i-help"});var d=$("#"+b.popup_id).find(".popup_content");$.ajax({url:a,type:"GET",dataType:"html"}).done(function(a,b,c){a=$('<div id="temp_help">').html(a).find('a[href$="self.close();"]').hide().prev("br").hide().parent().html();d.html(a)}).fail(function(a,b,c){d.html(b)});return!1}
function smc_Popup(a){this.opt=a;this.popup_id=this.opt.custom_id?this.opt.custom_id:"elk_popup";this.show()}
smc_Popup.prototype.show=function(){var a="popup_window "+(this.opt.custom_class?this.opt.custom_class:"content"),b=this.opt.icon?'<i class="icon '+this.opt.icon+' icon-top"></i> ':"";$("body").append('<div id="'+this.popup_id+'" class="popup_container"><div class="'+a+'" style="max-height: none;"><h3 class="popup_heading"><a href="javascript:void(0);" class="hide_popup icon i-close" title="Close"></a>'+b+this.opt.heading+'</h3><div class="popup_content">'+this.opt.content+"</div></div></div>");this.popup_body=
$("#"+this.popup_id).children(".popup_window");this.popup_body.parent().fadeIn(300);this.popup_body.addClass("in");var c=this;$(document).mouseup(function(a){0===$("#"+c.popup_id).has(a.target).length&&c.hide()}).keyup(function(a){27===a.keyCode&&c.hide()});$("#"+this.popup_id).find(".hide_popup").on("click",function(){return c.hide()});return!1};smc_Popup.prototype.hide=function(){$("#"+this.popup_id).fadeOut(300,function(){$(this).remove()});return!1};
function replaceText(a,b){if("selectionStart"in b){var c=b.value.substr(0,b.selectionStart),d=b.value.substr(b.selectionEnd),e=b.scrollTop,f=0;b.value=c+a+d;b.setSelectionRange&&(b.focus(),is_opera&&null!==a.match(/\n/g)&&(f=a.match(/\n/g).length),b.setSelectionRange(c.length+a.length+f,c.length+a.length+f));b.scrollTop=e}else b.value+=a,b.focus(b.value.length-1)}
function isEmptyText(a){for(a="string"===typeof a?a:a.value;0<a.length&&(" "===a.charAt(0)||"\t"===a.charAt(0));)a=a.substring(1,a.length);for(;0<a.length&&(" "===a.charAt(a.length-1)||"\t"===a.charAt(a.length-1));)a=a.substring(0,a.length-1);return""===a}function submitonce(a){elk_formSubmitted=!0}
function submitThisOnce(a,b){var c=("form"in a?a.form:a).getElementsByTagName("textarea");b="undefined"==typeof b?!0:b;for(var d=0,e=c.length;d<e;d++)c[d].readOnly=b;window.setTimeout(function(){submitThisOnce(a,!1)},1E3);return!elk_formSubmitted}function setInnerHTML(a,b){a&&(a.innerHTML=b)}function getInnerHTML(a){if(a)return a.innerHTML}
function setOuterHTML(a,b){if("outerHTML"in a)a.outerHTML=b;else{var c=document.createRange();c.setStartBefore(a);a.parentNode.replaceChild(c.createContextualFragment(b),a)}}function in_array(a,b){for(var c in b)if(b[c]==a)return!0;return!1}function array_search(a,b){for(var c in b)if(b[c]==a)return c;return null}function selectRadioByName(a,b){if(!("length"in a))return a.checked=!0;for(var c=0,d=a.length;c<d;c++)if(a[c].value===b)return a[c].checked=!0;return!1}
function selectAllRadio(a,b,c,d){for(a=0;a<b.length;a++)void 0!==b[a].name&&b[a].name.substr(0,c.length)==c&&b[a].value==d&&(b[a].checked=!0)}function invertAll(a,b,c,d){for(var e=0;e<b.length;e++)"name"in b[e]&&("string"!==typeof c||b[e].name.substr(0,c.length)===c||b[e].id.substr(0,c.length)===c)&&(!b[e].disabled||"boolean"===typeof d&&d)&&(b[e].checked=a.checked)}
function elk_sessionKeepAlive(){var a=(new Date).getTime();elk_scripturl&&9E5<a-lastKeepAliveCheck&&((new Image).src=elk_prepareScriptUrl(elk_scripturl)+"action=keepalive;time="+a,lastKeepAliveCheck=a);window.setTimeout(function(){elk_sessionKeepAlive()},12E5)}window.setTimeout(function(){elk_sessionKeepAlive()},12E5);
function elk_setThemeOption(a,b,c,d){if(null===d||"undefined"===typeof d)d="";(new Image).src=elk_prepareScriptUrl(elk_scripturl)+"action=jsoption;var="+a+";val="+b+";"+elk_session_var+"="+elk_session_id+d+(null===c?"":"&th="+c)+";time="+(new Date).getTime()}
function hashLoginPassword(a,b,c){"undefined"!==typeof hex_sha256&&-1===a.user.value.indexOf("@")&&(a.passwrd.autocomplete="off",a.hash_passwrd.value=hex_sha256(a.user.value.php_strtolower()+a.passwrd.value),"old_hash_passwrd"in a&&"undefined"!==typeof hex_sha1&&(a.old_hash_passwrd.value=hex_sha1(hex_sha1(a.user.value.php_strtolower()+a.passwrd.value)+b+("undefined"===typeof c?"":c))),a.passwrd.value=a.passwrd.value.replace(/./g,"*"))}
function hashAdminPassword(a,b,c,d){"undefined"!==typeof hex_sha256&&(a.admin_hash_pass.value=hex_sha256(b.php_strtolower()+a.admin_pass.value),a.admin_pass.value=a.admin_pass.value.replace(/./g,"*"))}function hashModeratePassword(a,b,c,d){"undefined"!==typeof hex_sha256&&(a.moderate_hash_pass.value=hex_sha256(b.php_strtolower()+a.moderate_pass.value),a.moderate_pass.value=a.moderate_pass.value.replace(/./g,"*"))}
function expandPages(a,b,c,d,e){var f="",g=0;50<(d-c)/e&&(g=d,d=c+50*e);for(;c<d;c+=e)f+='<a class="navPages" href="'+b.replace(/%1\$d/,c).replace(/%%/g,"%")+'">'+(1+c/e)+"</a> ";0<g&&(f+='<span class="expand_pages" role="menuitem" onclick="expandPages(this, \''+b+"', "+d+", "+g+", "+e+');"> ... </span> ');setOuterHTML(a,f)}function smc_preCacheImage(a){"smc_aCachedImages"in window||(window.smc_aCachedImages=[]);in_array(a,window.smc_aCachedImages)||((new Image).src=a)}
function smc_Cookie(a){this.opt=a;this.oCookies={};this.init()}smc_Cookie.prototype.init=function(){if("cookie"in document&&""!==document.cookie)for(var a=document.cookie.split(";"),b=0,c=a.length;b<c;b++){var d=a[b].split("=");this.oCookies[d[0].replace(/^\s+|\s+$/g,"")]=decodeURIComponent(d[1])}};smc_Cookie.prototype.get=function(a){return a in this.oCookies?this.oCookies[a]:null};smc_Cookie.prototype.set=function(a,b){document.cookie=a+"="+encodeURIComponent(b)};
function elk_Toggle(a){this.opt=a;this.bCollapsed=!1;this.oCookie=null;this.init()}
elk_Toggle.prototype.init=function(){var a=0,b=0;if(!("bToggleEnabled"in this.opt)||this.opt.bToggleEnabled){"oCookieOptions"in this.opt&&this.opt.oCookieOptions.bUseCookie&&(this.oCookie=new smc_Cookie({}),a=this.oCookie.get(this.opt.oCookieOptions.sCookieName),null!==a&&(this.opt.bCurrentlyCollapsed="1"===a));this.opt.bCurrentlyCollapsed&&this.changeState(!0,!0);if("aSwapImages"in this.opt)for(a=0,b=this.opt.aSwapImages.length;a<b;a++){var c=document.getElementById(this.opt.aSwapImages[a].sId);
"object"===typeof c&&null!==c&&("none"===getComputedStyle(c).getPropertyValue("display")&&(c.style.display="inline"),c.instanceRef=this,c.onclick=function(){this.instanceRef.toggle();this.blur()},c.style.cursor="pointer",smc_preCacheImage(this.opt.aSwapImages[a].srcCollapsed))}else if("aSwapClasses"in this.opt)for(a=0,b=this.opt.aSwapClasses.length;a<b;a++)c=document.getElementById(this.opt.aSwapClasses[a].sId),"object"===typeof c&&null!==c&&("none"===getComputedStyle(c).getPropertyValue("display")&&
(c.style.display="block"),c.instanceRef=this,c.onclick=function(){this.instanceRef.toggle();this.blur()},c.style.cursor="pointer");if("aSwapLinks"in this.opt)for(a=0,b=this.opt.aSwapLinks.length;a<b;a++)c=document.getElementById(this.opt.aSwapLinks[a].sId),"object"===typeof c&&null!==c&&("none"===getComputedStyle(c).getPropertyValue("display")&&(c.style.display="inline-block"),c.instanceRef=this,c.onclick=function(){this.instanceRef.toggle();this.blur();return!1})}};
elk_Toggle.prototype.changeState=function(a,b){var c;b="undefined"!==typeof b;!b&&a&&"funcOnBeforeCollapse"in this.opt?(this.tmpMethod=this.opt.funcOnBeforeCollapse,this.tmpMethod(),delete this.tmpMethod):!b&&!a&&"funcOnBeforeExpand"in this.opt&&(this.tmpMethod=this.opt.funcOnBeforeExpand,this.tmpMethod(),delete this.tmpMethod);if("aSwapImages"in this.opt){var d=0;for(c=this.opt.aSwapImages.length;d<c;d++){var e=document.getElementById(this.opt.aSwapImages[d].sId);if("object"===typeof e&&null!==e){var f=
a?this.opt.aSwapImages[d].srcCollapsed:this.opt.aSwapImages[d].srcExpanded;e.src!=f&&(e.src=f);e.alt=e.title=a?this.opt.aSwapImages[d].altCollapsed:this.opt.aSwapImages[d].altExpanded}}}else if("aSwapClasses"in this.opt)for(d=0,c=this.opt.aSwapClasses.length;d<c;d++)e=document.getElementById(this.opt.aSwapClasses[d].sId),"object"===typeof e&&null!==e&&(f=a?this.opt.aSwapClasses[d].classCollapsed:this.opt.aSwapClasses[d].classExpanded,e.className!==f&&(e.className=f),e.title=e.title=a?this.opt.aSwapClasses[d].titleCollapsed:
this.opt.aSwapClasses[d].titleExpanded);if("aSwapLinks"in this.opt)for(d=0,c=this.opt.aSwapLinks.length;d<c;d++)e=document.getElementById(this.opt.aSwapLinks[d].sId),"object"===typeof e&&null!==e&&(e.innerHTML=a?this.opt.aSwapLinks[d].msgCollapsed:this.opt.aSwapLinks[d].msgExpanded);d=0;for(c=this.opt.aSwappableContainers.length;d<c;d++)null!==this.opt.aSwappableContainers[d]&&(e=document.getElementById(this.opt.aSwappableContainers[d]),"object"===typeof e&&null!==e&&(a?$(e).slideUp():$(e).slideDown()));
this.bCollapsed=a;"oCookieOptions"in this.opt&&this.opt.oCookieOptions.bUseCookie&&this.oCookie.set(this.opt.oCookieOptions.sCookieName,this.bCollapsed?"1":"0");!b&&"oThemeOptions"in this.opt&&this.opt.oThemeOptions.bUseThemeSettings&&elk_setThemeOption(this.opt.oThemeOptions.sOptionName,this.bCollapsed?"1":"0","sThemeId"in this.opt.oThemeOptions?this.opt.oThemeOptions.sThemeId:null,"sAdditionalVars"in this.opt.oThemeOptions?this.opt.oThemeOptions.sAdditionalVars:null)};
elk_Toggle.prototype.toggle=function(){this.changeState(!this.bCollapsed)};function ajax_indicator(a){null===ajax_indicator_ele&&(ajax_indicator_ele=document.getElementById("ajax_in_progress"),null===ajax_indicator_ele&&create_ajax_indicator_ele());null!==ajax_indicator_ele&&(ajax_indicator_ele.style.display=a?"block":"none")}
function create_ajax_indicator_ele(){ajax_indicator_ele=document.createElement("div");ajax_indicator_ele.id="ajax_in_progress";var a=document.createElement("a");a.href="javascript:ajax_indicator(false)";var b=document.createElement("img");b.src=elk_images_url+"/icons/quick_remove.png";"undefined"!==typeof ajax_notification_cancel_text&&(b.alt=ajax_notification_cancel_text,b.title=ajax_notification_cancel_text);a.appendChild(b);ajax_indicator_ele.appendChild(a);ajax_indicator_ele.innerHTML+=ajax_notification_text;
document.body.appendChild(ajax_indicator_ele)}function createEventListener(a){"addEventListener"in a||(a.attachEvent?(a.addEventListener=function(b,c,d){a.attachEvent("on"+b,c)},a.removeEventListener=function(b,c,d){a.detachEvent("on"+b,c)}):(a.addEventListener=function(b,c,d){a["on"+b]=c},a.removeEventListener=function(b,c,d){a["on"+b]=null}))}function grabJumpToContent(){getXMLDocument(elk_prepareScriptUrl(elk_scripturl)+"action=xmlhttp;sa=jumpto;xml",onJumpReceived);return!1}
function onJumpReceived(a){var b=[],c,d=a.getElementsByTagName("elk")[0].getElementsByTagName("item");a=0;for(c=d.length;a<c;a++)b[b.length]={id:parseInt(d[a].getAttribute("id")),isCategory:"category"===d[a].getAttribute("type"),name:d[a].firstChild.nodeValue.removeEntities(),is_current:!1,childLevel:parseInt(d[a].getAttribute("childlevel"))};a=0;for(c=aJumpTo.length;a<c;a++)aJumpTo[a].fillSelect(b)}var aJumpTo=[];
function JumpTo(a){this.opt=a;this.dropdownList=null;this.showSelect();createEventListener(this.dropdownList);is_mobile&&is_touch?this.dropdownList.addEventListener("touchstart",grabJumpToContent):this.dropdownList.addEventListener("mouseenter",grabJumpToContent)}JumpTo.prototype.removeAll=function(){for(var a=this.dropdownList.options.length;0<a;a--)this.dropdownList.remove(a-1)};
JumpTo.prototype.showSelect=function(){for(var a="",b=this.opt.iCurBoardChildLevel;0<b;b--)a+=this.opt.sBoardChildLevelIndicator;""!==a&&(a+=this.opt.sBoardPrefix);document.getElementById(this.opt.sContainerId).innerHTML=this.opt.sJumpToTemplate.replace(/%select_id%/,this.opt.sContainerId+"_select").replace(/%dropdown_list%/,"<select "+(!0===this.opt.bDisabled?'disabled="disabled" ':"")+(void 0!==this.opt.sClassName?'class="'+this.opt.sClassName+'" ':"")+'name="'+(void 0!==this.opt.sCustomName?this.opt.sCustomName:
this.opt.sContainerId+"_select")+'" id="'+this.opt.sContainerId+'_select"><option value="'+(void 0!==this.opt.bNoRedirect&&!0===this.opt.bNoRedirect?this.opt.iCurBoardId:"?board="+this.opt.iCurBoardId+".0")+'">'+a+this.opt.sCurBoardName.removeEntities()+"</option></select>&nbsp;"+(void 0!==this.opt.sGoButtonLabel?'<input type="button" class="button_submit" value="'+this.opt.sGoButtonLabel+'" onclick="window.location.href = \''+elk_prepareScriptUrl(elk_scripturl)+"board="+this.opt.iCurBoardId+".0';\" />":
""));this.dropdownList=document.getElementById(this.opt.sContainerId+"_select")};
JumpTo.prototype.fillSelect=function(a){this.removeAll();is_mobile&&is_touch?this.dropdownList.removeEventListener("touchstart",grabJumpToContent):this.dropdownList.removeEventListener("mouseenter",grabJumpToContent);for(var b=document.createDocumentFragment(),c=document.createElement("optgroup"),d=0,e=a.length;d<e;d++){var f="";if(a[d].isCategory)c=document.createElement("optgroup"),c.label=a[d].name,b.appendChild(c);else{var g=a[d].childLevel;for(f="";0<g;g--)f+=this.opt.sBoardChildLevelIndicator;
""!==f&&(f+=this.opt.sBoardPrefix);g=document.createElement("option");var h=document.createElement("span");h.innerHTML=f+a[d].name;a[d].id===this.opt.iCurBoardId&&(g.selected="selected");g.appendChild(h);g.value=this.opt.bNoRedirect?a[d].id:"?board="+a[d].id+".0";c.appendChild(g)}}this.dropdownList.appendChild(b);this.opt.bNoRedirect||(this.dropdownList.onchange=function(){0<this.selectedIndex&&this.options[this.selectedIndex].value&&(window.location.href=elk_scripturl+this.options[this.selectedIndex].value.substr(-1===
elk_scripturl.indexOf("?")||"?"!==this.options[this.selectedIndex].value.substr(0,1)?0:1))});"funcOnBeforeCollapse"in this.opt&&(this.tmpMethod=this.opt.funcOnBeforeCollapse,this.tmpMethod(this),delete this.tmpMethod)};var aIconLists=[];
function IconList(a){this.opt=a;this.bListLoaded=!1;this.funcMousedownHandler=this.oContainerDiv=null;this.funcParent=this;this.iCurTimeout=this.iCurMessageId=0;"sAction"in this.opt&&null!==this.opt.sAction||(this.opt.sAction="messageicons;board="+this.opt.iBoardId);this.initIcons()}
IconList.prototype.initIcons=function(){for(var a=document.images.length-1,b=this.opt.sIconIdPrefix.length;0<=a;a--)document.images[a].id.substr(0,b)===this.opt.sIconIdPrefix&&setOuterHTML(document.images[a],'<div title="'+this.opt.sLabelIconList+'" onclick="'+this.opt.sBackReference+".openPopup(this, "+document.images[a].id.substr(b)+')" onmouseover="'+this.opt.sBackReference+'.onBoxHover(this, true)" onmouseout="'+this.opt.sBackReference+'.onBoxHover(this, false)" style="background: '+this.opt.sBoxBackground+
'; cursor: pointer; padding: 2px; margin: 0 auto; vertical-align: top"><img src="'+document.images[a].src+'" alt="'+document.images[a].alt+'" id="'+document.images[a].id+'" style="vertical-align: top; margin: 0 auto; padding: 0 2px;" /></div>')};
IconList.prototype.onBoxHover=function(a,b){a.style.border=b?this.opt.iBoxBorderWidthHover+"px solid "+this.opt.sBoxBorderColorHover:"";a.style.background=b?this.opt.sBoxBackgroundHover:this.opt.sBoxBackground;a.style.padding=b?2-this.opt.iBoxBorderWidthHover+"px":"2px"};
IconList.prototype.openPopup=function(a,b){this.iCurMessageId=b;this.bListLoaded||null!==this.oContainerDiv||(this.oContainerDiv=document.createElement("div"),this.oContainerDiv.id="iconList",this.oContainerDiv.style.display="none",this.oContainerDiv.style.cursor="pointer",this.oContainerDiv.style.position="absolute",this.oContainerDiv.style.background=this.opt.sContainerBackground,this.oContainerDiv.style.border=this.opt.sContainerBorder,this.oContainerDiv.style.padding="6px 0px",document.body.appendChild(this.oContainerDiv),
ajax_indicator(!0),sendXMLDocument.call(this,elk_prepareScriptUrl(elk_scripturl)+"action=xmlhttp;sa="+this.opt.sAction+";xml","",this.onIconsReceived),createEventListener(document.body));var c=elk_itemPos(a);this.oContainerDiv.style.top=c[1]+a.offsetHeight+"px";this.oContainerDiv.style.left=c[0]-1+"px";this.oClickedIcon=a;this.bListLoaded&&(this.oContainerDiv.style.display="block");document.body.addEventListener("mousedown",this.onWindowMouseDown,!1)};
IconList.prototype.onIconsReceived=function(a){a=a.getElementsByTagName("elk")[0].getElementsByTagName("icon");for(var b="",c=0,d=a.length;c<d;c++)b+='<span onmouseover="'+this.opt.sBackReference+'.onItemHover(this, true)" onmouseout="'+this.opt.sBackReference+'.onItemHover(this, false);" onmousedown="'+this.opt.sBackReference+".onItemMouseDown(this, '"+a[c].getAttribute("value")+'\');" style="padding: 2px 3px; line-height: 20px; border: '+this.opt.sItemBorder+"; background: "+this.opt.sItemBackground+
'"><img src="'+a[c].getAttribute("url")+'" alt="'+a[c].getAttribute("name")+'" title="'+a[c].firstChild.nodeValue+'" style="vertical-align: middle" /></span>';this.oContainerDiv.innerHTML=b;this.oContainerDiv.style.display="block";this.bListLoaded=!0;is_ie&&(this.oContainerDiv.style.width=this.oContainerDiv.clientWidth+"px");ajax_indicator(!1)};
IconList.prototype.onItemHover=function(a,b){a.style.background=b?this.opt.sItemBackgroundHover:this.opt.sItemBackground;a.style.border=b?this.opt.sItemBorderHover:this.opt.sItemBorder;0!==this.iCurTimeout&&window.clearTimeout(this.iCurTimeout);if(b)this.onBoxHover(this.oClickedIcon,!0);else this.iCurTimeout=window.setTimeout(this.opt.sBackReference+".collapseList();",500)};
IconList.prototype.onItemMouseDown=function(a,b){if(0!==this.iCurMessageId){ajax_indicator(!0);this.tmpMethod=getXMLDocument;var c=this.tmpMethod(elk_prepareScriptUrl(elk_scripturl)+"action=jsmodify;topic="+this.opt.iTopicId+";msg="+this.iCurMessageId+";"+elk_session_var+"="+elk_session_id+";icon="+b+";xml");delete this.tmpMethod;ajax_indicator(!1);c=c.responseXML.getElementsByTagName("elk")[0].getElementsByTagName("message")[0];0===c.getElementsByTagName("error").length&&(this.opt.bShowModify&&0!==
c.getElementsByTagName("modified").length&&null!==document.getElementById("modified_"+this.iCurMessageId)&&(document.getElementById("modified_"+this.iCurMessageId).innerHTML=c.getElementsByTagName("modified")[0].childNodes[0].nodeValue),this.oClickedIcon.getElementsByTagName("img")[0].src=a.getElementsByTagName("img")[0].src)}else this.oClickedIcon.getElementsByTagName("img")[0].src=a.getElementsByTagName("img")[0].src,"sLabelIconBox"in this.opt&&(document.getElementById(this.opt.sLabelIconBox).value=
b)};IconList.prototype.onWindowMouseDown=function(){for(var a=aIconLists.length-1;0<=a;a--)aIconLists[a].funcParent.tmpMethod=aIconLists[a].collapseList,aIconLists[a].funcParent.tmpMethod(),delete aIconLists[a].funcParent.tmpMethod};IconList.prototype.collapseList=function(){this.onBoxHover(this.oClickedIcon,!1);this.oContainerDiv.style.display="none";this.iCurMessageId=0;document.body.removeEventListener("mousedown",this.onWindowMouseDown,!1)};
function elk_itemPos(a){var b=0,c=0;if("offsetParent"in a)for(b=a.offsetLeft,c=a.offsetTop;a.offsetParent&&"object"===typeof a.offsetParent;)a=a.offsetParent,b+=a.offsetLeft,c+=a.offsetTop;else"x"in a&&(b=a.x,c=a.y);return[b,c]}function elk_prepareScriptUrl(a){return-1===a.indexOf("?")?a+"?":a+("?"===a.charAt(a.length-1)||"&"===a.charAt(a.length-1)||";"===a.charAt(a.length-1)?"":";")}var aOnloadEvents=[];
function addLoadEvent(a){"function"!==typeof a||"onload"in window&&"function"===typeof window.onload?0===aOnloadEvents.length?(aOnloadEvents[0]=window.onload,aOnloadEvents[1]=a,window.onload=function(){for(var a=0,c=aOnloadEvents.length;a<c;a++)if("function"===typeof aOnloadEvents[a])aOnloadEvents[a]();else"string"===typeof aOnloadEvents[a]&&eval(aOnloadEvents[a])}):aOnloadEvents[aOnloadEvents.length]=a:window.onload=a}
function elkSelectText(a,b){var c="boolean"===typeof b&&b?document.getElementById(a):a.parentNode.nextSibling;if("object"!==typeof c||null===c)return!1;if("createTextRange"in document.body){var d=document.body.createTextRange();d.moveToElementText(c);d.select()}else if(window.getSelection){d=window.getSelection();var e=document.createRange();e.selectNodeContents(c);d.removeAllRanges();d.addRange(e)}return!1}
function smc_saveEntities(a,b,c){var d;if("string"===typeof c){var e=0;for(d=document.forms[a].elements.length;e<d;e++)document.forms[a].elements[e].id.substr(0,c.length)===c&&(b[b.length]=document.forms[a].elements[e].name)}e=0;for(d=b.length;e<d;e++)b[e]in document.forms[a]&&("undefined"!==typeof post_box_name&&b[e]===post_box_name&&void 0!==$editor_data[post_box_name]?(document.forms[a][b[e]].value=$editor_data[post_box_name].val().replace(/&#/g,"&#38;#"),$editor_data[post_box_name].val(document.forms[a][b[e]].value)):
document.forms[a][b[e]].value=document.forms[a][b[e]].value.replace(/&#/g,"&#38;#"))}function pollOptions(){var a=document.getElementById("poll_expire");isEmptyText(a)||0===a.value?(document.forms[form_name].poll_hide[2].disabled=!0,document.forms[form_name].poll_hide[2].checked&&(document.forms[form_name].poll_hide[1].checked=!0)):document.forms[form_name].poll_hide[2].disabled=!1}
function generateDays(a){a="undefined"!==typeof a?a:"";var b=document.getElementById("day"+a);var c=document.getElementById("year"+a);a=document.getElementById("month"+a);var d=[31,28,31,30,31,30,31,31,30,31,30,31];d[1]=28;0===c.options[c.selectedIndex].value%4&&(d[1]=29);for(c=b.selectedIndex;b.options.length;)b.options[0]=null;a=d[a.value-1];for(d=1;d<=a;d++)b.options[b.length]=new Option(d,d);c<a&&(b.selectedIndex=c)}function toggleLinked(a){a.board.disabled=!a.link_to_board.checked}
function initSearch(){-1!==document.forms.searchform.search.value.indexOf("%u")&&(document.forms.searchform.search.value=decodeURI(document.forms.searchform.search.value))}function selectBoards(a,b,c){for(var d=!0,e=0,f=document.forms.length;e<f;e++)if(document.forms[e].name==b){aForm=document.forms[e];break}if("undefined"!=typeof aForm){for(b=0;b<a.length;b++)d=d&&aForm[c+"["+a[b]+"]"].checked;for(b=0;b<a.length;b++)aForm[c+"["+a[b]+"]"].checked=!d}}
function expandCollapse(a,b,c){a=$("#"+a);b=b||!1;c=c||300;b&&$("#"+b).attr("src",elk_images_url+(!0!==a.is(":hidden")?"/selected.png":"/selected_open.png"));a.slideToggle(c)}function initHighlightSelection(a){$("#"+a+' [name="def_language"]').on("click",function(b){$("#"+a+" .standard_row").removeClass("highlight2");$(this).parent().parent().addClass("highlight2")})}
function doAutoSubmit(a,b,c){var d="undefined"!==typeof c?c:"autoSubmit";if(0===a)document.forms[d].submit();else if(-1===a)return;document.forms[d].cont.value=b+" ("+a+")";a--;setTimeout(function(){doAutoSubmit(a,b,d)},1E3)};/*
 @name      ElkArte Forum
 @copyright ElkArte Forum contributors
 @license   BSD http://opensource.org/licenses/BSD-3-Clause

 @version 1.1
*/
function elk_codefix(){$(".bbc_code").each(function(){var a=$(this);a.get(0).scrollHeight>a.innerHeight()?(a.css("height",a.height()),a.css("max-height","none")):a.css("resize","none")})}
function toggleButtonAJAX(a,b,c){$.ajax({type:"GET",url:a.href+";xml;api",context:document.body,beforeSend:ajax_indicator(!0)}).done(function(d){if(""!==d){var e=$(d).find("elk")[0];if(0===e.getElementsByTagName("error").length){var f=e.getElementsByTagName("text"),g=e.getElementsByTagName("url"),h=e.getElementsByTagName("confirm");if(1===h.length)var k=h[0].firstChild.nodeValue.removeEntities();$("."+a.className.replace(/(list|link)level\d/g,"").trim()).each(function(){1===f.length&&$(this).html("<span>"+
f[0].firstChild.nodeValue.removeEntities()+"</span>");1===g.length&&$(this).attr("href",g[0].firstChild.nodeValue.removeEntities());"undefined"!==typeof k&&eval(b+"= '"+k.replace(/[\\']/g,"\\$&")+"'")})}else 0!==e.getElementsByTagName("text").length&&alert(e.getElementsByTagName("text")[0].firstChild.nodeValue.removeEntities()),0!==e.getElementsByTagName("url").length&&(window.location.href=e.getElementsByTagName("url")[0].firstChild.nodeValue);"undefined"!==typeof c&&c(a,d,e.getElementsByTagName("error"))}}).fail(function(){}).always(function(){ajax_indicator(!1)});
return!1}
function toggleHeaderAJAX(a,b){ajax_indicator(!0);$.ajax({type:"GET",url:a.href+";xml;api",context:document.body,beforeSend:ajax_indicator(!0)}).done(function(a){if(""!==a){var c=$(a).find("elk")[0];0===c.getElementsByTagName("error").length&&(a=c.getElementsByTagName("text"),c=c.getElementsByTagName("body"),$("#"+b+" .pagesection").remove(),$("#"+b+" .topic_listing").remove(),$("#"+b+" .topic_sorting").remove(),1===a.length&&$("#"+b+" #unread_header").html(a[0].firstChild.nodeValue.removeEntities()),1===
c.length&&$('<div class="board_row centertext">{body}</div>'.replace("{body}",c[0].firstChild.nodeValue.removeEntities())).insertAfter("#unread_header"))}}).fail(function(){}).always(function(){ajax_indicator(!1)})}function notifyButton(a){return"undefined"===typeof notification_topic_notice||confirm(notification_topic_notice)?toggleButtonAJAX(a,"notification_topic_notice",function(a,c,d){0<d.length||(a=-1!==a.href.indexOf("sa=on")?1:0,$("input[name='notify']").val(a))}):!1}
function notifyboardButton(a){if("undefined"!==typeof notification_board_notice&&!confirm(notification_board_notice))return!1;toggleButtonAJAX(a,"notification_board_notice");return!1}function unwatchButton(a){toggleButtonAJAX(a);return!1}function markboardreadButton(a){if(!confirm(txt_mark_as_read_confirm))return!1;toggleButtonAJAX(a);$(".new_posts").remove();return!1}
function markallreadButton(a){if(!confirm(txt_mark_as_read_confirm))return!1;toggleButtonAJAX(a);$(".new_posts").remove();$(".board_icon").each(function(){$(this).removeClass("i-board-new i-board-sub").addClass("i-board-off")});$(".board_new_posts").removeClass("board_new_posts");return!1}function markunreadButton(a){if(!confirm(txt_mark_as_read_confirm))return!1;toggleHeaderAJAX(a,"main_content_section");return!1}var relative_time_refresh=0;
function updateRelativeTime(){relative_time_refresh=36E5;$("time").each(function(){var a=new relativeTime(1E3*$(this).data("timestamp"),oRttime.referenceTime);if(a.seconds())$(this).text(oRttime.now),relative_time_refresh=Math.min(relative_time_refresh,1E4);else if(a.minutes()){var b=1<a.deltaTime?oRttime.minutes:oRttime.minute;$(this).text(b.replace("%s",a.deltaTime));relative_time_refresh=Math.min(relative_time_refresh,6E4)}else a.hours()?(b=1<a.deltaTime?oRttime.hours:oRttime.hour,$(this).text(b.replace("%s",
a.deltaTime)),relative_time_refresh=Math.min(relative_time_refresh,36E5)):a.days()?(b=1<a.deltaTime?oRttime.days:oRttime.day,$(this).text(b.replace("%s",a.deltaTime)),relative_time_refresh=Math.min(relative_time_refresh,36E5)):a.weeks()?(b=1<a.deltaTime?oRttime.weeks:oRttime.week,$(this).text(b.replace("%s",a.deltaTime)),relative_time_refresh=Math.min(relative_time_refresh,36E5)):a.months()?(b=1<a.deltaTime?oRttime.months:oRttime.month,$(this).text(b.replace("%s",a.deltaTime)),relative_time_refresh=
Math.min(relative_time_refresh,36E5)):a.years()&&(b=1<a.deltaTime?oRttime.years:oRttime.year,$(this).text(b.replace("%s",a.deltaTime)),relative_time_refresh=Math.min(relative_time_refresh,36E5))});oRttime.referenceTime+=relative_time_refresh;setTimeout(function(){updateRelativeTime()},relative_time_refresh)}
function relativeTime(a,b){if("undefined"===typeof b)this.dateTo=new Date;else if("NaN"==parseInt(b)){var c=b.split(/\D/);this.dateTo=new Date(c[0],--c[1],c[2],c[3],c[4])}else this.dateTo=new Date(b);"NaN"==parseInt(a)?(c=a.split(/\D/),this.dateFrom=new Date(c[0],--c[1],c[2],c[3],c[4])):this.dateFrom=new Date(a);this.time_text="";this.past_time=(this.dateTo-this.dateFrom)/1E3;this.deltaTime=0}relativeTime.prototype.seconds=function(){return 60>this.past_time?(this.deltaTime=this.past_time,!0):!1};
relativeTime.prototype.minutes=function(){return 60<=this.past_time&&60>Math.round(this.past_time/60)?(this.deltaTime=Math.round(this.past_time/60),!0):!1};relativeTime.prototype.hours=function(){return 60<=Math.round(this.past_time/60)&&24>Math.round(this.past_time/3600)?(this.deltaTime=Math.round(this.past_time/3600),!0):!1};relativeTime.prototype.days=function(){return 24<=Math.round(this.past_time/3600)&&7>Math.round(this.past_time/86400)?(this.deltaTime=Math.round(this.past_time/86400),!0):!1};
relativeTime.prototype.weeks=function(){return 7<=Math.round(this.past_time/86400)&&30>Math.round(this.past_time/86400)?(this.deltaTime=Math.round(this.past_time/86400/7),!0):!1};relativeTime.prototype.months=function(){return 30<=Math.round(this.past_time/86400)&&12>Math.round(this.past_time/2592E3)?(this.deltaTime=Math.round(this.past_time/2592E3),!0):!1};
relativeTime.prototype.years=function(){return 12<=Math.round(this.past_time/2592E3)?(this.deltaTime=this.dateTo.getFullYear()-this.dateFrom.getFullYear(),!0):!1};
function revalidateMentions(a,b){for(var c,d,e,f,g=-1,h=/[ \.,;!\?'-\\\/="]/i,k=0,l=all_elk_mentions.length;k<l;k++)if(all_elk_mentions[k].selector===b||all_elk_mentions[k].selector==="#"+b){all_elk_mentions[k].oOptions.isPlugin?(f=$editor_data[all_elk_mentions[k].selector],c=f.opts.mentionOptions.cache.names,d=f.opts.mentionOptions.cache.queries,e=f.getText().replace(/[\u00a0\r\n]/g," "),f=$(f.opts.mentionOptions.cache.mentions)):(c=all_elk_mentions[k].oMention.cached_names,d=all_elk_mentions[k].oMention.cached_queries,
e=document.forms[a][b].value.replace(/[\u00a0\r\n]/g," "),f=$(all_elk_mentions[k].oMention.mentions));e=" "+e+" ";$(f).find("input").each(function(a,b){var c=$(b).data("name");var d=e.indexOf(c);"undefined"!==typeof c&&(-1===d?$(b).remove():(c=e.charAt(d+c.length),d=e.charAt(d-1),""!==c&&0!==c.search(h)?$(b).remove():""!==d&&0!==d.search(h)&&$(b).remove()))});for(var n=0,p=d.length;n<p;n++)for(var m=c[d[n]],q=0,u=m.length;q<u;q++)checkWordOccurrence(e,m[q].name)&&(g=e.indexOf(" @"+m[q].name),-1!==
g&&0===e.charAt(g+2+m[q].name.length+1).search(h)&&f.append($('<input type="hidden" name="uid[]" />').val(m[q].id)))}}function checkWordOccurrence(a,b){return(new RegExp("\\b"+b+"\\b","i")).test(a)}var all_elk_mentions=[];function add_elk_mention(a,b){all_elk_mentions.hasOwnProperty(a)||("undefined"===typeof b&&(b={}),b.selector=a,all_elk_mentions[all_elk_mentions.length]={selector:a,oOptions:b})}
(function(a){a.fn.elkSortable=function(b){a.fn.elkSortable.oDefaultsSettings={opacity:.7,cursor:"move",axis:"y",scroll:!0,containment:"parent",delay:150,handle:"",href:"",tolerance:"intersect",setorder:"serialize",placeholder:"",preprocess:"",tag:"#table_grid_sortable",connect:"",sa:"",title:"",error:"",token:""};var c=a.extend({},a.fn.elkSortable.oDefaultsSettings,b||{});"undefined"===typeof c.infobar&&(c.infobar=new ElkInfoBar("sortable_bar",{error_class:"errorbox",success_class:"infobox"}));a("<div id='errorContainer'><div/>").appendTo("body");
a("#errorContainer").css({display:"none"});a(c.tag).sortable({opacity:c.opacity,cursor:c.cursor,axis:c.axis,handle:c.handle,containment:c.containment,connectWith:c.connect,placeholder:c.placeholder,tolerance:c.tolerance,delay:c.delay,scroll:c.scroll,helper:function(b,e){var d=e.children(),g=e.clone();g.children().each(function(){a(this).replaceWith(function(){return a("<span />",{html:a(this).html()})})});g.children().each(function(b){return a(this).width(d.eq(b).width()).css("display","inline-block")});
a("body").append('<div id="clone" class="'+c.placeholder+'">'+g.html()+"</div>");var h=a("#clone");h.hide();setTimeout(function(){h.appendTo(e.parent());h.show()},1);return h},update:function(b,e){var d="",g=e.item.attr("id"),h=[],k=e.item.parent().attr("id");if(""!==c.preprocess)window[c.preprocess]();"inorder"===c.setorder?(a(c.tag).find("li").each(function(){var b=a(this).attr("id").split("_");h.push({name:b[0]+"[]",value:b[1]})}),d=a.param(h)):a(c.tag).each(function(){d=""===d?d+a(this).sortable(c.setorder):
d+("&"+a(this).sortable(c.setorder))});d+="&"+elk_session_var+"="+elk_session_id;d+="&order=reorder";d+="&moved="+g;d+="&received="+k;""!==c.token&&(d+="&"+c.token.token_var+"="+c.token.token_id);a.ajax({type:"POST",url:elk_scripturl+"?action=xmlhttp;sa="+c.sa+";xml",dataType:"xml",data:d}).fail(function(a,b,d){c.infobar.isError();c.infobar.changeText(b).showBar();""!==c.href&&setTimeout(function(){window.location.href=elk_scripturl+c.href},1E3)}).done(function(b,d,e){e=a("#errorContent");var f=a("#errorContainer");
0!==a(b).find("error").length?(f.append('<p id="errorContent"></p>'),e.html(a(b).find("error").text()),e.dialog({autoOpen:!0,title:c.title,modal:!0,close:function(a,b){""!==c.href&&(window.location.href=elk_scripturl+c.href)}})):0!==a(b).find("elk").length?(c.infobar.isSuccess(),c.infobar.changeText(a(b).find("elk > orders > order").text()).showBar()):(f.append('<p id="errorContent"></p>'),e.html(c.error+" : "+d),e.dialog({autoOpen:!0,title:c.title,modal:!0}))}).always(function(b,d,e){0!==a(b).find("elk > tokens > token").length&&
(c.token.token_id=a(b).find("tokens").find('[type="token"]').text(),c.token.token_var=a(b).find("tokens").find('[type="token_var"]').text())})}})}})(jQuery);
function setBoardIds(){$("[id^=category_]").each(function(){var a=$(this).attr("id").split("category_"),b=$(this).find("ul");1===b.length?0===$(b).find("li").length?$(b).append('<li id="cbp_'+a+',-1,-1"></li>'):$(b).find("li:not(:has(ul))").append('<ul class="nolist elk_droppings"></ul>'):$(b).find("li:not(:has(ul))").append('<ul class="nolist elk_droppings"></ul>');$(this).find("ul:parent").each(function(b,d){var c=$(this).parent("li").attr("id"),f=0;"undefined"!==typeof c&&(f=c.split(","),f=f[1]);
$(this).find("li").each(function(b,c){var d=$(c).attr("id").split(",");$(c).removeAttr("id");d="cbp_"+a[1]+","+d[1]+","+f;$(c).attr("id",d)})})})}
(function(a){a.fn.expand_pages=function(){function b(c){var d=a(c.closest(".linavPages")),e=d.prev().clone(),f=e.find("a").clone(),g=c.clone(),h=c.data("perpage"),k=c.data("firstpage"),l=c.data("lastpage"),n=c.data("baseurl");c=eval(c.data("baseurl"));var p,m=0,q=0;10<(l-k)/h&&(q=l,l=k+10*h);for(m=l;m>k;m-=h){var u=f.clone(),t=e.clone();u.attr("href",c.replace("%1$d",m-h)).text(m/h);t.find("a").each(function(){a(this).replaceWith(u[0])});d.after(t);"undefined"===typeof p&&(p=t)}d.remove();0<q&&(g.find("#expanded_pages_container").each(function(){a(this).remove()}),
g.on("click",function(c){var d=a(this);c.preventDefault();b(d);d.off("mouseenter focus")}).on("mouseenter focus",function(){hover_expand(a(this))}).data("perpage",h).data("firstpage",l).data("lastpage",q).data("baseurl",n),p.after(g))}this.attr("tabindex",0).on("click",function(c){var d=a(this);c.preventDefault();b(d)})}})(jQuery);
(function(a){a.fn.SiteTooltip=function(b){a.fn.SiteTooltip.oDefaultsSettings={followMouse:1,hoverIntent:{sensitivity:10,interval:650,timeout:50},positionTop:12,positionLeft:12,tooltipID:"site_tooltip",tooltipTextID:"site_tooltipText",tooltipClass:"tooltip",tooltipSwapClass:"site_swaptip",tooltipContent:"html"};var c=a.extend({},a.fn.SiteTooltip.oDefaultsSettings,b||{});a(this).each(function(){var b=a('<span class="'+c.tooltipSwapClass+'">'+this.title+"</span>").hide();a(this).append(b).attr("title",
"")});var d=function(b){var d=0,e=0,f=a("#"+c.tooltipID);b||(b=window.event);if(b.pageX||b.pageY)d=b.pageX,e=b.pageY;else if(b.clientX||b.clientY)d=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;b=d+c.positionLeft;e+=c.positionTop;d=f.width();var l=f.height(),n=a(window).scrollLeft(),p=a(window).scrollTop(),m=a(window).width()-24,q=a(window).height()-24;e+l>p+q&&b+d>n+m?(b=b-d-45,e=e-l-45):b+d>n+m?b-=b+
d-(n+m)+24:e+l>p+q&&(e-=e+l-(p+q)+24);f.css({left:b+"px",top:e+"px"})},e=function(){a("#"+c.tooltipID).fadeOut(175,function(){a(this).trigger("unload").remove()})};return this.each(function(){function b(b){if(a(this).children("."+c.tooltipSwapClass).text()){a("body").append('<div id="'+c.tooltipID+'" class="'+c.tooltipClass+'"><div id="'+c.tooltipTextID+'" class="hide"></div></div>');var e=a("#"+c.tooltipTextID);"html"===c.tooltipContent?e.html(a(this).children("."+c.tooltipSwapClass).html()):e.text(a(this).children("."+
c.tooltipSwapClass).text());a("#"+c.tooltipID+" #"+c.tooltipTextID).slideDown(150);d(b)}return!1}function g(a){e(this);return!1}a.fn.hoverIntent?a(this).hoverIntent({sensitivity:c.hoverIntent.sensitivity,interval:c.hoverIntent.interval,over:b,timeout:c.hoverIntent.timeout,out:g}):a(this).hover(b,g);if(c.followMouse)a(this).on("mousemove",function(a){d(a);return!1});a(this).on("click",function(){e(this);return!0})})}})(jQuery);var error_txts={};
function errorbox_handler(a){this.opt=a;this.oError_box=null;this.oErrorHandle=window;this.evaluate=!1;this.init()}
errorbox_handler.prototype.init=function(){void 0!==this.opt.check_id?this.oChecks_on=$(document.getElementById(this.opt.check_id)):void 0!==this.opt.selector?this.oChecks_on=this.opt.selector:void 0!==this.opt.editor&&(this.oChecks_on=eval(this.opt.editor),this.evaluate=!0);this.oErrorHandle.instanceRef=this;null===this.oError_box&&(this.oError_box=$(document.getElementById(this.opt.error_box_id)));if(!1===this.evaluate)this.oChecks_on.attr("onblur",this.opt.self+".checkErrors()"),this.oChecks_on.attr("onkeyup",
this.opt.self+".checkErrors()");else{var a=this.opt.self;$(function(){var b=eval(a);$editor_data[b.opt.editor_id].addEvent(b.opt.editor_id,"keyup",function(){b.checkErrors()})})}};errorbox_handler.prototype.boxVal=function(){return!1===this.evaluate?this.oChecks_on.val():this.oChecks_on()};
errorbox_handler.prototype.checkErrors=function(){var a=this.opt.error_checks.length;if(0!==a){for(var b=0;b<a;b++){var c=$(document.getElementById(this.opt.error_box_id+"_"+this.opt.error_checks[b].code));this.opt.error_checks[b].efunction(this.boxVal())?this.addError(c,this.opt.error_checks[b].code):this.removeError(this.oError_box,c)}this.oError_box.attr("class","errorbox")}0===this.oError_box.find("li").length?this.oError_box.slideUp():this.oError_box.slideDown()};
errorbox_handler.prototype.addError=function(a,b){0===a.length&&(""===$.trim(this.oError_box.children("#"+this.opt.error_box_id+"_list").html())&&this.oError_box.append("<ul id='"+this.opt.error_box_id+"_list'></ul>"),$(document.getElementById(this.opt.error_box_id+"_list")).append('<li style="display:none;" id=\''+this.opt.error_box_id+"_"+b+"' class='error'>"+error_txts[b]+"</li>"),$(document.getElementById(this.opt.error_box_id+"_"+b)).slideDown())};
errorbox_handler.prototype.removeError=function(a,b){0!==b.length&&b.slideUp(function(){b.remove();0===a.find("li").length&&a.slideUp()})};
function addAnotherOption(a,b,c,d){b.type=b.type||"text";b["class"]=b["class"]||"input_text";b.size=b.size||"20";c.type=c.type||"text";c["class"]=c["class"]||"input_text";c.size=c.size||"20";d=d||"";var e=document.createElement("dt"),f=document.createElement("input");f.name=b.name;f.type=b.type;f.setAttribute("class",b["class"]);f.size=b.size;e.appendChild(f);b=document.createElement("dd");f=""===d?document.createElement("input"):document.createElement("select");f.name=c.name;f.type=c.type;f.size=
c.size;f.setAttribute("class",c["class"]);b.appendChild(f);if(""!==d){var g;for(g in d){var h=d[g];c=document.createElement("option");c.name="option";c.value=h.id;c.innerHTML=h.name;f.appendChild(c)}}a=document.getElementById(a);a.parentNode.insertBefore(e,a);a.parentNode.insertBefore(b,a)}
function toggle_mlsearch_opt(){var a=$("#mlsearch_options");a.is(":visible")||(a.fadeIn("fast"),$("body").on("click",mlsearch_opt_hide),$("#mlsearch_options, #mlsearch_input").off("click",mlsearch_opt_hide).on("click",function(a){a.stopPropagation()}))}function mlsearch_opt_hide(){$("body").off("click",mlsearch_opt_hide);$("#mlsearch_options").slideToggle("fast")}
function loadAddNewPoll(a,b,c){if("undefined"===typeof b)return!0;var d=$("#post_header").closest("form"),e=$("#poll_main, #poll_options");if($(a).val()===poll_add){if($(a).val(poll_remove),a=$("#icon"),"xx"===a.val()&&a.val("poll").change(),d.attr("action",d.attr("action")+";poll"),0<$("#poll_main").length)return e.find("input").each(function(){"required"===$(this).data("required")&&$(this).attr("required","required")}),e.toggle(),!1}else return b=$("#icon"),"poll"===b.val()&&b.val("xx").change(),
d.attr("action",d.attr("action").replace(";poll","")),e.hide().find("input").each(function(){"required"===$(this).attr("required")&&($(this).data("required","required"),$(this).removeAttr("required"))}),$(a).val(poll_add),!1;$.ajax({url:elk_scripturl+"?action=poll;sa=interface;xml;board="+b,type:"GET",dataType:"html",beforeSend:ajax_indicator(!0)}).done(function(a,b,d){var e=0;b=0;for(d=document.forms[c].elements.length;b<d;b++)e=Math.max(e,document.forms[c].elements[b].tabIndex);$("#post_header").after(a);
$("#poll_main input, #poll_options input").each(function(){$(this).attr("tabindex",++e)});$("#poll_main legend, #poll_options legend").on("click",function(){$(this).siblings().slideToggle("fast");$(this).parent().toggleClass("collapsed")}).each(function(){$(this).data("collapsed")&&($(this).siblings().css({display:"none"}),$(this).parent().toggleClass("collapsed"))})}).always(function(){ajax_indicator(!1)});return!1}
function disableAutoComplete(){window.onload=function(){$("input[type=email], input[type=password], .input_text, .input_clear").attr("autocomplete","off");setTimeout(function(){$("input[type=password], .input_clear").val(" ").val("")},1)}}
(function(){var a=function(a){a=a?a:{};var b=[],d=0,e=function(a){for(var c=0;c<b.length;c++)b[c].send(a)},f=function(){0!==b.length&&$.ajax({url:elk_scripturl+"?action=mentions;sa=fetch;api=json;lastsent="+d}).done(function(b){""!==b&&(e(b),d=b.timelast);setTimeout(function(){f()},a.delay)})};(function(a){"undefined"===typeof a.delay&&(a.delay=15E3);setTimeout(function(){f()},a.delay)})(a);return{add:function(a){b.push(a)}}};"undefined"!==typeof define&&define.amd?define([],function(){return a}):
"undefined"!==typeof module&&module.exports?module.exports=a:this.ElkNotifications=a})();var ElkNotifier=new ElkNotifications;
(function(){var a=function(a,c,d){$.extend(d,{inlineSelector:".inline_insert",data:"attachid",addAfter:"label"});var b=[];return{addInterface:function(a,e){if("undefined"!==typeof d.trigger)var f=d.trigger.clone();else f=$("<a />"),"undefined"!==typeof d.triggerClass&&f.addClass(d.triggerClass);f.on("click",function(a){a.preventDefault();$editor_data[c].insertText("[attach]"+e+"[/attach]",!1,!0)}).attr("id","inline_attach_"+e).data("attachid",e);a.after(f);b.push(f)},removeAttach:function(a){var c=
[],d;for(d=0;d<b.length&&b[d].data("attachid")!=a;d++)c.push(b[d]);for(d++;d<b.length;d++)c.push(b[d]);b=c;$("#inline_attach_"+a).remove()}}};"undefined"!==typeof define&&define.amd?define([],function(){return a}):"undefined"!==typeof module&&module.exports?module.exports=a:this.ElkInlineAttachments=a})();
(function(){var a=function(a,c){c=$.extend({text:"","class":"ajax_infobar",hide_delay:4E3,error_class:"error",success_class:"success"},c);var b=$("#"+a),e=null,f=function(a){b.addClass(a);return this},g=function(a){b.removeClass(a);return this},h=function(){clearTimeout(e);b.slideUp();return this};(function(a,c){clearTimeout(e);0===b.length&&(b=$('<div id="'+a+'" class="'+c["class"]+' hide" />'),$("body").append(b),b.attr("id",a),b.addClass(c["class"]),b.text(c.text))})(a,c);return{changeText:function(a){clearTimeout(e);
b.html(a);return this},addClass:f,removeClass:g,showBar:function(){clearTimeout(e);b.fadeIn();0!==c.hide_delay&&(e=setTimeout(function(){h()},c.hide_delay));return this},isError:function(){g(c.success_class);f(c.error_class)},isSuccess:function(){g(c.error_class);f(c.success_class)},hide:h}};"undefined"!==typeof define&&define.amd?define([],function(){return a}):"undefined"!==typeof module&&module.exports?module.exports=a:this.ElkInfoBar=a})();$(function(){use_click_menu?$("#main_menu, ul.admin_menu, ul.sidebar_menu, ul.poster, ul.quickbuttons, #sort_by").superclick({speed:150,animation:{opacity:"show",height:"toggle"},speedOut:0,activeClass:"sfhover"}):$("#main_menu, ul.admin_menu, ul.sidebar_menu, ul.poster, ul.quickbuttons, #sort_by").superfish({delay:300,speed:175,hoverClass:"sfhover"});$("a[href='#top']").on("click",function(a){a.preventDefault();$("html,body").animate({scrollTop:0},1200)});$("a[href='#bot']").on("click",function(a){a.preventDefault();
a=$("#bot");var b=a.height();$("html,body").animate({scrollTop:a.offset().top+b-$(window).height()},1200)});(!is_mobile&&!is_touch||use_click_menu)&&$(".preview").SiteTooltip({hoverIntent:{sensitivity:10,interval:750,timeout:50}});$("a.bbc_link img.bbc_img").parent().css("border","0");"function"===typeof elk_codefix&&elk_codefix();$(".expand_pages").expand_pages();$(document).on("click","legend",function(){$(this).siblings().slideToggle("fast");$(this).parent().toggleClass("collapsed")});$("legend",
function(){$(this).data("collapsed")&&$(this).click()});$(".spoilerheader").click(function(){$(this).next().children().slideToggle("fast")});$("[data-lightboximage]").on("click.elk_lb",function(a){a.preventDefault();expandThumbLB($(this).data("lightboximage"),$(this).data("lightboxmessage"))});$("img").each(function(){if(!1===$(this).hasClass("bbc_img resized"))return!0;$(this).css({cursor:"pointer"});$(this).on("click.elk_bbc",function(){var a=$(this);$.isEmptyObject(a.data("bbc_img"))?(a.data("bbc_img",
{width:a.css("width"),height:a.css("height"),"max-width":a.css("max-width"),"max-height":a.css("max-height")}),a.css({width:"auto"===a.css("width")?null:"auto"}),a.css({height:"auto"===a.css("height")?null:"auto"}),a.css({"max-height":"none"}),a.css({"max-width":"100%"}),a.wrap('<div style="overflow:auto;display:inline-block;"></div>')):(a.css({width:a.data("bbc_img").width}),a.css({height:a.data("bbc_img").height}),a.css({"max-width":a.data("bbc_img")["max-width"]}),a.css({"max-height":a.data("bbc_img")["max-height"]}),
a.removeData("bbc_img"),a.unwrap(),a.css({"max-width":"100%"}))})});$(".hamburger_30").click(function(a){a.preventDefault();a=$(this).data("id");$("#"+a).addClass("visible");$(this).addClass("visible")})});
function elk_addButton(a,b,c){a=document.getElementById(a);b=a.getElementsByTagName("span");0<b.length&&(b=b[b.length-1],b.className=b.className.replace(/\s*last/,"position_holder"));a=a.getElementsByTagName("ul")[0];b=document.createElement("li");var d=document.createAttribute("role");d.value="menuitem";b.setAttributeNode(d);"sId"in c&&(b.id=c.sId);b.innerHTML='<a class="linklevel1" href="'+c.sUrl+'" '+("sCustom"in c?c.sCustom:"")+'><span class="last"'+("sId"in c?' id="'+c.sId+'_text"':"")+">"+c.sText+
"</span></a>";a.appendChild(b)};/*
 @name      ElkArte Forum
 @copyright ElkArte Forum contributors
 @license   BSD http://opensource.org/licenses/BSD-3-Clause

 This file contains code covered by:
 copyright:	2011 Simple Machines (http://www.simplemachines.org)
 license:		BSD, See included LICENSE.TXT for terms and conditions.

 @version 1.1.1
*/
function QuickModifyTopic(a){this.opt=a;this.aHidePrefixes=this.opt.aHidePrefixes;this.iCurTopicId=0;this.sBuffSubject=this.sCurMessageId="";this.oSavetipElem=!1;this.oCurSubjectDiv=null;this.oTopicModHandle=document;this.bMouseOnDiv=this.bInEditMode=!1;this.init()}QuickModifyTopic.prototype.init=function(){this.oTopicModHandle.instanceRef=this;this.oTopicModHandle.onkeydown=function(a){return this.instanceRef.modify_topic_keypress(a)};this.oTopicModHandle.onclick=function(a){return this.instanceRef.modify_topic_click(a)}};
QuickModifyTopic.prototype.modify_topic=function(a,b){if(this.bInEditMode){if(this.iCurTopicId===a)return;this.modify_topic_cancel()}this.bMouseOnDiv=this.bInEditMode=!0;this.iCurTopicId=a;ajax_indicator(!0);sendXMLDocument.call(this,elk_prepareScriptUrl(elk_scripturl)+"action=quotefast;quote="+b+";modify;xml","",this.onDocReceived_modify_topic)};
QuickModifyTopic.prototype.onDocReceived_modify_topic=function(a){if(!a||!a.getElementsByTagName("message"))return this.modify_topic_cancel(),!0;this.sCurMessageId=a.getElementsByTagName("message")[0].getAttribute("id");this.oCurSubjectDiv=document.getElementById("msg_"+this.sCurMessageId.substr(4));this.sBuffSubject=this.oCurSubjectDiv.innerHTML;$.isFunction($.fn.SiteTooltip)&&(this.oSavetipElem=this.oCurSubjectDiv.nextSibling,this.sSavetip=this.oSavetipElem.innerHTML,this.oSavetipElem.innerHTML=
"");this.set_hidden_topic_areas("none");ajax_indicator(!1);this.modify_topic_show_edit(a.getElementsByTagName("subject")[0].childNodes[0].nodeValue)};QuickModifyTopic.prototype.modify_topic_cancel=function(){this.oCurSubjectDiv.innerHTML=this.sBuffSubject;this.set_hidden_topic_areas("");this.bInEditMode=!1;!1!==this.oSavetipElem&&(this.oSavetipElem.innerHTML=this.sSavetip);return!1};
QuickModifyTopic.prototype.set_hidden_topic_areas=function(a){for(var b=0;b<this.aHidePrefixes.length;b++)null!==document.getElementById(this.aHidePrefixes[b]+this.sCurMessageId.substr(4))&&(document.getElementById(this.aHidePrefixes[b]+this.sCurMessageId.substr(4)).style.display=a)};
QuickModifyTopic.prototype.modify_topic_show_edit=function(a){this.oCurSubjectDiv.innerHTML='<input type="text" name="subject" value="'+a+'" size="60" style="width: 95%;" maxlength="80" class="input_text" autocomplete="off" /><input type="hidden" name="topic" value="'+this.iCurTopicId+'" /><input type="hidden" name="msg" value="'+this.sCurMessageId.substr(4)+'" />';this.oCurSubjectDiv.instanceRef=this;this.oCurSubjectDiv.onmouseout=function(a){return this.instanceRef.modify_topic_mouseout(a)};this.oCurSubjectDiv.onmouseover=
function(a){return this.instanceRef.modify_topic_mouseover(a)}};
QuickModifyTopic.prototype.modify_topic_save=function(a,b){if(!this.bInEditMode)return!0;var c=[];c[c.length]="subject="+document.forms.quickModForm.subject.value.replace(/&#/g,"&#38;#").php_urlencode();c[c.length]="topic="+parseInt(document.forms.quickModForm.elements.topic.value);c[c.length]="msg="+parseInt(document.forms.quickModForm.elements.msg.value);ajax_indicator(!0);sendXMLDocument.call(this,elk_prepareScriptUrl(elk_scripturl)+"action=jsmodify;topic="+parseInt(document.forms.quickModForm.elements.topic.value)+
";"+b+"="+a+";xml",c.join("&"),this.modify_topic_done);return!1};
QuickModifyTopic.prototype.modify_topic_done=function(a){ajax_indicator(!1);if(!a||!a.getElementsByTagName("subject"))return this.modify_topic_cancel(),!0;var b=a.getElementsByTagName("elk")[0].getElementsByTagName("message")[0];a=b.getElementsByTagName("subject")[0];b=b.getElementsByTagName("error")[0];if(!a||b)return!1;this.modify_topic_hide_edit(a.childNodes[0].nodeValue);this.set_hidden_topic_areas("");this.bInEditMode=!1;$.isFunction($.fn.SiteTooltip)&&(this.oSavetipElem.innerHTML=this.sSavetip,
$(".preview").SiteTooltip());return!1};QuickModifyTopic.prototype.modify_topic_hide_edit=function(a){this.oCurSubjectDiv.innerHTML='<a href="'+elk_scripturl+"?topic="+this.iCurTopicId+'.0">'+a+"</a>"};
QuickModifyTopic.prototype.modify_topic_keypress=function(a){"undefined"!==typeof a.keyCode&&this.bInEditMode&&(27===a.keyCode?(this.modify_topic_cancel(),"undefined"===typeof a.preventDefault?a.returnValue=!1:a.preventDefault()):13===a.keyCode&&(this.modify_topic_save(elk_session_id,elk_session_var),"undefined"===typeof a.preventDefault?a.returnValue=!1:a.preventDefault()))};
QuickModifyTopic.prototype.modify_topic_click=function(a){this.bInEditMode&&!this.bMouseOnDiv&&this.modify_topic_save(elk_session_id,elk_session_var)};QuickModifyTopic.prototype.modify_topic_mouseout=function(a){this.bMouseOnDiv=!1};QuickModifyTopic.prototype.modify_topic_mouseover=function(a){this.bMouseOnDiv=!0;a.preventDefault()};function QuickReply(a){this.opt=a;this.bCollapsed=this.opt.bDefaultCollapsed;this.bIsFull=this.opt.bIsFull;this.bCollapsed&&this.swap(!0)}
QuickReply.prototype.quote=function(a,b){ajax_indicator(!0);if(this.bCollapsed)return window.location.href=elk_prepareScriptUrl(this.opt.sScriptUrl)+"action=post;quote="+a+";topic="+this.opt.iTopicId+"."+this.opt.iStart,!1;this.bIsFull?insertQuoteFast(a):getXMLDocument(elk_prepareScriptUrl(this.opt.sScriptUrl)+"action=quotefast;quote="+a+";xml",this.onQuoteReceived);window.location.hash="Microsoft Internet Explorer"===navigator.appName?this.opt.sJumpAnchor:"#"+this.opt.sJumpAnchor;return!1};
QuickReply.prototype.onQuoteReceived=function(a){for(var b="",c=0;c<a.getElementsByTagName("quote")[0].childNodes.length;c++)b+=a.getElementsByTagName("quote")[0].childNodes[c].nodeValue;replaceText(b,document.forms.postmodify.message);ajax_indicator(!1)};
QuickReply.prototype.swap=function(a,b){var c=document.getElementById(this.opt.sClassId),d=this.opt.sContainerId,e=this.opt.bIsFull;a="undefined"!==typeof a;b="undefined"===typeof b;a||(this.bCollapsed=!this.bCollapsed);var f=this.bCollapsed?this.opt.sClassExpanded:this.opt.sClassCollapsed;c.className!==f&&(c.className=f);c.title=this.bCollapsed?this.opt.sTitleCollapsed:this.opt.sTitleExpanded;this.bCollapsed?$("#"+this.opt.sContainerId).slideUp():($("#"+this.opt.sContainerId).slideDown(),e&&$("#"+
d).resize());b&&"oCookieOptions"in this.opt&&this.opt.oCookieOptions.bUseCookie&&this.oCookie.set(this.opt.oCookieOptions.sCookieName,this.bCollapsed?"1":"0");!a&&b&&"oThemeOptions"in this.opt&&this.opt.oThemeOptions.bUseThemeSettings&&elk_setThemeOption(this.opt.oThemeOptions.sOptionName,this.bCollapsed?"1":"0","sThemeId"in this.opt.oThemeOptions?this.opt.oThemeOptions.sThemeId:null,"sAdditionalVars"in this.opt.oThemeOptions?this.opt.oThemeOptions.sAdditionalVars:null)};
function QuickModify(a){this.opt=a;this.bInEditMode=!1;this.sCurMessageId="";this.oMsgIcon=this.oCurSubjectDiv=this.oCurInfoDiv=this.oCurMessageDiv=null;this.sInfoBuffer=this.sSubjectBuffer=this.sMessageBuffer="";this.aAccessKeys=[];a=document.getElementsByClassName(this.opt.sClassName);for(var b=0,c=a.length;b<c;b++)a[b].style.display="inline"}
QuickModify.prototype.modifyMsg=function(a){if("undefined"!==typeof this.opt.sFormRemoveAccessKeys&&typeof document.forms[this.opt.sFormRemoveAccessKeys])for(var b=document.forms[this.opt.sFormRemoveAccessKeys].getElementsByTagName("input"),c=0;c<b.length;c++)""!==b[c].accessKey&&(this.aAccessKeys[b[c].name]=b[c].accessKey,b[c].accessKey="");this.bInEditMode&&this.modifyCancel();this.bInEditMode=!0;ajax_indicator(!0);sendXMLDocument.call(this,elk_prepareScriptUrl(elk_scripturl)+"action=quotefast;quote="+
a+";modify;xml","",this.onMessageReceived)};
QuickModify.prototype.onMessageReceived=function(a){var b="";ajax_indicator(!1);this.sCurMessageId=a.getElementsByTagName("message")[0].getAttribute("id");null!==this.opt.sIconHide&&(this.oMsgIcon=document.getElementById("messageicon_"+this.sCurMessageId.replace("msg_","")),null!==this.oMsgIcon&&"none"===getComputedStyle(this.oMsgIcon).getPropertyValue("display")&&(this.oMsgIcon.style.display="inline"));if(!document.getElementById(this.sCurMessageId))return this.modifyCancel();for(var c=0;c<a.getElementsByTagName("message")[0].childNodes.length;c++)b+=
a.getElementsByTagName("message")[0].childNodes[c].nodeValue;this.oCurMessageDiv=document.getElementById(this.sCurMessageId);this.sMessageBuffer=this.oCurMessageDiv.innerHTML;b=b.replace(/\$/g,"{&dollarfix;$}");this.oCurMessageDiv.innerHTML=this.opt.sTemplateBodyEdit.replace(/%msg_id%/g,this.sCurMessageId.substr(4)).replace(/%body%/,b).replace(/\{&dollarfix;\$\}/g,"$");null!==this.opt.sIDSubject&&(this.oCurSubjectDiv=document.getElementById(this.opt.sIDSubject+this.sCurMessageId.substr(4)),null!==
this.oCurSubjectDiv&&(this.oCurSubjectDiv.style.display="none",this.sSubjectBuffer=this.oCurSubjectDiv.innerHTML));a=a.getElementsByTagName("subject")[0].childNodes[0].nodeValue.replace(/\$/g,"{&dollarfix;$}");null!==this.opt.sIDInfo&&(this.oCurInfoDiv=document.getElementById(this.opt.sIDInfo+this.sCurMessageId.substr(4)),null!==this.oCurInfoDiv&&(this.sInfoBuffer=this.oCurInfoDiv.innerHTML,this.oCurInfoDiv.innerHTML=this.opt.sTemplateSubjectEdit.replace(/%subject%/,a).replace(/\{&dollarfix;\$\}/g,
"$")));location.hash="#info_"+this.sCurMessageId.substr(this.sCurMessageId.lastIndexOf("_")+1);"funcOnAfterCreate"in this.opt&&(this.tmpMethod=this.opt.funcOnAfterCreate,this.tmpMethod(this),delete this.tmpMethod);return!0};
QuickModify.prototype.modifyCancel=function(){this.oCurMessageDiv&&(this.oCurMessageDiv.innerHTML=this.sMessageBuffer,this.oCurInfoDiv.innerHTML=this.sInfoBuffer,this.oCurSubjectDiv.innerHTML=this.sSubjectBuffer,null!==this.oCurSubjectDiv&&(this.oCurSubjectDiv.style.display=""));if(this.opt.sIconHide){var a=document.getElementById("msg_icon_"+this.sCurMessageId.replace("msg_",""));null!==a&&0<a.src.indexOf(this.opt.sIconHide)&&(this.oMsgIcon.style.display="none")}this.bInEditMode=!1;if("undefined"!==
typeof this.opt.sFormRemoveAccessKeys&&typeof document.forms[this.opt.sFormRemoveAccessKeys]){a=document.forms[this.opt.sFormRemoveAccessKeys].getElementsByTagName("input");for(var b=0;b<a.length;b++)"undefined"!==typeof this.aAccessKeys[a[b].name]&&(a[b].accessKey=this.aAccessKeys[a[b].name])}return!1};
QuickModify.prototype.modifySave=function(a,b){var c,d=[],e=[];if(!this.bInEditMode)return!0;this.bInEditMode=!1;if("undefined"!==typeof this.opt.sFormRemoveAccessKeys&&typeof document.forms[this.opt.sFormRemoveAccessKeys]){var f=document.forms[this.opt.sFormRemoveAccessKeys].getElementsByTagName("input");for(c=0;c<f.length;c++)"undefined"!==typeof this.aAccessKeys[f[c].name]&&(f[c].accessKey=this.aAccessKeys[f[c].name])}f=document.forms.quickModForm.getElementsByTagName("input");for(c=0;c<f.length;c++)"uid[]"===
f[c].name&&e.push("uid["+c+"]="+parseInt(f[c].value));d[d.length]="subject="+document.forms.quickModForm.subject.value.replace(/&#/g,"&#38;#").php_urlencode();d[d.length]="message="+document.forms.quickModForm.message.value.replace(/&#/g,"&#38;#").php_urlencode();d[d.length]="topic="+parseInt(document.forms.quickModForm.elements.topic.value);d[d.length]="msg="+parseInt(document.forms.quickModForm.elements.msg.value);0<e.length&&(d[d.length]=e.join("&"));ajax_indicator(!0);sendXMLDocument.call(this,
elk_prepareScriptUrl(this.opt.sScriptUrl)+"action=jsmodify;topic="+this.opt.iTopicId+";"+elk_session_var+"="+elk_session_id+";xml",d.join("&"),this.onModifyDone);return!1};
QuickModify.prototype.onModifyDone=function(a){ajax_indicator(!1);if(a&&a.getElementsByTagName("elk")[0]){var b=a.getElementsByTagName("elk")[0].getElementsByTagName("message")[0];a=b.getElementsByTagName("body")[0];var c=b.getElementsByTagName("error")[0];$(document.forms.quickModForm.message).removeClass("border_error");$(document.forms.quickModForm.subject).removeClass("border_error");if(a){c="";for(var d=0;d<a.childNodes.length;d++)c+=a.childNodes[d].nodeValue;this.sMessageBuffer=this.opt.sTemplateBodyNormal.replace(/%body%/,
c.replace(/\$/g,"{&dollarfix;$}")).replace(/\{&dollarfix;\$\}/g,"$");this.oCurMessageDiv.innerHTML=this.sMessageBuffer;a=b.getElementsByTagName("subject")[0].childNodes[0].nodeValue.replace(/\$/g,"{&dollarfix;$}");this.sSubjectBuffer=this.opt.sTemplateSubjectNormal.replace(/%subject%/,a).replace(/\{&dollarfix;\$\}/g,"$");this.oCurSubjectDiv.innerHTML=this.sSubjectBuffer;this.oCurSubjectDiv.style.display="";this.oCurInfoDiv.innerHTML=this.sInfoBuffer;this.opt.bShowModify&&(a=document.getElementById("modified_"+
this.sCurMessageId.substr(4)),a.innerHTML=b.getElementsByTagName("modified")[0].childNodes[0].nodeValue,a.style.display="block");null!==this.opt.sIconHide&&(b=document.getElementById("msg_icon_"+this.sCurMessageId.replace("msg_","")),null!==b&&0<b.src.indexOf(this.opt.sIconHide)&&(this.oMsgIcon.style.display="none"));$.isFunction($.fn.linkifyvideo)&&$().linkifyvideo(oEmbedtext,this.sCurMessageId);$("#"+this.sCurMessageId+" .spoilerheader").click(function(){$(this).next().children().slideToggle("fast")});
"function"===typeof elk_codefix&&elk_codefix();"function"===typeof prettyPrint&&prettyPrint()}else c&&(b=document.getElementById("error_box"),b.innerHTML=c.childNodes[0].nodeValue,b.style.display="","1"===c.getAttribute("in_body")&&$(document.forms.quickModForm.message).addClass("border_error"),"1"===c.getAttribute("in_subject")&&$(document.forms.quickModForm.subject).addClass("border_error"))}else"undefined"!==typeof a.childNodes&&0<a.childNodes.length&&"parsererror"===a.firstChild.nodeName?(b=document.getElementById("error_box"),
b.innerHTML=a.firstChild.textContent,b.style.display=""):this.modifyCancel()};function InTopicModeration(a){this.opt=a;this.bButtonsShown=!1;this.iNumSelected=0;"undefined"===typeof this.opt.sSessionVar&&(this.opt.sSessionVar="sesc");this.init()}
InTopicModeration.prototype.init=function(){for(var a=0,b=this.opt.aMessageIds.length;a<b;a++){var c=document.createElement("input");c.type="checkbox";c.className="input_check";c.name="msgs[]";c.value=this.opt.aMessageIds[a];c.instanceRef=this;c.onclick=function(){this.instanceRef.handleClick(this)};var d=document.getElementById(this.opt.sCheckboxContainerMask+this.opt.aMessageIds[a]);d.appendChild(c);d.style.display=""}};
InTopicModeration.prototype.handleClick=function(a){if(!this.bButtonsShown&&this.opt.sButtonStripDisplay){var b=document.getElementById(this.opt.sButtonStrip),c=document.getElementById(this.opt.sButtonStripDisplay);if("object"===typeof c&&null!==c)c.style.display="";else{c=document.createElement("div");var d=document.createElement("ul");c.id=this.opt.sButtonStripDisplay;c.className=this.opt.sButtonStripClass?this.opt.sButtonStripClass:"buttonlist floatbottom";c.appendChild(d);b.appendChild(c)}this.opt.bCanRemove&&
elk_addButton(this.opt.sButtonStrip,this.opt.bUseImageButton,{sId:this.opt.sSelf+"_remove_button",sText:this.opt.sRemoveButtonLabel,sImage:this.opt.sRemoveButtonImage,sUrl:"#",sCustom:' onclick="return '+this.opt.sSelf+".handleSubmit('remove')\""});this.opt.bCanRestore&&elk_addButton(this.opt.sButtonStrip,this.opt.bUseImageButton,{sId:this.opt.sSelf+"_restore_button",sText:this.opt.sRestoreButtonLabel,sImage:this.opt.sRestoreButtonImage,sUrl:"#",sCustom:' onclick="return '+this.opt.sSelf+".handleSubmit('restore')\""});
this.opt.bCanSplit&&elk_addButton(this.opt.sButtonStrip,this.opt.bUseImageButton,{sId:this.opt.sSelf+"_split_button",sText:this.opt.sSplitButtonLabel,sImage:this.opt.sSplitButtonImage,sUrl:"#",sCustom:' onclick="return '+this.opt.sSelf+".handleSubmit('split')\""});this.bButtonsShown=!0}this.iNumSelected+=a.checked?1:-1;this.opt.bCanRemove&&!this.opt.bUseImageButton&&(document.getElementById(this.opt.sSelf+"_remove_button_text").innerHTML=this.opt.sRemoveButtonLabel+" ["+this.iNumSelected+"]",document.getElementById(this.opt.sSelf+
"_remove_button").style.display=1>this.iNumSelected?"none":"");this.opt.bCanRestore&&!this.opt.bUseImageButton&&(document.getElementById(this.opt.sSelf+"_restore_button_text").innerHTML=this.opt.sRestoreButtonLabel+" ["+this.iNumSelected+"]",document.getElementById(this.opt.sSelf+"_restore_button").style.display=1>this.iNumSelected?"none":"");this.opt.bCanSplit&&!this.opt.bUseImageButton&&(document.getElementById(this.opt.sSelf+"_split_button_text").innerHTML=this.opt.sSplitButtonLabel+" ["+this.iNumSelected+
"]",document.getElementById(this.opt.sSelf+"_split_button").style.display=1>this.iNumSelected?"none":"");a=document.getElementById(this.opt.sButtonStrip).getElementsByTagName("span");3<a.length&&(1>this.iNumSelected?(a[a.length-3].className=a[a.length-3].className.replace(/\s*position_holder/,"last"),a[a.length-2].className=a[a.length-2].className.replace(/\s*position_holder/,"last")):(a[a.length-2].className=a[a.length-2].className.replace(/\s*last/,"position_holder"),a[a.length-3].className=a[a.length-
3].className.replace(/\s*last/,"position_holder")))};
InTopicModeration.prototype.handleSubmit=function(a){var b=document.getElementById(this.opt.sFormId),c=document.createElement("input");c.type="hidden";c.name=this.opt.sSessionVar;c.value=this.opt.sSessionId;b.appendChild(c);switch(a){case "remove":if(!confirm(this.opt.sRemoveButtonConfirm))return!1;b.action=b.action.replace(/;split_selection=1/,"");b.action=b.action.replace(/;restore_selected=1/,"");break;case "restore":if(!confirm(this.opt.sRestoreButtonConfirm))return!1;b.action=b.action.replace(/;split_selection=1/,
"");b.action+=";restore_selected=1";break;case "split":if(!confirm(this.opt.sRestoreButtonConfirm))return!1;b.action=b.action.replace(/;restore_selected=1/,"");b.action+=";split_selection=1";break;default:return!1}b.submit();return!0};
function expandThumbLB(a,b){var c=document.getElementById("link_"+a),d=$('a[data-lightboxmessage="'+b+'"]'),e=[],f=null,g=null,h=$('<span id="elk_lb_expand"></span>'),k=$("#elk_lightbox"),l=$("#elk_lb_content"),n=function(){$('<div id="lightbox-loading"><i class="icon icon-spin icon-xl i-spinner"></i><div>').appendTo(l);$("html, body").addClass("elk_lb_no_scrolling")},p=function(){$("#lightbox-loading").remove()},m=function(){h.off("click");k.hide();l.html("").removeAttr("style").removeClass("expand");
$("html, body").removeClass("elk_lb_no_scrolling");$(window).off("resize.lb");$(window).off("keydown.lb");$(window).off("touchstart.lb");$(window).off("touchmove.lb")},q=function(){$('<img id="elk_lb_img" src="'+c.href+'">').on("load",function(){var a=(window.innerWidth?window.innerWidth:$(window).width())*(is_mobile?.8:.9),b=.9*(window.innerHeight?window.innerHeight:$(window).height());$(this).css({"max-width":Math.floor(a)+"px","max-height":Math.floor(b)+"px"});l.html($(this)).append(h);p()}).on("error",
function(){setTimeout(function(){p();m()},1500)})},u=function(){a=e[($.inArray(a,e)+1)%e.length]},t=function(){a=e[($.inArray(a,e)-1+e.length)%e.length]},r=function(){l.html("").removeAttr("style").removeClass("expand");n();h.off("click");c=document.getElementById("link_"+a);q();v()},v=function(){h.on("click",function(){$("#elk_lb_content").addClass("expand").css({height:Math.floor(.95*window.innerHeight)+"px",width:Math.floor(.9*window.innerWidth)+"px",left:"0"});$("#elk_lb_img").removeAttr("style");
h.hide();$(window).off("keydown.lb");$(window).off("touchmove.lb")})};0>=k.length&&(k=$('<div id="elk_lightbox"></div>'),l=$('<div id="elk_lb_content"></div>'),$("body").append(k.append(l)));d.each(function(){e[e.length]=$(this).data("lightboximage")});0===e.length&&(e[e.length]=a);n();k.fadeIn(200);q();v();k.on("click",function(a){a.target.id!==h.attr("id")&&(a.preventDefault(),m())});$(window).on("keydown.lb",function(a){a.preventDefault();27===a.keyCode&&m();37===a.keyCode&&(t(),r());39===a.keyCode&&
(u(),r())});$(window).on("resize.lb",function(){var a=$("#elk_lb_content");a.hasClass("expand")?a.css({height:.85*window.innerHeight,width:.9*window.innerWidth}):$("#elk_lb_img").css({"max-height":.9*window.innerHeight,"max-width":.8*window.innerWidth})});$(window).on("touchstart.lb",function(a){f=a.originalEvent.touches[0].clientX;g=a.originalEvent.touches[0].clientY});$(window).on("touchmove.lb",function(a){if(f&&g){var b=f-a.originalEvent.touches[0].clientX;Math.abs(b)>Math.abs(g-a.originalEvent.touches[0].clientY)&&
(0<b?t():u(),r());g=f=null}});return!1}
function expandThumb(a){var b=document.getElementById("thumb_"+a);a=document.getElementById("link_"+a);for(var c=a.nextSibling;c&&1!==c.nodeType;)c=c.nextSibling;for(var d=c.nextSibling;d&&1!==d.nodeType;)d=d.nextSibling;var e=b.src,f=b.style.height,g=b.style.width;b.src=a.href;b.style.width=a.style.width;b.style.height=a.style.height;c.className=c.className.includes("_exp")?"attachment_name":"attachment_name attachment_name_exp";d.className=d.className.includes("_exp")?"attachment_details":"attachment_details attachment_details_exp";
a.href=e;a.style.width=g;a.style.height=f;return!1}function ignore_toggles(a,b){for(var c=0;c<a.length;c++){var d=a[c];new elk_Toggle({bToggleEnabled:!0,bCurrentlyCollapsed:!0,aSwappableContainers:["msg_"+d+"_extra_info","msg_"+d,"msg_"+d+"_footer","msg_"+d+"_quick_mod","modify_button_"+d,"msg_"+d+"_signature"],aSwapLinks:[{sId:"msg_"+d+"_ignored_link",msgExpanded:"",msgCollapsed:b}]})}}
function sendtopicOverlayDiv(a,b,c){var d;c="string"===typeof c?c:"i-envelope";b="string"===typeof b?b:help_popup_heading_text;$.ajax({url:a,type:"GET",dataType:"html"}).done(function(a){a=$('<div id="temp_help">').html(a).find("#send_topic");var e="";a.find("h3").each(function(){e=$(this).text();$(this).remove()});a.find("form");var g=a.find("form").attr("action"),h=new smc_Popup({heading:""!==e?e:b,content:'<div class="centertext"><i class="icon icon-spin i-spinner"></i></div>',icon:c});d=$("#"+
h.popup_id).find(".popup_content");d.html(a.html());$(".popup_window").css({width:"640px"});sendtopicForm(d,g,h)}).fail(function(a,b,c){d.html(b)});return!1}function addRequiredElem(a,b,c){"undefined"===typeof c&&(c=!1);a.find('input[name="'+b+'"]').after($('<span class="requiredfield" />').text(required_field).fadeIn());a.find('input[name="'+b+'"]').keyup(function(){a.find("."+b+" .requiredfield").fadeOut(function(){$(this).remove()})});c||(a.find('input[name="'+b+'"]').focus(),c=!0)}
function sendtopicForm(a,b,c){"undefined"!==typeof this_body&&a.html(this_body);var d=$(a).find("form");"undefined"!==typeof send_comment&&(d.find('input[name="comment"]').val(send_comment),d.find('input[name="y_name"]').val(sender_name),d.find('input[name="y_email"]').val(sender_mail),d.find('input[name="r_name"]').val(recipient_name),d.find('input[name="r_email"]').val(recipient_mail));a.find('input[name="send"]').on("click",function(e){e.preventDefault();var f=d.serialize()+"&send=1";e=d.find('input[name="y_name"]').val();
var g=d.find('input[name="y_email"]').val,h=d.find('input[name="r_name"]').val(),k=d.find('input[name="r_email"]').val(),l=!1;""===e&&(addRequiredElem(d,"y_name",l),l=!0);""===g&&(addRequiredElem(d,"y_email",l),l=!0);""===h&&(addRequiredElem(d,"r_name",l),l=!0);""===k&&(addRequiredElem(d,"r_email",l),l=!0);l||$.ajax({type:"post",url:b+";api",data:f}).done(function(d){d=$(d).find("elk")[0];var e=null;0===d.getElementsByTagName("error").length?(e=d.getElementsByTagName("text")[0].firstChild.nodeValue.removeEntities(),
e+='<br /><br /><input type="submit" name="send" value="'+sendtopic_back+'" class="button_submit"/><input type="submit" name="cancel" value="'+sendtopic_close+'" class="button_submit"/>',a.html(e),a.find('input[name="cancel"]').each(function(){$(this).on("click",function(a){a.preventDefault();c.hide()})})):(0!==d.getElementsByTagName("text").length&&(e=d.getElementsByTagName("text")[0].firstChild.nodeValue.removeEntities(),e+='<br /><br /><input type="submit" name="send" value="'+sendtopic_back+'" class="button_submit"/><input type="submit" name="cancel" value="'+
sendtopic_close+'" class="button_submit"/>',a.html(e),a.find('input[name="send"]').each(function(){$(this).on("click",function(d){d.preventDefault();f=$(a).find("form").serialize()+"&send=1";sendtopicForm(a,b,c)})}),a.find('input[name="cancel"]').each(function(){$(this).on("click",function(a){a.preventDefault();c.hide()})})),0!==d.getElementsByTagName("url").length&&(d=d.getElementsByTagName("url")[0].firstChild.nodeValue,a.html(sendtopic_error.replace("{href}",d))))}).fail(function(){a.html(sendtopic_error.replace("{href}",
b))})})}function topicSplitselect(a,b){getXMLDocument(elk_prepareScriptUrl(elk_scripturl)+"action=splittopics;sa=selectTopics;subname="+topic_subject+";topic="+topic_id+"."+start[0]+";start2="+start[1]+";move="+a+";msg="+b+";xml",onTopicSplitReceived);return!1}
function onTopicSplitReceived(a){var b,c;for(b=0;2>b;b++){var d=a.getElementsByTagName("pageIndex")[b];document.getElementById("pageindex_"+d.getAttribute("section")).innerHTML=d.firstChild.nodeValue;start[b]=d.getAttribute("startFrom")}d=a.getElementsByTagName("change").length;for(b=0;b<d;b++){var e=a.getElementsByTagName("change")[b];var f=e.getAttribute("section");var g=e.getAttribute("curAction");var h=e.getAttribute("id");var k=document.getElementById("messages_"+f);if("remove"===g)k.removeChild(document.getElementById(f+
"_"+h));else{g=null;var l=k.getElementsByTagName("li");for(c=0;c<l.length;c++)parseInt(l[c].id.substr(f.length+1))<h&&(g=l[c].id,c=l.length+1);c=document.createElement("li");c.className="";c.id=f+"_"+h;c.innerHTML='<div class="content"><div class="message_header"><a class="split_icon float'+("selected"===f?"left":"right")+'" href="'+elk_prepareScriptUrl(elk_scripturl)+"action=splittopics;sa=selectTopics;subname="+topic_subject+";topic="+topic_id+"."+not_selected_start+";start2="+selected_start+";move="+
("selected"===f?"up":"down")+";msg="+h+'" onclick="return topicSplitselect(\''+("selected"===f?"up":"down")+"', "+h+');">'+("selected"===f?'<i class="icon icon-lg i-chevron-circle-left"></i>':'<i class="icon icon-lg i-chevron-circle-right"></i>')+"</a><strong>"+e.getElementsByTagName("subject")[0].firstChild.nodeValue+"</strong> "+txt_by+" <strong>"+e.getElementsByTagName("poster")[0].firstChild.nodeValue+"</strong><br /><em>"+e.getElementsByTagName("time")[0].firstChild.nodeValue+'</em></div><div class="post">'+
e.getElementsByTagName("body")[0].firstChild.nodeValue+"</div></div>";"string"===typeof g?k.insertBefore(c,document.getElementById(g)):k.appendChild(c)}}};function elk_mentions(a){this.last_call=0;this.names=[];this.cached_names=[];this.cached_queries=[];this.$atwho=this.mentions=null;this.opt=a;this.attachAtWho()}
elk_mentions.prototype.attachAtWho=function(){var a=this;a.$atwho=$(this.opt.selector);a.mentions=$('<div style="display:none" />');a.$atwho.after(this.mentions);a.$atwho.atwho({at:"@",limit:7,maxLen:25,displayTpl:"<li data-value='${atwho-at}${name}' data-id='${id}'>${name}</li>",callbacks:{filter:function(b,c,d){c=parseInt((new Date).getTime()/1E3);if(2>b.length)return[];if(0!==a.last_call&&a.last_call+1>c)return a.names;if("undefined"!==typeof a.cached_names[b])return a.cached_names[b];if(elk_formSubmitted)return[];
a.names=[];d={suggest_type:"member",search:b.php_urlencode(),time:c};d[elk_session_var]=elk_session_id;$.ajax({url:elk_scripturl+"?action=suggest;xml",data:d,type:"post",async:!1}).done(function(b){$(b).find("item").each(function(b,c){"undefined"===typeof a.names[a.names.length]&&(a.names[a.names.length]={});a.names[a.names.length-1].id=$(c).attr("id");a.names[a.names.length-1].name=$(c).text()})}).fail(function(a,b,c){"console"in window&&(window.console.info("Error:",b,c.name),window.console.info(a.responseText))});
a.last_call=c;a.cached_names[b]=a.names;a.cached_queries[a.cached_queries.length]=b;return a.names},beforeInsert:function(b,c){a.mentions.append($('<input type="hidden" name="uid[]" />').val(c.data("id")).attr("data-name",c.data("value")));return b},matcher:function(a,c,d){a=a.replace(/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");d&&(a="(?:^|\\s)"+a);return(a=(new RegExp(a+"([^ <>&\"'=\\\\\n]*)$|"+a+"([^\\x00-\\xff]*)$","gi")).exec(c.replace()))?a[2]||a[1]:null},highlighter:function(a,c){if(!c)return a;
c=(c+"").replace(RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&");var b=new RegExp(">\\s*(\\w*)("+c.replace("+","\\+")+")(\\w*)\\s*<","ig");return a.replace(b,function(a,b,c,d){return"> "+b+"<strong>"+c+"</strong>"+d+" <"})}}})};
