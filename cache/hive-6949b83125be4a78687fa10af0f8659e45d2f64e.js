// https://hydrogenaud.io/themes/default/elk_jquery_plugins.js script.js script_elk.js theme.js admin.js jquery.captcha.js

/*!
 * hoverIntent v1.9.0 // 2014.08.11 // jQuery v1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */
(function(e){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],e)}
else if(jQuery&&!jQuery.fn.hoverIntent){e(jQuery)}})(function(e){'use strict';var r={interval:100,sensitivity:6,timeout:0};var s=0,t,n,i=function(e){t=e.pageX;n=e.pageY},o=function(e,s,a,r){if(Math.sqrt((a.pX-t)*(a.pX-t)+(a.pY-n)*(a.pY-n))<r.sensitivity){s.off('mousemove.hoverIntent'+a.namespace,i);delete a.timeoutId;a.isActive=!0;delete a.pX;delete a.pY;return r.over.apply(s[0],[e])}
else{a.pX=t;a.pY=n;a.timeoutId=setTimeout(function(){o(e,s,a,r)},r.interval)}},a=function(e,t,n,i){delete t.data('hoverIntent')[n.id];return i.apply(t[0],[e])};e.fn.hoverIntent=function(t,n,l){var c=s++,d=e.extend({},r);if(e.isPlainObject(t)){d=e.extend(d,t)}
else if(e.isFunction(n)){d=e.extend(d,{over:t,out:n,selector:l})}
else{d=e.extend(d,{over:t,out:t,selector:n})};var u=function(t){var l=e.extend({},t);var s=e(this),r=s.data('hoverIntent');if(!r){s.data('hoverIntent',(r={}))};var n=r[c];if(!n){r[c]=n={id:c}};if(n.timeoutId){n.timeoutId=clearTimeout(n.timeoutId)};var u=n.namespace='.hoverIntent'+c;if(t.type==='mouseenter'){if(n.isActive){return};n.pX=l.pageX;n.pY=l.pageY;s.on('mousemove.hoverIntent'+u,i);n.timeoutId=setTimeout(function(){o(l,s,n,d)},d.interval)}
else{if(!n.isActive){return};s.off('mousemove.hoverIntent'+u,i);n.timeoutId=setTimeout(function(){a(l,s,n,d.out)},d.timeout)}};return this.on({'mouseenter.hoverIntent':u,'mouseleave.hoverIntent':u},d.selector)}});(function(e,t){'use strict';var n=(function(){var n={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',menuArrowClass:'sf-arrows'},v=(function(){e(window).on('load',function(){e('body').children().on('click.superfish',function(){e('.sf-js-enabled').superfish('hide','true')})})})(),a=(function(){var t=/^(?![\w\W]*Windows Phone)[\w\W]*(iPhone|iPad|iPod)/i.test(navigator.userAgent);if(t){e('html').css('cursor','pointer').on('click',e.noop)};return t})(),p=(function(){var e=document.documentElement.style;return('behavior' in e&&'fill' in e&&/iemobile/i.test(navigator.userAgent))})(),f=(function(){return(!!t.PointerEvent)})(),r=function(e,t,i){var o=n.menuClass,s;if(t.cssArrows){o+=' '+n.menuArrowClass};s=(i)?'addClass':'removeClass';e[s](o)},h=function(t,i){return t.find('li.'+i.pathClass).slice(0,i.pathLevels).addClass(i.hoverClass+' '+n.bcClass).filter(function(){return(e(this).children(i.popUpSelector).hide().show().length)}).removeClass(i.pathClass)},l=function(e,t){var i=(t)?'addClass':'removeClass';e.children('a')[i](n.anchorClass)},d=function(e){var n=e.css('ms-touch-action'),t=e.css('touch-action');t=t||n;t=(t==='pan-y')?'auto':'pan-y';e.css({'ms-touch-action':t,'touch-action':t})},c=function(e){return e.closest('.'+n.menuClass)},i=function(e){return c(e).data('sfOptions')},o=function(){var t=e(this),n=i(t);clearTimeout(n.sfTimer);t.siblings().superfish('hide').end().superfish('show')},u=function(t){t.retainPath=(e.inArray(this[0],t.$path)>-1);this.superfish('hide');if(!this.parents('.'+t.hoverClass).length){t.onIdle.call(c(this));if(t.$path.length){e.proxy(o,t.$path)()}}},s=function(){var n=e(this),t=i(n);if(a){e.proxy(u,n,t)()}
else{clearTimeout(t.sfTimer);t.sfTimer=setTimeout(e.proxy(u,n,t),t.delay)}},m=function(t){var n=e(this),a=i(n),s=n.siblings(t.data.popUpSelector);if(a.onHandleTouch.call(s)===!1){return this};if(s.length>0&&s.is(':hidden')){n.one('click.superfish',!1);if(t.type==='MSPointerDown'||t.type==='pointerdown'){n.trigger('focus')}
else{e.proxy(o,n.parent('li'))()}}},g=function(t,n){var r='li:has('+n.popUpSelector+')';if(e.fn.hoverIntent&&!n.disableHI){t.hoverIntent(o,s,r)}
else{t.on('mouseenter.superfish',r,o).on('mouseleave.superfish',r,s)};var i='MSPointerDown.superfish';if(f){i='pointerdown.superfish'};if(!a){i+=' touchend.superfish'};if(p){i+=' mousedown.superfish'};t.on('focusin.superfish','li',o).on('focusout.superfish','li',s).on(i,'a',n,m)};return{hide:function(t){if(this.length){var a=this,n=i(a);if(!n){return this};var r=(n.retainPath===!0)?n.$path:'',o=a.find('li.'+n.hoverClass).add(this).not(r).removeClass(n.hoverClass).children(n.popUpSelector),s=n.speedOut;if(t){o.show();s=0};n.retainPath=!1;if(n.onBeforeHide.call(o)===!1){return this};o.stop(!0,!0).animate(n.animationOut,s,function(){var t=e(this);n.onHide.call(t)})};return this},show:function(){var e=i(this);if(!e){return this};var n=this.addClass(e.hoverClass),t=n.children(e.popUpSelector);if(e.onBeforeShow.call(t)===!1){return this};t.stop(!0,!0).animate(e.animation,e.speed,function(){e.onShow.call(t)});return this},destroy:function(){return this.each(function(){var i=e(this),t=i.data('sfOptions'),o;if(!t){return!1};o=i.find(t.popUpSelector).parent('li');clearTimeout(t.sfTimer);r(i,t);l(o);d(i);i.off('.superfish').off('.hoverIntent');o.children(t.popUpSelector).attr('style',function(e,t){return t.replace(/display[^;]+;?/g,'')});t.$path.removeClass(t.hoverClass+' '+n.bcClass).addClass(t.pathClass);i.find('.'+t.hoverClass).removeClass(t.hoverClass);t.onDestroy.call(i);i.removeData('sfOptions')})},init:function(t){return this.each(function(){var o=e(this);if(o.data('sfOptions')){return!1};var i=e.extend({},e.fn.superfish.defaults,t),s=o.find(i.popUpSelector).parent('li');i.$path=h(o,i);o.data('sfOptions',i);r(o,i,!0);l(s,!0);d(o);g(o,i);s.not('.'+n.bcClass).superfish('hide',!0);i.onInit.call(this)})}}})();e.fn.superfish=function(t,i){if(n[t]){return n[t].apply(this,Array.prototype.slice.call(arguments,1))}
else if(typeof t==='object'||!t){return n.init.apply(this,arguments)}
else{return e.error('Method '+t+' does not exist on jQuery.fn.superfish')}};e.fn.superfish.defaults={popUpSelector:'ul,.sf-mega',hoverClass:'sfHover',pathClass:'overrideThisToUse',pathLevels:1,delay:800,animation:{opacity:'show'},animationOut:{opacity:'hide'},speed:'normal',speedOut:'fast',cssArrows:!0,disableHI:!1,onInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onIdle:e.noop,onDestroy:e.noop,onHandleTouch:e.noop}})(jQuery,window);
/*!
 * Superclick v1.0.0 - jQuery menu widget
 * Copyright (c) 2013 Joel Birch
 *
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */
(function(e,t){'use strict';var n=(function(){var n={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',menuArrowClass:'sf-arrows'},h=(function(){e(t).on('load',function(){e('body').children().on('click.superclick',function(){var t=e('.sf-js-enabled');t.superclick('reset')})})})(),o=function(e,t){var i=n.menuClass;if(t.cssArrows){i+=' '+n.menuArrowClass};e.toggleClass(i)},c=function(t,i){return t.find('li.'+i.pathClass).slice(0,i.pathLevels).addClass(i.activeClass+' '+n.bcClass).filter(function(){return(e(this).children(i.popUpSelector).hide().show().length)}).removeClass(i.pathClass)},s=function(e){e.children('a').toggleClass(n.anchorClass)},a=function(e){var n=e.css('ms-touch-action'),t=e.css('touch-action');t=t||n;t=(t==='pan-y')?'auto':'pan-y';e.css({'ms-touch-action':t,'touch-action':t})},u=function(t){var i=e(this),n=i.siblings(t.data.popUpSelector),o;if(n.length){var s=!n.is(':hidden');o=(n.is(':hidden'))?r:l;e.proxy(o,i.parent('li'))();return!!s}},p=function(t){var n=e(this),i=n.siblings(t.data.popUpSelector),o=t.currentTarget.href;if(i.length===1&&o){if(i.not(':hidden'))e.proxy(l,n.parent('li'))();window.location=o;return!1}},r=function(){var t=e(this),n=i(t);t.siblings().superclick('hide').end().superclick('show')},l=function(){var t=e(this),n=i(t);e.proxy(f,t,n)()},f=function(t){t.retainPath=(e.inArray(this[0],t.$path)>-1);this.superclick('hide');if(!this.parents('.'+t.activeClass).length){t.onIdle.call(d(this));if(t.$path.length){e.proxy(r,t.$path)()}}},d=function(e){return e.closest('.'+n.menuClass)},i=function(e){return d(e).data('sf-options')};return{hide:function(t){if(this.length){var a=this,n=i(a);if(!n){return this};var r=(n.retainPath===!0)?n.$path:'',o=a.find('li.'+n.activeClass).add(this).not(r).removeClass(n.activeClass).children(n.popUpSelector),s=n.speedOut;if(t){o.show();s=0};n.retainPath=!1;n.onBeforeHide.call(o);o.stop(!0,!0).animate(n.animationOut,s,function(){var t=e(this);n.onHide.call(t)})};return this},show:function(){var e=i(this);if(!e){return this};var n=this.addClass(e.activeClass),t=n.children(e.popUpSelector);e.onBeforeShow.call(t);t.stop(!0,!0).animate(e.animation,e.speed,function(){e.onShow.call(t)});return this},destroy:function(){return this.each(function(){var i=e(this),t=i.data('sf-options'),r;if(!t){return!1};r=i.find(t.popUpSelector).parent('li');o(i,t);s(r);a(i);i.off('.superclick');r.children(t.popUpSelector).attr('style',function(e,t){return t.replace(/display[^;]+;?/g,'')});t.$path.removeClass(t.activeClass+' '+n.bcClass).addClass(t.pathClass);i.find('.'+t.activeClass).removeClass(t.activeClass);t.onDestroy.call(i);i.removeData('sf-options')})},reset:function(){return this.each(function(){var t=e(this),n=i(t),o=e(t.find('.'+n.activeClass).toArray().reverse());o.children('a').trigger('click')})},init:function(t){return this.each(function(){var r=e(this);if(r.data('sf-options')){return!1};var i=e.extend({},e.fn.superclick.defaults,t),l=r.find(i.popUpSelector).parent('li');i.$path=c(r,i);r.data('sf-options',i);o(r,i);s(l);a(r);r.on('click.superclick','a',i,u);l.on('dblclick.superclick','a',i,p);l.not('.'+n.bcClass).superclick('hide',!0);i.onInit.call(this)})}}})();e.fn.superclick=function(t,i){if(n[t]){return n[t].apply(this,Array.prototype.slice.call(arguments,1))}
else if(typeof t==='object'||!t){return n.init.apply(this,arguments)}
else{return e.error('Method '+t+' does not exist on jQuery.fn.superclick')}};e.fn.superclick.defaults={popUpSelector:'ul,.sf-mega',activeClass:'sfHover',pathClass:'overrideThisToUse',pathLevels:1,animation:{opacity:'show'},animationOut:{opacity:'hide'},speed:'normal',speedOut:'fast',cssArrows:!0,onInit:e.noop,onBeforeShow:e.noop,onShow:e.noop,onBeforeHide:e.noop,onHide:e.noop,onIdle:e.noop,onDestroy:e.noop}})(jQuery,window);
/*!
 * @name      ElkArte news fader
 * @copyright ElkArte Forum contributors
 * @license   MIT http://www.opensource.org/licenses/mit-license.php
 */
;(function(e){e.fn.Elk_NewsFader=function(t){var n={'iFadeDelay':5000,'iFadeSpeed':1000},o=0,i=e(this).find('li');if(i.length>1){e.extend(n,t);i.hide();i.eq(0).fadeIn(n.iFadeSpeed);setInterval(function(){e(i[o]).fadeOut(n.iFadeSpeed,function(){o++;if(o==i.length)o=0;e(i[o]).fadeIn(n.iFadeSpeed)})},n.iFadeSpeed+n.iFadeDelay)};return this}})(jQuery);
/*!
 * @name      ElkArte Forum
 * @copyright ElkArte Forum contributors
 * @license   BSD http://opensource.org/licenses/BSD-3-Clause
 *
 * This file contains code covered by:
 * copyright:	2011 Simple Machines (http://www.simplemachines.org)
 * license:		BSD, See included LICENSE.TXT for terms and conditions.
 *
 * @version 1.1
 */
;var elk_formSubmitted=!1,lastKeepAliveCheck=new Date().getTime(),ajax_indicator_ele=null,ua=navigator.userAgent.toLowerCase(),is_opera=!!window.opera,is_ff=typeof InstallTrigger!=='undefined'||((ua.indexOf('iceweasel')!==-1||ua.indexOf('icecat')!==-1||ua.indexOf('shiretoko')!==-1||ua.indexOf('minefield')!==-1)&&!is_opera),is_safari=Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor')>0,is_chrome=!!window.chrome,is_ie=!!document.documentMode,is_webkit=ua.indexOf('applewebkit')!==-1;is_osx=navigator.platform.toUpperCase().indexOf('MAC')>=0,is_mobile=navigator.userAgent.indexOf('Mobi')!==-1,is_touch='ontouchstart' in window||window.DocumentTouch&&document instanceof DocumentTouch;if(!('getElementsByClassName' in document)){document.getElementsByClassName=function(e){return $('.'+e)}};function getXMLDocument(e,t){var n=new XMLHttpRequest(),i=typeof(t)!=='undefined',o=this;if(i){n.onreadystatechange=function(){if(n.readyState!==4)return;if(n.responseXML!==null&&n.status===200)t.call(o,n.responseXML);else t.call(o,!1)}};n.open('GET',e,i);n.send(null);return n};function sendXMLDocument(e,t,n){var i=new window.XMLHttpRequest(),o=this;if(typeof(n)!=='undefined'){i.onreadystatechange=function(){if(i.readyState!==4)return;if(i.responseXML!==null&&i.status===200)n.call(o,i.responseXML);else n.call(o,!1)}};i.open('POST',e,!0);if('setRequestHeader' in i)i.setRequestHeader('Content-Type','application/x-www-form-urlencoded');i.send(t);return!0};String.prototype.php_strtr=function(e,t){return this.replace(new RegExp('['+e+']','g'),function(n){return t.charAt(e.indexOf(n))})};String.prototype.php_strtolower=function(){return typeof(elk_iso_case_folding)==='boolean'&&elk_iso_case_folding===!0?this.php_strtr('ABCDEFGHIJKLMNOPQRSTUVWXYZ\x8a\x8c\x8e\x9f\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd7\xd8\xd9\xda\xdb\xdc\xdd\xde','abcdefghijklmnopqrstuvwxyz\x9a\x9c\x9e\xff\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf7\xf8\xf9\xfa\xfb\xfc\xfd\xfe'):this.php_strtr('ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')};String.prototype.php_urlencode=function(){return encodeURIComponent(this).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/%20/g,'+')};String.prototype.php_htmlspecialchars=function(){return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')};String.prototype.php_unhtmlspecialchars=function(){return this.replace(/&quot;/g,'"').replace(/&gt;/g,'>').replace(/&lt;/g,'<').replace(/&amp;/g,'&')};String.prototype.php_addslashes=function(){return this.replace(/\\/g,'\\\\').replace(/'/g,'\\\'')};String.prototype._replaceEntities=function(e,t,n){return String.fromCharCode(parseInt(n))};String.prototype.removeEntities=function(){return this.replace(/&(amp;)?#(\d+);/g,this._replaceEntities)};String.prototype.easyReplace=function(e){var n=this;for(var t in e){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');n=n.replace(new RegExp('%'+t+'%','g'),e[t])};return n};function php_str_repeat(e,t){if(t<1)return'';else return e+php_str_repeat(e,t-1)};function reqWin(e,t,n,i){if((t&&self.screen.availWidth*0.8<t)||(n&&self.screen.availHeight*0.8<n)){i=!1;t=Math.min(t,self.screen.availWidth*0.8);n=Math.min(n,self.screen.availHeight*0.8)}
else i=typeof(i)==='boolean'&&i===!0;window.open(e,'requested_popup','toolbar=no,location=no,status=no,menubar=no,scrollbars='+(i?'no':'yes')+',width='+(t?t:480)+',height='+(n?n:220)+',resizable=no');return!1};function reqOverlayDiv(e,t,n){var s='<div class="centertext"><i class="icon icon-spin icon-big i-spinner"></i></div>';n=typeof(n)==='string'?n:'i-help';t=typeof(t)==='string'?t:help_popup_heading_text;var o=new smc_Popup({heading:t,content:s,icon:n}),i=$('#'+o.popup_id).find('.popup_content');$.ajax({url:e,type:'GET',dataType:'html'}).done(function(e,t,n){var o=$('<div id="temp_help">').html(e).find('a[href$="self.close();"]').hide().prev('br').hide().parent().html();i.html(o)}).fail(function(e,t,n){i.html(t)});return!1};function smc_Popup(e){this.opt=e;this.popup_id=this.opt.custom_id?this.opt.custom_id:'elk_popup';this.show()};smc_Popup.prototype.show=function(){var t='popup_window '+(this.opt.custom_class?this.opt.custom_class:'content'),n=this.opt.icon?'<i class="icon '+this.opt.icon+' icon-top"></i> ':'';$('body').append('<div id="'+this.popup_id+'" class="popup_container"><div class="'+t+'" style="max-height: none;"><h3 class="popup_heading"><a href="javascript:void(0);" class="hide_popup icon i-close" title="Close"></a>'+n+this.opt.heading+'</h3><div class="popup_content">'+this.opt.content+'</div></div></div>');this.popup_body=$('#'+this.popup_id).children('.popup_window');this.popup_body.parent().fadeIn(300);this.popup_body.addClass('in');var e=this;$(document).mouseup(function(t){if($('#'+e.popup_id).has(t.target).length===0)e.hide()}).keyup(function(t){if(t.keyCode===27)e.hide()});$('#'+this.popup_id).find('.hide_popup').on('click',function(){return e.hide()});return!1};smc_Popup.prototype.hide=function(){$('#'+this.popup_id).fadeOut(300,function(){$(this).remove()});return!1};function replaceText(e,t){if('selectionStart' in t){var n=t.value.substr(0,t.selectionStart),o=t.value.substr(t.selectionEnd),s=t.scrollTop,i=0;t.value=n+e+o;if(t.setSelectionRange){t.focus();if(is_opera&&e.match(/\n/g)!==null)i=e.match(/\n/g).length;t.setSelectionRange(n.length+e.length+i,n.length+e.length+i)};t.scrollTop=s}
else{t.value+=e;t.focus(t.value.length-1)}};function isEmptyText(e){var t;if(typeof(e)==='string')t=e;else t=e.value;while(t.length>0&&(t.charAt(0)===' '||t.charAt(0)==='\t'))t=t.substring(1,t.length);while(t.length>0&&(t.charAt(t.length-1)===' '||t.charAt(t.length-1)==='\t'))t=t.substring(0,t.length-1);return t===''};function submitonce(e){elk_formSubmitted=!0};function submitThisOnce(e,t){var s='form' in e?e.form:e,i=s.getElementsByTagName('textarea');t=typeof t=='undefined'?!0:t;for(var n=0,o=i.length;n<o;n++)i[n].readOnly=t;window.setTimeout(function(){submitThisOnce(e,!1)},1000);return!elk_formSubmitted};function setInnerHTML(e,t){if(e)e.innerHTML=t};function getInnerHTML(e){if(e)return e.innerHTML};function setOuterHTML(e,t){if('outerHTML' in e)e.outerHTML=t;else{var n=document.createRange();n.setStartBefore(e);e.parentNode.replaceChild(n.createContextualFragment(t),e)}};function in_array(e,t){for(var n in t)if(t[n]==e)return!0;return!1};function array_search(e,t){for(var n in t)if(t[n]==e)return n;return null};function selectRadioByName(e,t){if(!('length' in e))return e.checked=!0;for(var n=0,i=e.length;n<i;n++)if(e[n].value===t)return e[n].checked=!0;return!1};function selectAllRadio(e,t,n,i){for(var o=0;o<t.length;o++)if(t[o].name!==undefined&&t[o].name.substr(0,n.length)==n&&t[o].value==i)t[o].checked=!0};function invertAll(e,t,n,i){for(var o=0;o<t.length;o++){if(!('name' in t[o])||(typeof(n)==='string'&&t[o].name.substr(0,n.length)!==n&&t[o].id.substr(0,n.length)!==n))continue;if(!t[o].disabled||(typeof(i)==='boolean'&&i))t[o].checked=e.checked}};function elk_sessionKeepAlive(){var e=new Date().getTime();if(elk_scripturl&&e-lastKeepAliveCheck>900000){var t=new Image();t.src=elk_prepareScriptUrl(elk_scripturl)+'action=keepalive;time='+e;lastKeepAliveCheck=e};window.setTimeout(function(){elk_sessionKeepAlive()},1200000)};window.setTimeout(function(){elk_sessionKeepAlive()},1200000);function elk_setThemeOption(e,t,n,i){if(i===null||typeof(i)==='undefined')i='';var o=new Image();o.src=elk_prepareScriptUrl(elk_scripturl)+'action=jsoption;var='+e+';val='+t+';'+elk_session_var+'='+elk_session_id+i+(n===null?'':'&th='+n)+';time='+(new Date().getTime())};function hashLoginPassword(e,t,n){if(typeof(hex_sha256)==='undefined')return;if(e.user.value.indexOf('@')!==-1)return;e.passwrd.autocomplete='off';e.hash_passwrd.value=hex_sha256(e.user.value.php_strtolower()+e.passwrd.value);if('old_hash_passwrd' in e&&typeof(hex_sha1)!=='undefined')e.old_hash_passwrd.value=hex_sha1(hex_sha1(e.user.value.php_strtolower()+e.passwrd.value)+t+(typeof n==='undefined'?'':n));e.passwrd.value=e.passwrd.value.replace(/./g,'*')};function hashAdminPassword(e,t,n,i){if(typeof(hex_sha256)==='undefined')return;e.admin_hash_pass.value=hex_sha256(t.php_strtolower()+e.admin_pass.value);e.admin_pass.value=e.admin_pass.value.replace(/./g,'*')};function hashModeratePassword(e,t,n,i){if(typeof(hex_sha256)==='undefined')return;e.moderate_hash_pass.value=hex_sha256(t.php_strtolower()+e.moderate_pass.value);e.moderate_pass.value=e.moderate_pass.value.replace(/./g,'*')};function expandPages(e,t,n,i,o){var a='',s=0,r=0,l=50;if((i-n)/o>l){r=i;i=n+l*o};for(s=n;s<i;s+=o)a+='<a class="navPages" href="'+t.replace(/%1\$d/,s).replace(/%%/g,'%')+'">'+(1+s/o)+'</a> ';if(r>0)a+='<span class="expand_pages" role="menuitem" onclick="expandPages(this, \''+t+'\', '+i+', '+r+', '+o+');"> ... </span> ';setOuterHTML(e,a)};function smc_preCacheImage(e){if(!('smc_aCachedImages' in window))window.smc_aCachedImages=[];if(!in_array(e,window.smc_aCachedImages)){var t=new Image();t.src=e}};function smc_Cookie(e){this.opt=e;this.oCookies={};this.init()};smc_Cookie.prototype.init=function(){if('cookie' in document&&document.cookie!==''){var n=document.cookie.split(';');for(var e=0,i=n.length;e<i;e++){var t=n[e].split('=');this.oCookies[t[0].replace(/^\s+|\s+$/g,'')]=decodeURIComponent(t[1])}}};smc_Cookie.prototype.get=function(e){return e in this.oCookies?this.oCookies[e]:null};smc_Cookie.prototype.set=function(e,t){document.cookie=e+'='+encodeURIComponent(t)};function elk_Toggle(e){this.opt=e;this.bCollapsed=!1;this.oCookie=null;this.init()};elk_Toggle.prototype.init=function(){var e=0,o=0;if('bToggleEnabled' in this.opt&&!this.opt.bToggleEnabled)return;if('oCookieOptions' in this.opt&&this.opt.oCookieOptions.bUseCookie){this.oCookie=new smc_Cookie({});var s=this.oCookie.get(this.opt.oCookieOptions.sCookieName);if(s!==null)this.opt.bCurrentlyCollapsed=s==='1'};if(this.opt.bCurrentlyCollapsed)this.changeState(!0,!0);if('aSwapImages' in this.opt){for(e=0,o=this.opt.aSwapImages.length;e<o;e++){var n=document.getElementById(this.opt.aSwapImages[e].sId);if(typeof(n)==='object'&&n!==null){if(getComputedStyle(n).getPropertyValue('display')==='none')n.style.display='inline';n.instanceRef=this;n.onclick=function(){this.instanceRef.toggle();this.blur()};n.style.cursor='pointer';smc_preCacheImage(this.opt.aSwapImages[e].srcCollapsed)}}}
else if('aSwapClasses' in this.opt){for(e=0,o=this.opt.aSwapClasses.length;e<o;e++){var t=document.getElementById(this.opt.aSwapClasses[e].sId);if(typeof(t)==='object'&&t!==null){if(getComputedStyle(t).getPropertyValue('display')==='none')t.style.display='block';t.instanceRef=this;t.onclick=function(){this.instanceRef.toggle();this.blur()};t.style.cursor='pointer'}}};if('aSwapLinks' in this.opt){for(e=0,o=this.opt.aSwapLinks.length;e<o;e++){var i=document.getElementById(this.opt.aSwapLinks[e].sId);if(typeof(i)==='object'&&i!==null){if(getComputedStyle(i).getPropertyValue('display')==='none')i.style.display='inline-block';i.instanceRef=this;i.onclick=function(){this.instanceRef.toggle();this.blur();return!1}}}}};elk_Toggle.prototype.changeState=function(e,t){var n=0,o=0,i;t=typeof(t)!=='undefined';if(!t&&e&&'funcOnBeforeCollapse' in this.opt){this.tmpMethod=this.opt.funcOnBeforeCollapse;this.tmpMethod();delete this.tmpMethod}
else if(!t&&!e&&'funcOnBeforeExpand' in this.opt){this.tmpMethod=this.opt.funcOnBeforeExpand;this.tmpMethod();delete this.tmpMethod};if('aSwapImages' in this.opt){for(n=0,o=this.opt.aSwapImages.length;n<o;n++){var s=document.getElementById(this.opt.aSwapImages[n].sId);if(typeof(s)==='object'&&s!==null){var l=e?this.opt.aSwapImages[n].srcCollapsed:this.opt.aSwapImages[n].srcExpanded;if(s.src!=l)s.src=l;s.alt=s.title=e?this.opt.aSwapImages[n].altCollapsed:this.opt.aSwapImages[n].altExpanded}}}
else if('aSwapClasses' in this.opt){for(n=0,o=this.opt.aSwapClasses.length;n<o;n++){i=document.getElementById(this.opt.aSwapClasses[n].sId);if(typeof(i)==='object'&&i!==null){var r=e?this.opt.aSwapClasses[n].classCollapsed:this.opt.aSwapClasses[n].classExpanded;if(i.className!==r)i.className=r;i.title=i.title=e?this.opt.aSwapClasses[n].titleCollapsed:this.opt.aSwapClasses[n].titleExpanded}}};if('aSwapLinks' in this.opt){for(n=0,o=this.opt.aSwapLinks.length;n<o;n++){var a=document.getElementById(this.opt.aSwapLinks[n].sId);if(typeof(a)==='object'&&a!==null)a.innerHTML=e?this.opt.aSwapLinks[n].msgCollapsed:this.opt.aSwapLinks[n].msgExpanded}};for(n=0,o=this.opt.aSwappableContainers.length;n<o;n++){if(this.opt.aSwappableContainers[n]===null)continue;i=document.getElementById(this.opt.aSwappableContainers[n]);if(typeof(i)==='object'&&i!==null){if(e)$(i).slideUp();else $(i).slideDown()}};this.bCollapsed=e;if('oCookieOptions' in this.opt&&this.opt.oCookieOptions.bUseCookie)this.oCookie.set(this.opt.oCookieOptions.sCookieName,this.bCollapsed?'1':'0');if(!t&&'oThemeOptions' in this.opt&&this.opt.oThemeOptions.bUseThemeSettings)elk_setThemeOption(this.opt.oThemeOptions.sOptionName,this.bCollapsed?'1':'0','sThemeId' in this.opt.oThemeOptions?this.opt.oThemeOptions.sThemeId:null,'sAdditionalVars' in this.opt.oThemeOptions?this.opt.oThemeOptions.sAdditionalVars:null)};elk_Toggle.prototype.toggle=function(){this.changeState(!this.bCollapsed)};function ajax_indicator(e){if(ajax_indicator_ele===null){ajax_indicator_ele=document.getElementById('ajax_in_progress');if(ajax_indicator_ele===null&&typeof(ajax_notification_text)!==null){create_ajax_indicator_ele()}};if(ajax_indicator_ele!==null){ajax_indicator_ele.style.display=e?'block':'none'}};function create_ajax_indicator_ele(){ajax_indicator_ele=document.createElement('div');ajax_indicator_ele.id='ajax_in_progress';var t=document.createElement('a');t.href='javascript:ajax_indicator(false)';var e=document.createElement('img');e.src=elk_images_url+'/icons/quick_remove.png';if(typeof(ajax_notification_cancel_text)!=='undefined'){e.alt=ajax_notification_cancel_text;e.title=ajax_notification_cancel_text};t.appendChild(e);ajax_indicator_ele.appendChild(t);ajax_indicator_ele.innerHTML+=ajax_notification_text;document.body.appendChild(ajax_indicator_ele)};function createEventListener(e){if(!('addEventListener' in e)){if(e.attachEvent){e.addEventListener=function(t,n,i){e.attachEvent('on'+t,n)};e.removeEventListener=function(t,n,i){e.detachEvent('on'+t,n)}}
else{e.addEventListener=function(t,n,i){e['on'+t]=n};e.removeEventListener=function(t,n,i){e['on'+t]=null}}}};function grabJumpToContent(){getXMLDocument(elk_prepareScriptUrl(elk_scripturl)+'action=xmlhttp;sa=jumpto;xml',onJumpReceived);return!1};function onJumpReceived(e){var o=[],t,i,n=e.getElementsByTagName('elk')[0].getElementsByTagName('item');for(t=0,i=n.length;t<i;t++){o[o.length]={id:parseInt(n[t].getAttribute('id')),isCategory:n[t].getAttribute('type')==='category',name:n[t].firstChild.nodeValue.removeEntities(),is_current:!1,childLevel:parseInt(n[t].getAttribute('childlevel'))}};for(t=0,i=aJumpTo.length;t<i;t++)aJumpTo[t].fillSelect(o)};var aJumpTo=[];function JumpTo(e){this.opt=e;this.dropdownList=null;this.showSelect();createEventListener(this.dropdownList);if(is_mobile&&is_touch)this.dropdownList.addEventListener('touchstart',grabJumpToContent);else this.dropdownList.addEventListener('mouseenter',grabJumpToContent)};JumpTo.prototype.removeAll=function(){for(var e=this.dropdownList.options.length;e>0;e--)this.dropdownList.remove(e-1)};JumpTo.prototype.showSelect=function(){var e='';for(var t=this.opt.iCurBoardChildLevel;t>0;t--)e+=this.opt.sBoardChildLevelIndicator;if(e!=='')e+=this.opt.sBoardPrefix;document.getElementById(this.opt.sContainerId).innerHTML=this.opt.sJumpToTemplate.replace(/%select_id%/,this.opt.sContainerId+'_select').replace(/%dropdown_list%/,'<select '+(this.opt.bDisabled===!0?'disabled="disabled" ':'')+(this.opt.sClassName!==undefined?'class="'+this.opt.sClassName+'" ':'')+'name="'+(this.opt.sCustomName!==undefined?this.opt.sCustomName:this.opt.sContainerId+'_select')+'" id="'+this.opt.sContainerId+'_select"><option value="'+(this.opt.bNoRedirect!==undefined&&this.opt.bNoRedirect===!0?this.opt.iCurBoardId:'?board='+this.opt.iCurBoardId+'.0')+'">'+e+this.opt.sCurBoardName.removeEntities()+'</option></select>&nbsp;'+(this.opt.sGoButtonLabel!==undefined?'<input type="button" class="button_submit" value="'+this.opt.sGoButtonLabel+'" onclick="window.location.href = \''+elk_prepareScriptUrl(elk_scripturl)+'board='+this.opt.iCurBoardId+'.0\';" />':''));this.dropdownList=document.getElementById(this.opt.sContainerId+'_select')};JumpTo.prototype.fillSelect=function(e){this.removeAll();if(is_mobile&&is_touch)this.dropdownList.removeEventListener('touchstart',grabJumpToContent);else this.dropdownList.removeEventListener('mouseenter',grabJumpToContent);var r=document.createDocumentFragment(),o=document.createElement('optgroup');for(var t=0,l=e.length;t<l;t++){var s,i='',n,a;if(e[t].isCategory){o=document.createElement('optgroup');o.label=e[t].name;r.appendChild(o);continue}
else{for(s=e[t].childLevel,i='';s>0;s--)i+=this.opt.sBoardChildLevelIndicator;if(i!=='')i+=this.opt.sBoardPrefix};n=document.createElement('option');a=document.createElement('span');a.innerHTML=i+e[t].name;if(e[t].id===this.opt.iCurBoardId)n.selected='selected';n.appendChild(a);if(!this.opt.bNoRedirect){n.value='?board='+e[t].id+'.0'}
else{n.value=e[t].id};o.appendChild(n)};this.dropdownList.appendChild(r);if(!this.opt.bNoRedirect)this.dropdownList.onchange=function(){if(this.selectedIndex>0&&this.options[this.selectedIndex].value)window.location.href=elk_scripturl+this.options[this.selectedIndex].value.substr(elk_scripturl.indexOf('?')===-1||this.options[this.selectedIndex].value.substr(0,1)!=='?'?0:1)};if('funcOnBeforeCollapse' in this.opt){this.tmpMethod=this.opt.funcOnBeforeCollapse;this.tmpMethod(this);delete this.tmpMethod}};var aIconLists=[];function IconList(e){this.opt=e;this.bListLoaded=!1;this.oContainerDiv=null;this.funcMousedownHandler=null;this.funcParent=this;this.iCurMessageId=0;this.iCurTimeout=0;if(!('sAction' in this.opt)||this.opt.sAction===null)this.opt.sAction='messageicons;board='+this.opt.iBoardId;this.initIcons()};IconList.prototype.initIcons=function(){for(var e=document.images.length-1,t=this.opt.sIconIdPrefix.length;e>=0;e--)if(document.images[e].id.substr(0,t)===this.opt.sIconIdPrefix)setOuterHTML(document.images[e],'<div title="'+this.opt.sLabelIconList+'" onclick="'+this.opt.sBackReference+'.openPopup(this, '+document.images[e].id.substr(t)+')" onmouseover="'+this.opt.sBackReference+'.onBoxHover(this, true)" onmouseout="'+this.opt.sBackReference+'.onBoxHover(this, false)" style="background: '+this.opt.sBoxBackground+'; cursor: pointer; padding: 2px; margin: 0 auto; vertical-align: top"><img src="'+document.images[e].src+'" alt="'+document.images[e].alt+'" id="'+document.images[e].id+'" style="vertical-align: top; margin: 0 auto; padding: 0 2px;" /></div>')};IconList.prototype.onBoxHover=function(e,t){e.style.border=t?this.opt.iBoxBorderWidthHover+'px solid '+this.opt.sBoxBorderColorHover:'';e.style.background=t?this.opt.sBoxBackgroundHover:this.opt.sBoxBackground;e.style.padding=t?(2-this.opt.iBoxBorderWidthHover)+'px':'2px'};IconList.prototype.openPopup=function(e,t){this.iCurMessageId=t;if(!this.bListLoaded&&this.oContainerDiv===null){this.oContainerDiv=document.createElement('div');this.oContainerDiv.id='iconList';this.oContainerDiv.style.display='none';this.oContainerDiv.style.cursor='pointer';this.oContainerDiv.style.position='absolute';this.oContainerDiv.style.background=this.opt.sContainerBackground;this.oContainerDiv.style.border=this.opt.sContainerBorder;this.oContainerDiv.style.padding='6px 0px';document.body.appendChild(this.oContainerDiv);ajax_indicator(!0);sendXMLDocument.call(this,elk_prepareScriptUrl(elk_scripturl)+'action=xmlhttp;sa='+this.opt.sAction+';xml','',this.onIconsReceived);createEventListener(document.body)};var n=elk_itemPos(e);this.oContainerDiv.style.top=(n[1]+e.offsetHeight)+'px';this.oContainerDiv.style.left=(n[0]-1)+'px';this.oClickedIcon=e;if(this.bListLoaded)this.oContainerDiv.style.display='block';document.body.addEventListener('mousedown',this.onWindowMouseDown,!1)};IconList.prototype.onIconsReceived=function(e){var n=e.getElementsByTagName('elk')[0].getElementsByTagName('icon'),i='';for(var t=0,o=n.length;t<o;t++)i+='<span onmouseover="'+this.opt.sBackReference+'.onItemHover(this, true)" onmouseout="'+this.opt.sBackReference+'.onItemHover(this, false);" onmousedown="'+this.opt.sBackReference+'.onItemMouseDown(this, \''+n[t].getAttribute('value')+'\');" style="padding: 2px 3px; line-height: 20px; border: '+this.opt.sItemBorder+'; background: '+this.opt.sItemBackground+'"><img src="'+n[t].getAttribute('url')+'" alt="'+n[t].getAttribute('name')+'" title="'+n[t].firstChild.nodeValue+'" style="vertical-align: middle" /></span>';this.oContainerDiv.innerHTML=i;this.oContainerDiv.style.display='block';this.bListLoaded=!0;if(is_ie)this.oContainerDiv.style.width=this.oContainerDiv.clientWidth+'px';ajax_indicator(!1)};IconList.prototype.onItemHover=function(e,t){e.style.background=t?this.opt.sItemBackgroundHover:this.opt.sItemBackground;e.style.border=t?this.opt.sItemBorderHover:this.opt.sItemBorder;if(this.iCurTimeout!==0)window.clearTimeout(this.iCurTimeout);if(t)this.onBoxHover(this.oClickedIcon,!0);else this.iCurTimeout=window.setTimeout(this.opt.sBackReference+'.collapseList();',500)};IconList.prototype.onItemMouseDown=function(e,t){if(this.iCurMessageId!==0){ajax_indicator(!0);this.tmpMethod=getXMLDocument;var i=this.tmpMethod(elk_prepareScriptUrl(elk_scripturl)+'action=jsmodify;topic='+this.opt.iTopicId+';msg='+this.iCurMessageId+';'+elk_session_var+'='+elk_session_id+';icon='+t+';xml');delete this.tmpMethod;ajax_indicator(!1);var n=i.responseXML.getElementsByTagName('elk')[0].getElementsByTagName('message')[0];if(n.getElementsByTagName('error').length===0){if((this.opt.bShowModify&&n.getElementsByTagName('modified').length!==0)&&(document.getElementById('modified_'+this.iCurMessageId)!==null))document.getElementById('modified_'+this.iCurMessageId).innerHTML=n.getElementsByTagName('modified')[0].childNodes[0].nodeValue;this.oClickedIcon.getElementsByTagName('img')[0].src=e.getElementsByTagName('img')[0].src}}
else{this.oClickedIcon.getElementsByTagName('img')[0].src=e.getElementsByTagName('img')[0].src;if('sLabelIconBox' in this.opt)document.getElementById(this.opt.sLabelIconBox).value=t}};IconList.prototype.onWindowMouseDown=function(){for(var e=aIconLists.length-1;e>=0;e--){aIconLists[e].funcParent.tmpMethod=aIconLists[e].collapseList;aIconLists[e].funcParent.tmpMethod();delete aIconLists[e].funcParent.tmpMethod}};IconList.prototype.collapseList=function(){this.onBoxHover(this.oClickedIcon,!1);this.oContainerDiv.style.display='none';this.iCurMessageId=0;document.body.removeEventListener('mousedown',this.onWindowMouseDown,!1)};function elk_itemPos(e){var t=0,n=0;if('offsetParent' in e){t=e.offsetLeft;n=e.offsetTop;while(e.offsetParent&&typeof(e.offsetParent)==='object'){e=e.offsetParent;t+=e.offsetLeft;n+=e.offsetTop}}
else if('x' in e){t=e.x;n=e.y};return[t,n]};function elk_prepareScriptUrl(e){return e.indexOf('?')===-1?e+'?':e+(e.charAt(e.length-1)==='?'||e.charAt(e.length-1)==='&'||e.charAt(e.length-1)===';'?'':';')};var aOnloadEvents=[];function addLoadEvent(e){if(typeof(e)==='function'&&(!('onload' in window)||typeof(window.onload)!=='function'))window.onload=e;else if(aOnloadEvents.length===0){aOnloadEvents[0]=window.onload;aOnloadEvents[1]=e;window.onload=function(){for(var e=0,t=aOnloadEvents.length;e<t;e++){if(typeof(aOnloadEvents[e])==='function')aOnloadEvents[e]();else if(typeof(aOnloadEvents[e])==='string')eval(aOnloadEvents[e])}}}
else aOnloadEvents[aOnloadEvents.length]=e};function elkSelectText(e,t){var n=null;if(typeof(t)==='boolean'&&t)n=document.getElementById(e);else n=e.parentNode.nextSibling;if(typeof(n)!=='object'||n===null)return!1;if('createTextRange' in document.body){var s=document.body.createTextRange();s.moveToElementText(n);s.select()}
else if(window.getSelection){var i=window.getSelection(),o=document.createRange();o.selectNodeContents(n);i.removeAllRanges();i.addRange(o)};return!1};function smc_saveEntities(e,t,n){var i=0,o=0;if(typeof(n)==='string'){for(i=0,o=document.forms[e].elements.length;i<o;i++){if(document.forms[e].elements[i].id.substr(0,n.length)===n){t[t.length]=document.forms[e].elements[i].name}}};for(i=0,o=t.length;i<o;i++){if(t[i]in document.forms[e]){if(typeof post_box_name!=='undefined'&&t[i]===post_box_name&&$editor_data[post_box_name]!==undefined){document.forms[e][t[i]].value=$editor_data[post_box_name].val().replace(/&#/g,'&#38;#');$editor_data[post_box_name].val(document.forms[e][t[i]].value)}
else{document.forms[e][t[i]].value=document.forms[e][t[i]].value.replace(/&#/g,'&#38;#')}}}};function pollOptions(){var e=document.getElementById('poll_expire');if(isEmptyText(e)||e.value===0){document.forms[form_name].poll_hide[2].disabled=!0;if(document.forms[form_name].poll_hide[2].checked)document.forms[form_name].poll_hide[1].checked=!0}
else document.forms[form_name].poll_hide[2].disabled=!1};function generateDays(e){e=typeof(e)!=='undefined'?e:'';var i=0,o=0,t=document.getElementById('day'+e),a=document.getElementById('year'+e),r=document.getElementById('month'+e),s=[31,28,31,30,31,30,31,31,30,31,30,31];s[1]=28;if(a.options[a.selectedIndex].value%4===0)s[1]=29;o=t.selectedIndex;while(t.options.length)t.options[0]=null;i=s[r.value-1];for(var n=1;n<=i;n++)t.options[t.length]=new Option(n,n);if(o<i)t.selectedIndex=o};function toggleLinked(e){e.board.disabled=!e.link_to_board.checked};function initSearch(){if(document.forms.searchform.search.value.indexOf('%u')!==-1)document.forms.searchform.search.value=decodeURI(document.forms.searchform.search.value)};function selectBoards(e,t,n){var s=!0,i=0;for(var o=0,a=document.forms.length;o<a;o++){if(document.forms[o].name==t){aForm=document.forms[o];break}};if(typeof aForm=='undefined')return;for(i=0;i<e.length;i++)s=s&&aForm[n+'['+e[i]+']'].checked;for(i=0;i<e.length;i++)aForm[n+'['+e[i]+']'].checked=!s};function expandCollapse(e,t,n){var i=$('#'+e);t=t||!1;n=n||300;if(t)$('#'+t).attr('src',elk_images_url+(i.is(':hidden')!==!0?'/selected.png':'/selected_open.png'));i.slideToggle(n)};function initHighlightSelection(e){$('#'+e+' [name="def_language"]').on('click',function(t){$('#'+e+' .standard_row').removeClass('highlight2');$(this).parent().parent().addClass('highlight2')})};function doAutoSubmit(e,t,n){var i=typeof(n)!=='undefined'?n:'autoSubmit';if(e===0)document.forms[i].submit();else if(e===-1)return;document.forms[i].cont.value=t+' ('+e+')';e--;setTimeout(function(){doAutoSubmit(e,t,i)},1000)};
/*!
 * @name      ElkArte Forum
 * @copyright ElkArte Forum contributors
 * @license   BSD http://opensource.org/licenses/BSD-3-Clause
 *
 * @version 1.1
 */
;function elk_codefix(){$('.bbc_code').each(function(){var e=$(this);if(e.get(0).scrollHeight>e.innerHeight()){e.css('height',e.height());e.css('max-height','none')}
else{e.css('resize','none')}})};function toggleButtonAJAX(e,t,n){$.ajax({type:'GET',url:e.href+';xml;api',context:document.body,beforeSend:ajax_indicator(!0)}).done(function(i){if(i==='')return;var o=$(i).find('elk')[0];if(o.getElementsByTagName('error').length===0){var a=o.getElementsByTagName('text'),r=o.getElementsByTagName('url'),l=o.getElementsByTagName('confirm');if(l.length===1)var s=l[0].firstChild.nodeValue.removeEntities();$('.'+e.className.replace(/(list|link)level\d/g,'').trim()).each(function(){if(a.length===1)$(this).html('<span>'+a[0].firstChild.nodeValue.removeEntities()+'</span>');if(r.length===1)$(this).attr('href',r[0].firstChild.nodeValue.removeEntities());if(typeof(s)!=='undefined')eval(t+'= \''+s.replace(/[\\']/g,'\\$&')+'\'')})}
else{if(o.getElementsByTagName('text').length!==0)alert(o.getElementsByTagName('text')[0].firstChild.nodeValue.removeEntities());if(o.getElementsByTagName('url').length!==0)window.location.href=o.getElementsByTagName('url')[0].firstChild.nodeValue};if(typeof(n)!=='undefined')n(e,i,o.getElementsByTagName('error'))}).fail(function(){}).always(function(){ajax_indicator(!1)});return!1};function toggleHeaderAJAX(e,t){ajax_indicator(!0);var n='<div class="board_row centertext">{body}</div>';$.ajax({type:'GET',url:e.href+';xml;api',context:document.body,beforeSend:ajax_indicator(!0)}).done(function(e){if(e==='')return;var i=$(e).find('elk')[0];if(i.getElementsByTagName('error').length===0){var o=i.getElementsByTagName('text'),s=i.getElementsByTagName('body');$('#'+t+' .pagesection').remove();$('#'+t+' .topic_listing').remove();$('#'+t+' .topic_sorting').remove();if(o.length===1)$('#'+t+' #unread_header').html(o[0].firstChild.nodeValue.removeEntities());if(s.length===1)$(n.replace('{body}',s[0].firstChild.nodeValue.removeEntities())).insertAfter('#unread_header')}}).fail(function(){}).always(function(){ajax_indicator(!1)})};function notifyButton(e){if(typeof(notification_topic_notice)!=='undefined'&&!confirm(notification_topic_notice))return!1;return toggleButtonAJAX(e,'notification_topic_notice',function(e,t,n){var i=0;if(n.length>0)return;if(e.href.indexOf('sa=on')!==-1)i=1;else i=0;$('input[name=\'notify\']').val(i)})};function notifyboardButton(e){if(typeof(notification_board_notice)!=='undefined'&&!confirm(notification_board_notice))return!1;toggleButtonAJAX(e,'notification_board_notice');return!1};function unwatchButton(e){toggleButtonAJAX(e);return!1};function markboardreadButton(e){if(!confirm(txt_mark_as_read_confirm)){return!1};toggleButtonAJAX(e);$('.new_posts').remove();return!1};function markallreadButton(e){if(!confirm(txt_mark_as_read_confirm)){return!1};toggleButtonAJAX(e);$('.new_posts').remove();$('.board_icon').each(function(){$(this).removeClass('i-board-new i-board-sub').addClass('i-board-off')});$('.board_new_posts').removeClass('board_new_posts');return!1};function markunreadButton(e){if(!confirm(txt_mark_as_read_confirm)){return!1};toggleHeaderAJAX(e,'main_content_section');return!1};var relative_time_refresh=0;function updateRelativeTime(){relative_time_refresh=3600000;$('time').each(function(){var e=new relativeTime($(this).data('timestamp')*1000,oRttime.referenceTime),t='';if(e.seconds()){$(this).text(oRttime.now);relative_time_refresh=Math.min(relative_time_refresh,10000)}
else if(e.minutes()){t=e.deltaTime>1?oRttime.minutes:oRttime.minute;$(this).text(t.replace('%s',e.deltaTime));relative_time_refresh=Math.min(relative_time_refresh,60000)}
else if(e.hours()){t=e.deltaTime>1?oRttime.hours:oRttime.hour;$(this).text(t.replace('%s',e.deltaTime));relative_time_refresh=Math.min(relative_time_refresh,3600000)}
else if(e.days()){t=e.deltaTime>1?oRttime.days:oRttime.day;$(this).text(t.replace('%s',e.deltaTime));relative_time_refresh=Math.min(relative_time_refresh,3600000)}
else if(e.weeks()){t=e.deltaTime>1?oRttime.weeks:oRttime.week;$(this).text(t.replace('%s',e.deltaTime));relative_time_refresh=Math.min(relative_time_refresh,3600000)}
else if(e.months()){t=e.deltaTime>1?oRttime.months:oRttime.month;$(this).text(t.replace('%s',e.deltaTime));relative_time_refresh=Math.min(relative_time_refresh,3600000)}
else if(e.years()){t=e.deltaTime>1?oRttime.years:oRttime.year;$(this).text(t.replace('%s',e.deltaTime));relative_time_refresh=Math.min(relative_time_refresh,3600000)}});oRttime.referenceTime+=relative_time_refresh;setTimeout(function(){updateRelativeTime()},relative_time_refresh)};function relativeTime(e,t){if(typeof t==='undefined'){this.dateTo=new Date()}
else if(parseInt(t)=='NaN'){var i=t.split(/\D/);this.dateTo=new Date(i[0],--i[1],i[2],i[3],i[4])}
else this.dateTo=new Date(t);if(parseInt(e)=='NaN'){var n=e.split(/\D/);this.dateFrom=new Date(n[0],--n[1],n[2],n[3],n[4])}
else this.dateFrom=new Date(e);this.time_text='';this.past_time=(this.dateTo-this.dateFrom)/1000;this.deltaTime=0};relativeTime.prototype.seconds=function(){if(this.past_time<60){this.deltaTime=this.past_time;return!0};return!1};relativeTime.prototype.minutes=function(){if(this.past_time>=60&&Math.round(this.past_time/60)<60){this.deltaTime=Math.round(this.past_time/60);return!0};return!1};relativeTime.prototype.hours=function(){if(Math.round(this.past_time/60)>=60&&Math.round(this.past_time/3600)<24){this.deltaTime=Math.round(this.past_time/3600);return!0};return!1};relativeTime.prototype.days=function(){if(Math.round(this.past_time/3600)>=24&&Math.round(this.past_time/(24*3600))<7){this.deltaTime=Math.round(this.past_time/(24*3600));return!0};return!1};relativeTime.prototype.weeks=function(){if(Math.round(this.past_time/(24*3600))>=7&&Math.round(this.past_time/(24*3600))<30){this.deltaTime=Math.round(this.past_time/(24*3600)/7);return!0};return!1};relativeTime.prototype.months=function(){if(Math.round(this.past_time/(24*3600))>=30&&Math.round(this.past_time/(30*24*3600))<12){this.deltaTime=Math.round(this.past_time/(30*24*3600));return!0};return!1};relativeTime.prototype.years=function(){if(Math.round(this.past_time/(30*24*3600))>=12){this.deltaTime=this.dateTo.getFullYear()-this.dateFrom.getFullYear();return!0};return!1};function revalidateMentions(e,t){var c,r,n,l,u=-1,p=/[ \.,;!\?'-\\\/="]/i;for(var i=0,m=all_elk_mentions.length;i<m;i++){if(all_elk_mentions[i].selector===t||all_elk_mentions[i].selector==='#'+t){if(all_elk_mentions[i].oOptions.isPlugin){var a=$editor_data[all_elk_mentions[i].selector];c=a.opts.mentionOptions.cache.names;r=a.opts.mentionOptions.cache.queries;n=a.getText().replace(/[\u00a0\r\n]/g,' ');l=$(a.opts.mentionOptions.cache.mentions)}
else{c=all_elk_mentions[i].oMention.cached_names;r=all_elk_mentions[i].oMention.cached_queries;n=document.forms[e][t].value.replace(/[\u00a0\r\n]/g,' ');l=$(all_elk_mentions[i].oMention.mentions)};n=' '+n+' ';$(l).find('input').each(function(e,t){var i=$(t).data('name'),o,s,a=n.indexOf(i);if(typeof(i)!=='undefined'){if(a===-1)$(t).remove();else{o=n.charAt(a+i.length);s=n.charAt(a-1);if(o!==''&&o.search(p)!==0)$(t).remove();else if(s!==''&&s.search(p)!==0)$(t).remove()}}});for(var d=0,h=r.length;d<h;d++){var s=c[r[d]];for(var o=0,f=s.length;o<f;o++){if(checkWordOccurrence(n,s[o].name)){u=n.indexOf(' @'+s[o].name);if(u!==-1&&n.charAt(u+2+s[o].name.length+1).search(p)===0)l.append($('<input type="hidden" name="uid[]" />').val(s[o].id))}}}}}};function checkWordOccurrence(e,t){return new RegExp('\\b'+t+'\\b','i').test(e)};var all_elk_mentions=[];function add_elk_mention(e,t){if(all_elk_mentions.hasOwnProperty(e))return;if(typeof t==='undefined')t={};t.selector=e;all_elk_mentions[all_elk_mentions.length]={selector:e,oOptions:t}}(function(e){'use strict';e.fn.elkSortable=function(t){e.fn.elkSortable.oDefaultsSettings={opacity:0.7,cursor:'move',axis:'y',scroll:!0,containment:'parent',delay:150,handle:'',href:'',tolerance:'intersect',setorder:'serialize',placeholder:'',preprocess:'',tag:'#table_grid_sortable',connect:'',sa:'',title:'',error:'',token:''};var n=e.extend({},e.fn.elkSortable.oDefaultsSettings,t||{});if(typeof n.infobar==='undefined'){n.infobar=new ElkInfoBar('sortable_bar',{error_class:'errorbox',success_class:'infobox'})};e('<div id=\'errorContainer\'><div/>').appendTo('body');e('#errorContainer').css({'display':'none'});e(n.tag).sortable({opacity:n.opacity,cursor:n.cursor,axis:n.axis,handle:n.handle,containment:n.containment,connectWith:n.connect,placeholder:n.placeholder,tolerance:n.tolerance,delay:n.delay,scroll:n.scroll,helper:function(t,i){var a=i.children(),s=i.clone(),o;s.children().each(function(){e(this).replaceWith(function(){return e('<span />',{html:e(this).html()})})});s.children().each(function(t){return e(this).width(a.eq(t).width()).css('display','inline-block')});e('body').append('<div id="clone" class="'+n.placeholder+'">'+s.html()+'</div>');o=e('#clone');o.hide();setTimeout(function(){o.appendTo(i.parent());o.show()},1);return o},update:function(t,i){var o='',a=i.item.attr('id'),s=[],r=i.item.parent().attr('id');if(n.preprocess!=='')window[n.preprocess]();if(n.setorder==='inorder'){e(n.tag).find('li').each(function(){var t=e(this).attr('id').split('_');s.push({name:t[0]+'[]',value:t[1]})});o=e.param(s)}
else{e(n.tag).each(function(){if(o==='')o+=e(this).sortable(n.setorder);else o+='&'+e(this).sortable(n.setorder)})};o+='&'+elk_session_var+'='+elk_session_id;o+='&order=reorder';o+='&moved='+a;o+='&received='+r;if(n.token!=='')o+='&'+n.token.token_var+'='+n.token.token_id;e.ajax({type:'POST',url:elk_scripturl+'?action=xmlhttp;sa='+n.sa+';xml',dataType:'xml',data:o}).fail(function(e,t,i){n.infobar.isError();n.infobar.changeText(t).showBar();if(n.href!=='')setTimeout(function(){window.location.href=elk_scripturl+n.href},1000)}).done(function(t,i,o){var s=e('#errorContent'),a=e('#errorContainer');if(e(t).find('error').length!==0){a.append('<p id="errorContent"></p>');s.html(e(t).find('error').text());s.dialog({autoOpen:!0,title:n.title,modal:!0,close:function(e,t){if(n.href!=='')window.location.href=elk_scripturl+n.href}})}
else if(e(t).find('elk').length!==0){n.infobar.isSuccess();n.infobar.changeText(e(t).find('elk > orders > order').text()).showBar()}
else{a.append('<p id="errorContent"></p>');s.html(n.error+' : '+i);s.dialog({autoOpen:!0,title:n.title,modal:!0})}}).always(function(t,i,o){if(e(t).find('elk > tokens > token').length!==0){n.token.token_id=e(t).find('tokens').find('[type="token"]').text();n.token.token_var=e(t).find('tokens').find('[type="token_var"]').text()}})}})}})(jQuery);function setBoardIds(){$('[id^=category_]').each(function(){var t=$(this).attr('id').split('category_'),e=$(this).find('ul');if(e.length===1){if($(e).find('li').length===0)$(e).append('<li id="cbp_'+t+',-1,-1"></li>');else $(e).find('li:not(:has(ul))').append('<ul class="nolist elk_droppings"></ul>')}
else $(e).find('li:not(:has(ul))').append('<ul class="nolist elk_droppings"></ul>');$(this).find('ul:parent').each(function(e,n){var o=$(this).parent('li').attr('id'),i=0;if(typeof(o)!=='undefined'){i=o.split(',');i=i[1]};$(this).find('li').each(function(e,n){var s=$(n).attr('id'),o=s.split(',');$(n).removeAttr('id');o='cbp_'+t[1]+','+o[1]+','+i;$(n).attr('id',o)})})})};(function(e){e.fn.expand_pages=function(){function t(n){var r=e(n.closest('.linavPages')),f=r.prev().clone(),m=f.find('a').clone(),l=n.clone(),i=n.data('perpage'),d=n.data('firstpage'),o=n.data('lastpage'),g=n.data('baseurl'),v=eval(n.data('baseurl')),c,s=0,u=0,h=10;if((o-d)/i>h){u=o;o=d+h*i};for(s=o;s>d;s-=i){var p=m.clone(),a=f.clone();p.attr('href',v.replace('%1$d',s-i)).text(s/i);a.find('a').each(function(){e(this).replaceWith(p[0])});r.after(a);if(typeof c==='undefined')c=a};r.remove();if(u>0){l.find('#expanded_pages_container').each(function(){e(this).remove()});l.on('click',function(n){var i=e(this);n.preventDefault();t(i);i.off('mouseenter focus')}).on('mouseenter focus',function(){hover_expand(e(this))}).data('perpage',i).data('firstpage',o).data('lastpage',u).data('baseurl',g);c.after(l)}};this.attr('tabindex',0).on('click',function(n){var i=e(this);n.preventDefault();t(i)})}})(jQuery);(function(e){'use strict';e.fn.SiteTooltip=function(t){e.fn.SiteTooltip.oDefaultsSettings={followMouse:1,hoverIntent:{sensitivity:10,interval:650,timeout:50},positionTop:12,positionLeft:12,tooltipID:'site_tooltip',tooltipTextID:'site_tooltipText',tooltipClass:'tooltip',tooltipSwapClass:'site_swaptip',tooltipContent:'html'};var n=e.extend({},e.fn.SiteTooltip.oDefaultsSettings,t||{});e(this).each(function(){var t=e('<span class="'+n.tooltipSwapClass+'">'+this.title+'</span>').hide();e(this).append(t).attr('title','')});var i=function(t){var s=0,a=0,r=e('#'+n.tooltipID);if(!t)t=window.event;if(t.pageX||t.pageY){s=t.pageX;a=t.pageY}
else if(t.clientX||t.clientY){s=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;a=t.clientY+document.body.scrollTop+document.documentElement.scrollTop};var i={x:s+n.positionLeft,y:a+n.positionTop,w:r.width(),h:r.height()};var o={x:e(window).scrollLeft(),y:e(window).scrollTop(),w:e(window).width()-24,h:e(window).height()-24};if((i.y+i.h>o.y+o.h)&&(i.x+i.w>o.x+o.w)){i.x=(i.x-i.w)-45;i.y=(i.y-i.h)-45}
else if((i.x+i.w)>(o.x+o.w)){i.x-=(((i.x+i.w)-(o.x+o.w))+24)}
else if(i.y+i.h>o.y+o.h){i.y-=(((i.y+i.h)-(o.y+o.h))+24)};r.css({'left':i.x+'px','top':i.y+'px'})},s=function(){e('#'+n.tooltipID+' #'+n.tooltipTextID).slideDown(150)},o=function(){var t=e('#'+n.tooltipID);t.fadeOut(175,function(){e(this).trigger('unload').remove()})};function a(t){return e('<span>').text(t).html()};return this.each(function(){if(e.fn.hoverIntent){e(this).hoverIntent({sensitivity:n.hoverIntent.sensitivity,interval:n.hoverIntent.interval,over:t,timeout:n.hoverIntent.timeout,out:a})}
else{e(this).hover(t,a)};function t(t){if(e(this).children('.'+n.tooltipSwapClass).text()){e('body').append('<div id="'+n.tooltipID+'" class="'+n.tooltipClass+'"><div id="'+n.tooltipTextID+'" class="hide"></div></div>');var o=e('#'+n.tooltipTextID);if(n.tooltipContent==='html')o.html(e(this).children('.'+n.tooltipSwapClass).html());else o.text(e(this).children('.'+n.tooltipSwapClass).text());s();i(t)};return!1};function a(e){o(this);return!1};if(n.followMouse){e(this).on('mousemove',function(e){i(e);return!1})};e(this).on('click',function(){o(this);return!0})})}})(jQuery);var error_txts={};function errorbox_handler(e){this.opt=e;this.oError_box=null;this.oErrorHandle=window;this.evaluate=!1;this.init()};errorbox_handler.prototype.init=function(){if(this.opt.check_id!==undefined)this.oChecks_on=$(document.getElementById(this.opt.check_id));else if(this.opt.selector!==undefined)this.oChecks_on=this.opt.selector;else if(this.opt.editor!==undefined){this.oChecks_on=eval(this.opt.editor);this.evaluate=!0};this.oErrorHandle.instanceRef=this;if(this.oError_box===null)this.oError_box=$(document.getElementById(this.opt.error_box_id));if(this.evaluate===!1){this.oChecks_on.attr('onblur',this.opt.self+'.checkErrors()');this.oChecks_on.attr('onkeyup',this.opt.self+'.checkErrors()')}
else{var e=this.opt.self;$(function(){var t=eval(e);$editor_data[t.opt.editor_id].addEvent(t.opt.editor_id,'keyup',function(){t.checkErrors()})})}};errorbox_handler.prototype.boxVal=function(){if(this.evaluate===!1)return this.oChecks_on.val();else return this.oChecks_on()};errorbox_handler.prototype.checkErrors=function(){var n=this.opt.error_checks.length;if(n!==0){for(var e=0;e<n;e++){var t=$(document.getElementById(this.opt.error_box_id+'_'+this.opt.error_checks[e].code));if(this.opt.error_checks[e].efunction(this.boxVal()))this.addError(t,this.opt.error_checks[e].code);else this.removeError(this.oError_box,t)};this.oError_box.attr('class','errorbox')};if(this.oError_box.find('li').length===0)this.oError_box.slideUp();else this.oError_box.slideDown()};errorbox_handler.prototype.addError=function(e,t){if(e.length===0){if($.trim(this.oError_box.children('#'+this.opt.error_box_id+'_list').html())==='')this.oError_box.append('<ul id=\''+this.opt.error_box_id+'_list\'></ul>');$(document.getElementById(this.opt.error_box_id+'_list')).append('<li style="display:none;" id=\''+this.opt.error_box_id+'_'+t+'\' class=\'error\'>'+error_txts[t]+'</li>');$(document.getElementById(this.opt.error_box_id+'_'+t)).slideDown()}};errorbox_handler.prototype.removeError=function(e,t){if(t.length!==0){t.slideUp(function(){t.remove();if(e.find('li').length===0)e.slideUp()})}};function addAnotherOption(e,t,n,i){t['type']=t.type||'text';t['class']=t['class']||'input_text';t['size']=t.size||'20';n['type']=n.type||'text';n['class']=n['class']||'input_text';n['size']=n.size||'20';i=i||'';var c=document.createElement('dt'),o=document.createElement('input');o.name=t.name;o.type=t.type;o.setAttribute('class',t['class']);o.size=t.size;c.appendChild(o);var d=document.createElement('dd');if(i==='')o=document.createElement('input');else o=document.createElement('select');o.name=n.name;o.type=n.type;o.size=n.size;o.setAttribute('class',n['class']);d.appendChild(o);if(i!==''){var s,l,r;for(l in i){r=i[l];s=document.createElement('option');s.name='option';s.value=r.id;s.innerHTML=r.name;o.appendChild(s)}};var a=document.getElementById(e);a.parentNode.insertBefore(c,a);a.parentNode.insertBefore(d,a)};function toggle_mlsearch_opt(){var e=$('#mlsearch_options');if(e.is(':visible'))return;e.fadeIn('fast');$('body').on('click',mlsearch_opt_hide);$('#mlsearch_options, #mlsearch_input').off('click',mlsearch_opt_hide).on('click',function(e){e.stopPropagation()})};function mlsearch_opt_hide(){$('body').off('click',mlsearch_opt_hide);$('#mlsearch_options').slideToggle('fast')};function loadAddNewPoll(e,t,n){if(typeof t==='undefined')return!0;var i=$('#post_header').closest('form'),o=$('#poll_main, #poll_options');if($(e).val()===poll_add){$(e).val(poll_remove);var a=$('#icon');if(a.val()==='xx')a.val('poll').change();i.attr('action',i.attr('action')+';poll');if($('#poll_main').length>0){o.find('input').each(function(){if($(this).data('required')==='required')$(this).attr('required','required')});o.toggle();return!1}}
else{var s=$('#icon');if(s.val()==='poll')s.val('xx').change();i.attr('action',i.attr('action').replace(';poll',''));o.hide().find('input').each(function(){if($(this).attr('required')==='required'){$(this).data('required','required');$(this).removeAttr('required')}});$(e).val(poll_add);return!1};$.ajax({url:elk_scripturl+'?action=poll;sa=interface;xml;board='+t,type:'GET',dataType:'html',beforeSend:ajax_indicator(!0)}).done(function(e,t,i){var s=0;for(var o=0,a=document.forms[n].elements.length;o<a;o++)s=Math.max(s,document.forms[n].elements[o].tabIndex);$('#post_header').after(e);$('#poll_main input, #poll_options input').each(function(){$(this).attr('tabindex',++s)});$('#poll_main legend, #poll_options legend').on('click',function(){$(this).siblings().slideToggle('fast');$(this).parent().toggleClass('collapsed')}).each(function(){if($(this).data('collapsed')){$(this).siblings().css({display:'none'});$(this).parent().toggleClass('collapsed')}})}).always(function(){ajax_indicator(!1)});return!1};function disableAutoComplete(){window.onload=function(){$('input[type=email], input[type=password], .input_text, .input_clear').attr('autocomplete','off');setTimeout(function(){$('input[type=password], .input_clear').val(' ').val('')},1)}}(function(){var e=(function(e){'use strict';e=(e)?e:{};var t=[],o=!0,n=0,s=function(e){if(typeof e.delay==='undefined'){o=!1;e.delay=15000};setTimeout(function(){i()},e.delay)},a=function(e){t.push(e)},r=function(e){for(var n=0;n<t.length;n++){t[n].send(e)}},i=function(){if(t.length===0)return;$.ajax({url:elk_scripturl+'?action=mentions;sa=fetch;api=json;lastsent='+n}).done(function(t){if(t!==''){r(t);n=t.timelast};setTimeout(function(){i()},e.delay)})};s(e);return{add:a}});if(typeof define!=='undefined'&&define.amd){define([],function(){return e})}
else if(typeof module!=='undefined'&&module.exports){module.exports=e}
else{this.ElkNotifications=e}})();var ElkNotifier=new ElkNotifications();(function(){var e=(function(e,t,n){'use strict';$.extend(n,{inlineSelector:'.inline_insert',data:'attachid',addAfter:'label'});var i=[],o=function(e){},s=function(e,o){var s;if(typeof n.trigger!=='undefined')s=n.trigger.clone();else{s=$('<a />');if(typeof n.triggerClass!=='undefined')s.addClass(n.triggerClass)};s.on('click',function(e){e.preventDefault();var n='[attach]'+o+'[/attach]';$editor_data[t].insertText(n,!1,!0)}).attr('id','inline_attach_'+o).data('attachid',o);e.after(s);i.push(s)},a=function(e){var n=[],t;for(t=0;t<i.length;t++){if(i[t].data('attachid')==e)break;n.push(i[t])};t++;for(;t<i.length;t++){n.push(i[t])};i=n;$('#inline_attach_'+e).remove()};o(n);return{addInterface:s,removeAttach:a}});if(typeof define!=='undefined'&&define.amd){define([],function(){return e})}
else if(typeof module!=='undefined'&&module.exports){module.exports=e}
else{this.ElkInlineAttachments=e}})();(function(){var e=(function(e,t){'use strict';t=$.extend({text:'',class:'ajax_infobar',hide_delay:4000,error_class:'error',success_class:'success'},t);var n=$('#'+e),i=null,r=function(e,t){clearTimeout(i);if(n.length===0){n=$('<div id="'+e+'" class="'+t.class+' hide" />');$('body').append(n);n.attr('id',e);n.addClass(t.class);n.text(t.text)}},l=function(e){clearTimeout(i);n.html(e);return this},o=function(e){n.addClass(e);return this},s=function(e){n.removeClass(e);return this},d=function(){clearTimeout(i);n.fadeIn();if(t.hide_delay!==0){i=setTimeout(function(){a()},t.hide_delay)};return this},c=function(){s(t.success_class);o(t.error_class)},u=function(){s(t.error_class);o(t.success_class)},a=function(){clearTimeout(i);n.slideUp();return this};r(e,t);return{changeText:l,addClass:o,removeClass:s,showBar:d,isError:c,isSuccess:u,hide:a}});if(typeof define!=='undefined'&&define.amd){define([],function(){return e})}
else if(typeof module!=='undefined'&&module.exports){module.exports=e}
else{this.ElkInfoBar=e}})();
/*!
 * @name      ElkArte Forum
 * @copyright ElkArte Forum contributors
 * @license   BSD http://opensource.org/licenses/BSD-3-Clause
 *
 * This file contains code covered by:
 * copyright:	2011 Simple Machines (http://www.simplemachines.org)
 * license:		BSD, See included LICENSE.TXT for terms and conditions.
 *
 * @version 1.1
 */
;$(function(){if(use_click_menu)$('#main_menu, ul.admin_menu, ul.sidebar_menu, ul.poster, ul.quickbuttons, #sort_by').superclick({speed:150,animation:{opacity:'show',height:'toggle'},speedOut:0,activeClass:'sfhover'});else $('#main_menu, ul.admin_menu, ul.sidebar_menu, ul.poster, ul.quickbuttons, #sort_by').superfish({delay:300,speed:175,hoverClass:'sfhover'});$('a[href=\'#top\']').on('click',function(e){e.preventDefault();$('html,body').animate({scrollTop:0},1200)});$('a[href=\'#bot\']').on('click',function(e){e.preventDefault();var t=$('#bot'),n=t.height();$('html,body').animate({scrollTop:t.offset().top+n-$(window).height()},1200)});if((!is_mobile&&!is_touch)||use_click_menu)$('.preview').SiteTooltip({hoverIntent:{sensitivity:10,interval:750,timeout:50}});$('a.bbc_link img.bbc_img').parent().css('border','0');if(typeof elk_codefix==='function')elk_codefix();$('.expand_pages').expand_pages();$(document).on('click','legend',function(){$(this).siblings().slideToggle('fast');$(this).parent().toggleClass('collapsed')});$('legend',function(){if($(this).data('collapsed'))$(this).click()});$('.spoilerheader').click(function(){$(this).next().children().slideToggle('fast')});$('[data-lightboximage]').on('click.elk_lb',function(e){e.preventDefault();expandThumbLB($(this).data('lightboximage'),$(this).data('lightboxmessage'))});$('img').each(function(){if($(this).hasClass('bbc_img resized')===!1)return!0;$(this).css({'cursor':'pointer'});$(this).on('click.elk_bbc',function(){var e=$(this);if($.isEmptyObject(e.data('bbc_img'))){e.data('bbc_img',{width:e.css('width'),height:e.css('height'),'max-width':e.css('max-width'),'max-height':e.css('max-height')});e.css({'width':e.css('width')==='auto'?null:'auto'});e.css({'height':e.css('height')==='auto'?null:'auto'});e.css({'max-height':'none'});e.css({'max-width':'100%'});e.wrap('<div style="overflow:auto;display:inline-block;"></div>')}
else{e.css({'width':e.data('bbc_img').width});e.css({'height':e.data('bbc_img').height});e.css({'max-width':e.data('bbc_img')['max-width']});e.css({'max-height':e.data('bbc_img')['max-height']});e.removeData('bbc_img');e.unwrap();e.css({'max-width':'100%'})}})});$('.hamburger_30').click(function(e){e.preventDefault();var t=$(this).data('id');$('#'+t).addClass('visible');$(this).addClass('visible')})});function elk_addButton(e,t,n){var r=document.getElementById(e),o=r.getElementsByTagName('span');if(o.length>0){var a=o[o.length-1];a.className=a.className.replace(/\s*last/,'position_holder')};var l=r.getElementsByTagName('ul')[0],i=document.createElement('li'),s=document.createAttribute('role');s.value='menuitem';i.setAttributeNode(s);if('sId' in n)i.id=n.sId;i.innerHTML='<a class="linklevel1" href="'+n.sUrl+'" '+('sCustom' in n?n.sCustom:'')+'><span class="last"'+('sId' in n?' id="'+n.sId+'_text"':'')+'>'+n.sText+'</span></a>';l.appendChild(i)};
/*!
 * @name      ElkArte Forum
 * @copyright ElkArte Forum contributors
 * @license   BSD http://opensource.org/licenses/BSD-3-Clause
 *
 * This file contains code covered by:
 * copyright:	2011 Simple Machines (http://www.simplemachines.org)
 * license:		BSD, See included LICENSE.TXT for terms and conditions.
 *
 * @version 1.1
 */
;function elk_AdminIndex(e){this.opt=e;this.announcements=[];this.current={};this.init_news=!1;this.init()};elk_AdminIndex.prototype.init=function(){window.adminIndexInstanceRef=this;var e=function(){window.adminIndexInstanceRef.loadAdminIndex()};addLoadEvent(e)};elk_AdminIndex.prototype.loadAdminIndex=function(){if(this.opt.bLoadVersions)this.showCurrentVersion();if(this.opt.bLoadUpdateNotification)this.checkUpdateAvailable()};elk_AdminIndex.prototype.setAnnouncement=function(e){var t=document.getElementById(this.opt.sAnnouncementContainerId),i=this.init_news?t.innerHTML:'',n='';n=this.opt.sAnnouncementMessageTemplate.replace('%href%',e.html_url).replace('%subject%',e.name).replace('%time%',e.published_at.replace(/[TZ]/g,' ')).replace('%message%',e.body).replace(/\n/g,'<br />').replace(/\r/g,'');t.innerHTML=i+this.opt.sAnnouncementTemplate.replace('%content%',n);this.init_news=!0};elk_AdminIndex.prototype.showCurrentVersion=function(){var s=document.getElementById(this.opt.slatestVersionContainerId),i=document.getElementById(this.opt.sinstalledVersionContainerId),t=i.innerHTML,e=this,n='???',o=new elk_ViewVersions();$.getJSON('https://api.github.com/repos/elkarte/Elkarte/releases',{format:'json'},function(a,r,l){var d={},c={};e.current=e.normalizeVersion(t);$.each(a,function(n,i){if(i.draft)return;var s=e.normalizeVersion(i.tag_name);if(!c.hasOwnProperty('major')||o.compareVersions(t,i.tag_name.replace('-','').substring(1))){if((i.prerelease&&e.current.prerelease)||(!i.prerelease)){c=s;d=i}};if(e.opt.bLoadAnnouncements)e.setAnnouncement(i)});n=d.name.replace(/elkarte/i,'').trim();s.innerHTML=n;if(o.compareVersions(t,n))i.innerHTML=e.opt.sVersionOutdatedTemplate.replace('%currentVersion%',t)})};elk_AdminIndex.prototype.compareVersion=function(e,t){if(e.major>t.major)return!0;else if(e.major<t.major)return!1;if(e.minor>t.minor)return!0;else if(e.minor<t.minor)return!1;if(e.micro>t.micro)return!0;else if(e.micro<t.micro)return!1;if(e.prerelease){if(e.nano>t.nano)return!0;else if(e.nano<t.nano)return!1};return!1};elk_AdminIndex.prototype.normalizeVersion=function(e){var n=e.split(/[\s-]/),i={major:0,minor:0,micro:0,prerelease:!1,status:0,nano:0},s=!1,r={'dev':0,'alpha':1,'beta':2,'rc':3,'stable':4};for(var t=0;t<n.length;t++){if(n[t].toLowerCase()==='elkarte')continue;if(n[t].substring(0,3).toLowerCase()==='dev'||n[t].substring(0,5).toLowerCase()==='alpha'||n[t].substring(0,4).toLowerCase()==='beta'||n[t].substring(0,2).toLowerCase()==='rc'){i.prerelease=!0;s=!0;if(n[t].indexOf('.')>0){var a=n[t].split('.');i.nano=parseFloat(a[1]);i.nano=parseFloat(n[t].substr(n[t].indexOf('.')+1));i.status=r[n[t].substr(0,n[t].indexOf('.')).toLowerCase()]}};if(s){if(n[t].replace(/[\d\.]/g,'')==='')i.nano=parseFloat(n[t]);continue};if(n[t].substring(0,1)==='v')n[t]=n[t].substring(1);if(n[t].replace(/[\d\.]/g,'')===''){var o=n[t].split('.');i.major=parseInt(o[0]);i.minor=parseInt(o[1]);i.micro=o.length>2?parseInt(o[2]):0}};return i};elk_AdminIndex.prototype.checkUpdateAvailable=function(){if(!('ourUpdatePackage' in window))return;var e=document.getElementById(this.opt.sUpdateNotificationContainerId),t='ourUpdateTitle' in window?window.ourUpdateTitle:this.opt.sUpdateNotificationDefaultTitle,n='ourUpdateNotice' in window?window.ourUpdateNotice:this.opt.sUpdateNotificationDefaultMessage;e.innerHTML=this.opt.sUpdateNotificationTemplate.replace('%title%',t).replace('%message%',n);document.getElementById('update-link').href=this.opt.sUpdateNotificationLink.replace('%package%',window.ourUpdatePackage);if('elkUpdateCritical' in window){document.getElementById('update_title').style.backgroundColor='#dd2222';document.getElementById('update_title').style.color='white';document.getElementById('update_message').style.backgroundColor='#eebbbb';document.getElementById('update_message').style.color='black'}};function elk_ViewVersions(e){this.opt=e;this.oSwaps={};this.init()};elk_ViewVersions.prototype.init=function(){window.viewVersionsInstanceRef=this;var e=function(){window.viewVersionsInstanceRef.loadViewVersions()};addLoadEvent(e)};elk_ViewVersions.prototype.loadViewVersions=function(){this.determineVersions()};elk_ViewVersions.prototype.swapOption=function(e,t){this.oSwaps[t]=!(t in this.oSwaps)||!this.oSwaps[t];if(this.oSwaps[t])$('#'+t).show(300);else $('#'+t).hide(300);e.blur();return!1};elk_ViewVersions.prototype.compareVersions=function(e,t){var o=[],i=[],a=[e,t],r={'dev':0,'alpha':1,'beta':2,'rc':3};for(var n=0;n<2;n++){var s=a[n].toLowerCase().replace(/ /g,'').replace(/release candidate/g,'rc');i=s.match(/(\d+)(?:\.(\d+|))?(?:\.)?(\d+|)(?:(alpha|beta|rc)\.*(\d+|)(?:\.)?(\d+|))?(?:(dev))?(\d+|)/);if(i===null)return!1;o[n]=[i[1]>0?parseInt(i[1]):0,i[2]>0?parseInt(i[2]):0,i[3]>0?parseInt(i[3]):0,typeof(i[4])==='undefined'?'stable':r[i[4]],i[5]>0?parseInt(i[5]):0,i[6]>0?parseInt(i[6]):0,typeof(i[7])!=='undefined'?'dev':'']};for(n=0;n<7;n++){if(o[0][n]!==o[1][n]){if(n===3)return o[0][n]<o[1][n]?!o[1][6]:o[0][6];else if(n===6)return o[0][6]?o[1][3]==='stable':!1;else return o[0][n]<o[1][n]}};return!1};elk_ViewVersions.prototype.determineVersions=function(){var r={sources:'??',admin:'??',controllers:'??',database:'??',subs:'??','default':'??',Languages:'??',Templates:'??'};var a={sources:'??',admin:'??',controllers:'??',database:'??',subs:'??','default':'??',Languages:'??',Templates:'??'};var s={sources:!1,admin:!1,controllers:!1,database:!1,subs:!1,'default':!1,Languages:!1,Templates:!1};var n=['sources','admin','controllers','database','subs','default','Languages','Templates'],o='',i,c,l;for(var e=0,u=n.length;e<u;e++){c=document.getElementById(n[e]);if(typeof(c)==='object'&&c!==null)c.style.display='none';l=document.getElementById(n[e]+'-link');if(typeof(l)==='object'&&l!==null){l.instanceRef=this;l.sSection=n[e];l.onclick=function(){this.instanceRef.swapOption(this,this.sSection);return!1}}};if(!('ourVersions' in window))window.ourVersions={};for(var t in window.ourVersions){if(!window.ourVersions.hasOwnProperty(t))continue;if(!document.getElementById('our'+t))continue;o='';i=document.getElementById('your'+t).innerHTML;for(var d in s){if(!s.hasOwnProperty(d)){continue};if(t.substr(0,d.length)===d){o=d;break}};if(o==='')continue;if(typeof(o)!=='undefined'){if((this.compareVersions(r[o],i)||r[o]==='??')&&!s[o])r[o]=i;if(this.compareVersions(a[o],ourVersions[t])||a[o]==='??')a[o]=ourVersions[t];if(this.compareVersions(i,ourVersions[t])){s[o]=i;document.getElementById('your'+t).style.color='red'}}
else if(this.compareVersions(i,ourVersions[t]))s[o]=i;document.getElementById('our'+t).innerHTML=ourVersions[t];document.getElementById('your'+t).innerHTML=i};if(!('ourLanguageVersions' in window))window.ourLanguageVersions={};for(t in window.ourLanguageVersions){for(e=0;e<this.opt.aKnownLanguages.length;e++){if(!document.getElementById('our'+t+this.opt.aKnownLanguages[e]))continue;document.getElementById('our'+t+this.opt.aKnownLanguages[e]).innerHTML=ourLanguageVersions[t];i=document.getElementById('your'+t+this.opt.aKnownLanguages[e]).innerHTML;document.getElementById('your'+t+this.opt.aKnownLanguages[e]).innerHTML=i;if((this.compareVersions(r.Languages,i)||r.Languages==='??')&&!s.Languages)r.Languages=i;if(this.compareVersions(a.Languages,ourLanguageVersions[t])||a.Languages==='??')a.Languages=ourLanguageVersions[t];if(this.compareVersions(i,ourLanguageVersions[t])){s.Languages=i;document.getElementById('your'+t+this.opt.aKnownLanguages[e]).style.color='red'}}};for(e=0,u=n.length;e<u;e++){if(n[e]==='Templates')continue;document.getElementById('your'+n[e]).innerHTML=s[n[e]]?s[n[e]]:r[n[e]];document.getElementById('our'+n[e]).innerHTML=a[n[e]];if(s[n[e]])document.getElementById('your'+n[e]).style.color='red'};if(document.getElementById('Templates')){document.getElementById('yourTemplates').innerHTML=s.Templates?s.Templates:r.Templates;document.getElementById('ourTemplates').innerHTML=a.Templates;if(s.Templates)document.getElementById('yourTemplates').style.color='red'}};function addNewWord(){setOuterHTML(document.getElementById('moreCensoredWords'),'<div class="censorWords"><input type="text" name="censor_vulgar[]" size="30" class="input_text" /> <i class="icon i-chevron-circle-right"></i> <input type="text" name="censor_proper[]" size="30" class="input_text" /></div><div id="moreCensoredWords"></div>')};function toggleBBCDisabled(e,t){var i=document.getElementById(e).getElementsByTagName('*');for(var n=0;n<i.length;n++){if(typeof(i[n].name)==='undefined'||(i[n].name.substr((e.length+1),(i[n].name.length-2-(e.length+1)))!=='enabledTags')||(i[n].name.indexOf(e)!==0))continue;i[n].disabled=t};document.getElementById('bbc_'+e+'_select_all').disabled=t};function updateInputBoxes(){var e=document.getElementById('field_type').value,o=document.getElementById('private').value,s=['text','textarea','email','url','color','date'],a=['text','email','url','color','date'],r=['select'],n=(a.indexOf(e)!==-1),t=(s.indexOf(e)!==-1),i=(r.indexOf(e)!==-1);document.getElementById('max_length_dt').style.display=t?'':'none';document.getElementById('max_length_dd').style.display=t?'':'none';document.getElementById('dimension_dt').style.display=e==='textarea'?'':'none';document.getElementById('dimension_dd').style.display=e==='textarea'?'':'none';document.getElementById('bbc_dt').style.display=t?'':'none';document.getElementById('bbc_dd').style.display=t?'':'none';document.getElementById('defaultval_dt').style.display=t?'':'none';document.getElementById('defaultval_dd').style.display=t?'':'none';document.getElementById('options_dt').style.display=e==='select'||e==='radio'?'':'none';document.getElementById('options_dd').style.display=e==='select'||e==='radio'?'':'none';document.getElementById('default_dt').style.display=e==='check'?'':'none';document.getElementById('default_dd').style.display=e==='check'?'':'none';document.getElementById('mask_dt').style.display=n?'':'none';document.getElementById('mask').style.display=n?'':'none';document.getElementById('can_search_dt').style.display=t||i?'':'none';document.getElementById('can_search_dd').style.display=t||i?'':'none';if(!t&&!i)document.getElementById('can_search_dd').checked=!1;document.getElementById('regex_div').style.display=n&&document.getElementById('mask').value==='regex'?'':'none';document.getElementById('display').disabled=!1;if(e==='textarea'||o>=2){document.getElementById('display').checked=!1;document.getElementById('display').disabled=!0}};function addOption(){setOuterHTML(document.getElementById('addopt'),'<br /><input type="radio" name="default_select" value="'+startOptID+'" id="'+startOptID+'" /><input type="text" name="select_option['+startOptID+']" value="" class="input_text" /><span id="addopt"></span>');startOptID++};function addAnotherQuestion(){var e=document.getElementById('add_more_question_placeholder');setOuterHTML(e,add_question_template.easyReplace({question_last_blank:question_last_blank,setup_verification_add_more_answers:txt_add_another_answer}));question_last_blank++};function addAnotherAnswer(e,t){setOuterHTML(e,add_answer_template.easyReplace({question_last_blank:t,setup_verification_add_more_answers:txt_add_another_answer}))};function addAnotherSearch(e,t,n){var s=document.getElementById('add_more_searches'),r=document.createElement('dt'),i=document.createElement('input'),o=document.createElement('label'),a=document.createElement('dd');i.name='engine_name[]';i.type='text';i.className='input_text';i.size='50';i.setAttribute('class','verification_question');o.textContent=e+': ';o.appendChild(i);r.appendChild(o);i=document.createElement('input');i.name='engine_url[]';i.type='text';i.className='input_text';i.size='35';i.setAttribute('class','input_text verification_answer');o=document.createElement('label');o.textContent=t+': ';o.appendChild(i);a.appendChild(o);a.appendChild(document.createElement('br'));i=document.createElement('input');i.name='engine_separator[]';i.type='text';i.className='input_text';i.size='5';i.setAttribute('class','input_text verification_answer');o=document.createElement('label');o.textContent=n+': ';o.appendChild(i);a.appendChild(o);s.parentNode.insertBefore(r,s);s.parentNode.insertBefore(a,s)};function addAnotherNews(){var t=$('#list_news_lists_last'),e=t.clone();last_preview++;e.attr('id','list_news_lists_'+last_preview);e.find('textarea').attr('id','data_'+last_preview);e.find('#preview_last').attr('id','preview_'+last_preview);e.find('#box_preview_last').attr('id','box_preview_'+last_preview);t.before(e);e.toggle();make_preview_btn(last_preview)};function make_preview_btn(e){var t=$('#preview_'+e);t.text(txt_preview).on('click',function(){$.ajax({type:'POST',url:elk_scripturl+'?action=xmlpreview;xml',data:{item:'newspreview',news:$('#data_'+e).val()},context:document.body}).done(function(t){if($(t).find('error').text()==='')$(document).find('#box_preview_'+e).html($(t).text());else $(document).find('#box_preview_'+e).text(txt_news_error_no_news)})});if(!t.parent().hasClass('linkbutton_right'))t.wrap('<a class="linkbutton_right" href="javascript:void(0);"></a>')};function changeVariant(e){document.getElementById('variant_preview').src=oThumbnails[e]};function setPreviewTimeout(){if(previewTimeout){window.clearTimeout(previewTimeout);previewTimeout=null};previewTimeout=window.setTimeout(function(){refreshPreview(!0);previewTimeout=null},500)};function toggleDuration(e){$('#fixed_area').slideToggle(300);$('#flexible_area').slideToggle(300)};function calculateNewValues(){var t=0;for(var e=1;e<=7;e++){t+=parseInt(document.getElementById('weight'+e+'_val').value)};document.getElementById('weighttotal').innerHTML=t;for(e=1;e<=7;e++){document.getElementById('weight'+e).innerHTML=(Math.round(1000*parseInt(document.getElementById('weight'+e+'_val').value)/t)/10)+'%'}};function switchType(){document.getElementById('ul_settings').style.display=document.getElementById('method-existing').checked?'none':'block';document.getElementById('ex_settings').style.display=document.getElementById('method-upload').checked?'none':'block'};function swapUploads(){document.getElementById('uploadMore').style.display=document.getElementById('uploadSmiley').disabled?'none':'block';document.getElementById('uploadSmiley').disabled=!document.getElementById('uploadSmiley').disabled};function selectMethod(e){document.getElementById('method-existing').checked=e!=='upload';document.getElementById('method-upload').checked=e==='upload'};function updatePreview(){var e=document.getElementById('preview');e.src=elk_smiley_url+'/'+document.forms.smileyForm.set.value+'/'+document.forms.smileyForm.smiley_filename.value};function swap_database_changes(){db_vis=!db_vis;database_changes_area.style.display=db_vis?'':'none';return!1};function testFTP(){ajax_indicator(!0);var n={0:'ftp_server',1:'ftp_port',2:'ftp_username',3:'ftp_password',4:'ftp_path'};var t='';for(var e=0;e<5;e++)t=t+(t.length===0?'':'&')+n[e]+'='+document.getElementById(n[e]).value.php_urlencode();sendXMLDocument(elk_prepareScriptUrl(elk_scripturl)+'action=admin;area=packages;sa=ftptest;xml;'+elk_session_var+'='+elk_session_id,t,testFTPResults)};function generateFTPTest(){if(generatedButton)return!1;generatedButton=!0;if(!document.getElementById('test_ftp_placeholder')&&!document.getElementById('test_ftp_placeholder_full'))return!1;var e=document.createElement('input');e.type='button';e.className='submit';e.onclick=testFTP;if(document.getElementById('test_ftp_placeholder')){e.value=package_ftp_test;document.getElementById('test_ftp_placeholder').appendChild(e)}
else{e.value=package_ftp_test_connection;document.getElementById('test_ftp_placeholder_full').appendChild(e)};return!0};function testFTPResults(e){ajax_indicator(!1);var n=!1,i=package_ftp_test_failed,t=e.getElementsByTagName('results')[0].getElementsByTagName('result');if(t.length>0){if(parseInt(t[0].getAttribute('success'))===1)n=!0;i=t[0].firstChild.nodeValue};document.getElementById('ftp_error_div').style.display='';document.getElementById('ftp_error_div').className=n?'successbox':'errorbox';document.getElementById('ftp_error_message').innerHTML=i};function expandFolder(e,t){var i=document.getElementsByTagName('tr'),o=!1;for(var n=0;n<i.length;n++){if(i[n].id.indexOf('content_'+e+':-:')===0){i[n].style.display=i[n].style.display==='none'?'':'none';o=!0}};if(o){return!1};ajax_indicator(!0);getXMLDocument(elk_prepareScriptUrl(elk_scripturl)+'action=admin;area=packages;onlyfind='+t.php_urlencode()+';sa=perms;xml;'+elk_session_var+'='+elk_session_id,onNewFolderReceived);return!1};function dynamicExpandFolder(){expandFolder(this.ident,this.path);return!1};function select_in_category(e,t){for(var n in t){if(!t.hasOwnProperty(n))continue;document.getElementById(e+'_brd'+t[n]).checked=!0}};$(function(){$('#cache_accelerator').change(function(){$('#cache_accelerator').find('option').each(function(){$('[id^='+$(this).val()+'_]').hide()});$('[id^='+$(this).val()+'_]').show()}).change()});function toggleCache(){var e=$('#cache_memcached').parent(),t=$('#cachedir').parent(),n=$('#cache_uid').parent(),i=$('#cache_password').parent(),o=$('#cache_password_confirm').parent();if(cache_type.value.substr(0,8)!=='memcache'){e.slideUp();e.prev().slideUp(100)}
else{e.slideDown();e.prev().slideDown(100)};if(cache_type.value==='filebased'){t.slideDown();t.prev().slideDown(100)}
else{t.slideUp(100);t.prev().slideUp(100)};if(cache_type.value==='xcache'){n.slideDown(100);n.prev().slideDown(100);i.slideDown(100);i.prev().slideDown(100);o.slideDown(100);o.prev().slideDown(100)}
else{n.slideUp(100);n.prev().slideUp(100);i.slideUp(100);i.prev().slideUp(100);o.slideUp(100);o.prev().slideUp(100)}};function hideGlobalCookies(){var e=document.getElementById('localCookies').checked,t=!e&&document.getElementById('globalCookies').checked;if(!e){$('#setting_globalCookies').parent().slideDown();$('#globalCookies').parent().slideDown()}
else{$('#setting_globalCookies').parent().slideUp();$('#globalCookies').parent().slideUp()};if(t){$('#setting_globalCookiesDomain').closest('dt').slideDown();$('#globalCookiesDomain').closest('dd').slideDown()}
else{$('#setting_globalCookiesDomain').closest('dt').slideUp();$('#globalCookiesDomain').closest('dd').slideUp()}};function toggleSubDir(){var n=document.getElementById('automanage_attachments'),e=document.getElementById('use_subdirectories_for_attachments'),t=document.getElementById('basedirectory_for_attachments');e.disabled=!Boolean(n.selectedIndex);if(e.disabled){$(e).slideUp();$('#setting_use_subdirectories_for_attachments').parent().slideUp();$(t).slideUp();$('#setting_basedirectory_for_attachments').parent().slideUp()}
else{$(e).slideDown();$('#setting_use_subdirectories_for_attachments').parent().slideDown();$(t).slideDown();$('#setting_basedirectory_for_attachments').parent().slideDown()};toggleBaseDir()};function toggleBaseDir(){var t=document.getElementById('automanage_attachments'),n=document.getElementById('use_subdirectories_for_attachments'),e=document.getElementById('basedirectory_for_attachments');if(t.selectedIndex===0)e.disabled=1;else e.disabled=!n.checked};function swapMembers(){var t=document.getElementById('membersForm');$('#membersPanel').slideToggle(300);membersSwap=!membersSwap;document.getElementById('membersIcon').src=elk_images_url+(membersSwap?'/selected_open.png':'/selected.png');document.getElementById('membersText').innerHTML=membersSwap?maintain_members_choose:maintain_members_all;for(var e=0;e<t.length;e++){if(t.elements[e].type.toLowerCase()==='checkbox')t.elements[e].checked=!membersSwap};return!1};function checkAttributeValidity(){origText=reattribute_confirm;valid=!0;if(!document.getElementById('to').value)valid=!1;warningMessage=origText.replace(/%member_to%/,document.getElementById('to').value);if(document.getElementById('type_email').checked){if(!document.getElementById('from_email').value)valid=!1;warningMessage=warningMessage.replace(/%type%/,'',reattribute_confirm_email).replace(/%find%/,document.getElementById('from_email').value)}
else{if(!document.getElementById('from_name').value)valid=!1;warningMessage=warningMessage.replace(/%type%/,'',reattribute_confirm_username).replace(/%find%/,document.getElementById('from_name').value)};document.getElementById('do_attribute').disabled=!valid;setTimeout(function(){checkAttributeValidity()},500);return valid};function transferAttachOptions(){var e=document.getElementById('auto'),n=parseInt(e.options[e.selectedIndex].value,10),t=document.getElementById('to'),i=parseInt(t.options[t.selectedIndex].value,10);t.disabled=n!==0;e.disabled=i!==0};function confirmMoveTopics(e){var t=document.getElementById('id_board_from'),n=document.getElementById('id_board_to');if(t.options[t.selectedIndex].disabled||t.options[n.selectedIndex].disabled)return!1;return confirm(e.replace(/%board_from%/,t.options[t.selectedIndex].text.replace(/^\u2003+\u27A4/,'')).replace(/%board_to%/,n.options[n.selectedIndex].text.replace(/^\u2003+\u27A4/,'')))};function showhideSearchMethod(){var t=document.getElementById('search_index_sphinxql').checked,n=document.getElementById('search_index_sphinx').checked,i=t||n,e=$('#search_method');if(i)e.slideUp();else e.slideDown()};function showhideJqueryOptions(){var n=document.getElementById('jquery_default').checked,i=document.getElementById('jqueryui_default').checked,e=$('#jquery_version'),t=$('#jqueryui_version');if(n===!1){e.parent().slideUp();e.parent().prev().slideUp()}
else{e.parent().slideDown();e.parent().prev().slideDown()};if(i===!1){t.parent().slideUp();t.parent().prev().slideUp()}
else{t.parent().slideDown();t.parent().prev().slideDown()}};function swapPostGroup(e){var t=document.getElementById('min_posts_text'),n=document.getElementById('group_desc_text'),i=document.getElementById('group_hidden_text'),o=document.getElementById('group_moderators_text');document.forms.groupForm.min_posts.disabled=!e;t.style.color=e?'':'#888';document.forms.groupForm.group_desc_input.disabled=e;n.style.color=!e?'':'#888';document.forms.groupForm.group_hidden_input.disabled=e;i.style.color=!e?'':'#888';document.forms.groupForm.group_moderators.disabled=e;o.style.color=!e?'':'#888';if(typeof(oModeratorSuggest)!=='undefined')oModeratorSuggest.oTextHandle.disabled=!!e};function ajax_getTemplatePreview(){$.ajax({type:'POST',url:elk_scripturl+'?action=xmlpreview;xml',data:{item:'warning_preview',title:$('#template_title').val(),body:$('#template_body').val(),user:$('input[name="u"]').attr('value')},context:document.body}).done(function(e){$('#box_preview').css({display:'block'});$('#template_preview').html($(e).find('body').text());var t=$('#errors');if($(e).find('error').text()!==''){t.css({display:'block'});var n='',i=$(e).find('error').each(function(){n+=$(this).text()+'<br />'});$(document).find('#error_list').html(n);$('html, body').animate({scrollTop:t.offset().top},'slow')}
else{t.css({display:'none'});$('#error_list').html('');$('html, body').animate({scrollTop:$('#box_preview').offset().top},'slow')};return!1});return!1};function initEditProfileBoards(){$('.edit_all_board_profiles').on('click',function(e){e.preventDefault();$('.edit_board').off('click.elkarte')});$('.edit_board').show().on('click.elkarte',function(e){var t=$(this),i=t.data('boardid'),o=t.data('boardprofile'),s=$('#edit_board_'+i),n=$('<select />').attr('name','boardprofile['+i+']').change(function(){$(this).find('option:selected').each(function(){if($(this).attr('value')==o)t.addClass('nochanges').removeClass('changed');else t.addClass('changed').removeClass('nochanges')})});e.preventDefault();$(permission_profiles).each(function(e,t){var i=$('<option />').attr('value',t.id).text(t.name);if(t.id==o)i.attr('selected','selected');n.append(i)});s.replaceWith(n);n.change();$('.edit_all_board_profiles').replaceWith($('<input type="submit" class="right_submit" />').attr('name','save_changes').attr('value',txt_save));t.off('click.elkarte').on('click',function(e){e.preventDefault();if($(this).hasClass('changed'))$('input[name="save_changes"]').off('click')})})};function initEditPermissionProfiles(){var e=!1;$('.rename_profile').each(function(){var t=$(this);t.after($('<a class="js-ed edit_board" />').attr('href','#').on('click',function(n){n.preventDefault();if(!e){var i;e=!0;i=$('<a class="js-ed-rm linkbutton" />').on('click',function(t){t.preventDefault();$('.js-ed').show();$('.js-ed-rm').remove();e=!1;$('#rename').val(txt_permissions_profile_rename)}).text(ajax_notification_cancel_text).attr('href','#')};t.after($('<input type="text" class="js-ed-rm input_text" />').attr('name','rename_profile['+t.data('pid')+']').val(t.text()));$('#rename').addClass('js-ed').val(txt_permissions_commit).before(i);t.addClass('js-ed').hide();$('#delete').addClass('js-ed').hide();$('.perm_profile_delete').addClass('js-ed').hide();$(this).hide()}))})};function initDeleteThemes(){$('.delete_theme').on('click',function(e){e.preventDefault();var i=$(this).data('theme_id'),t=$(this).attr('href'),o=new RegExp(elk_session_var+'='+elk_session_id+';(.*)$'),n=o.exec(t)[1].split('='),s=n[1],a=n[0];if(confirm(txt_theme_remove_confirm)){$.ajax({type:'GET',url:t+';api;xml',beforeSend:ajax_indicator(!0)}).done(function(e){if($(e).find('error').length===0){var n=$(e).find('token').text(),o=$(e).find('token_var').text();$('.theme_'+i).slideToggle('slow',function(){$(this).remove()});$('.delete_theme').each(function(){$(this).attr('href',$(this).attr('href').replace(a+'='+s,o+'='+n))})}
else{alert($(e).find('text').text());window.location=t}}).fail(function(e){window.location=t}).always(function(){ajax_indicator(!1)})}})};function navigatePreview(e){var t=new XMLHttpRequest();t.onreadystatechange=function(){if(t.readyState!==4)return;if(t.responseText!==null&&t.status===200){previewData=t.responseText;document.getElementById('css_preview_box').style.display='block';var e=new Image();e.src=elk_prepareScriptUrl(elk_scripturl)+'action=admin;area=theme;sa=edit;theme='+theme_id+';preview;'+(new Date().getTime());refreshPreviewCache=null;refreshPreview(!1)}};var n='';if(e.indexOf('#')!==-1){n=e.substr(e.indexOf('#'));e=e.substr(0,e.indexOf('#'))};t.open('GET',e+(e.indexOf('?')===-1?'?':';')+'theme='+theme_id+n,!0);t.send(null)};function refreshPreview(e){var i=document.forms.stylesheetForm.entire_file.value==refreshPreviewCache;if(e&&i)return;refreshPreviewCache=document.forms.stylesheetForm.entire_file.value;refreshPreviewCache=refreshPreviewCache.replace(/url\(\.\.\/images/gi,'url('+elk_images_url);if(i){try{if(is_ie){var a=frames['css_preview_box'].document.styleSheets;for(var n=0;n<a.length;n++){if(a[n].id==='css_preview_box')a[n].cssText=document.forms.stylesheetForm.entire_file.value}}
else{frames['css_preview_box'].document.getElementById('css_preview_sheet').innerHTML=document.forms.stylesheetForm.entire_file.value}}catch(l){i=!1}};if(!i){var o=previewData,s=document.forms.stylesheetForm.entire_file.value,r=new RegExp('<link rel="stylesheet"[^>]+href="[^"]+'+editFilename+'[^>]*>'),t;s=s.replace(/url\(\.\.\/images/gi,'url('+elk_images_url);o=o.replace(r,'<style type="text/css" id="css_preview_sheet">'+s+'</style>');t=document.getElementById('css_preview_box');t.contentWindow.document.open();t.contentWindow.document.write(o);t.contentWindow.document.close();t.onload=function(){var t=frames['css_preview_box'].document.getElementsByTagName('a');for(var e=0;e<t.length;e++){if(t[e].onclick)continue;t[e].onclick=function(){window.parent.navigatePreview(this.href);return!1}}}}};function onUpdateName(e){document.getElementById('user_check').checked=!0;return!0};function confirmBan(e){if(e.ban_name.value===''){alert(txt_ban_name_empty);return!1};if(e.partial_ban.checked&&!(e.cannot_post.checked||e.cannot_register.checked||e.cannot_login.checked)){alert(txt_ban_restriction_empty);return!1};return!0};var fUpdateStatus=function(){document.getElementById('expire_date').disabled=!document.getElementById('expires_one_day').checked;document.getElementById('cannot_post').disabled=document.getElementById('full_ban').checked;document.getElementById('cannot_register').disabled=document.getElementById('full_ban').checked;document.getElementById('cannot_login').disabled=document.getElementById('full_ban').checked};function toggleCurrencyOther(){var t=document.getElementById('paid_currency').value==='other',e=document.getElementById('custom_currency_code_div_dd');if(t){document.getElementById('custom_currency_code_div').style.display='';document.getElementById('custom_currency_symbol_div').style.display='';if(e){document.getElementById('custom_currency_code_div_dd').style.display='';document.getElementById('custom_currency_symbol_div_dd').style.display=''}}
else{document.getElementById('custom_currency_code_div').style.display='none';document.getElementById('custom_currency_symbol_div').style.display='none';if(e){document.getElementById('custom_currency_symbol_div_dd').style.display='none';document.getElementById('custom_currency_code_div_dd').style.display='none'}}};function ajax_getEmailTemplatePreview(){$.ajax({type:'POST',url:elk_scripturl+'?action=xmlpreview;xml',data:{item:'bounce_preview',title:$('#template_title').val(),body:$('#template_body').val()},context:document.body}).done(function(e){$('#preview_section').css({display:'block'});$('#preview_body').html($(e).find('body').text());$('#preview_subject').html($(e).find('subject').text());if($(e).find('error').text()!==''){var t='',n=$('#errors'),i;i=$(e).find('error').each(function(){t+=$(this).text()+'<br />'});$(document).find('#error_list').html(t);n.css({display:''});n.attr('class',parseInt($(e).find('errors').attr('serious'))===0?'warningbox':'errorbox')}
else{$('#errors').css({display:'none'});$('#error_list').html('')};$('html, body').animate({scrollTop:$('#preview_section').offset().top},'slow');return!1});return!1};function ajax_getCensorPreview(){$.ajax({type:'POST',dataType:'json',url:elk_scripturl+'?action=admin;area=postsettings;sa=censor;xml',data:{censortest:$('#censortest').val()}}).done(function(e){if(e.result===!0){$('#censor_result').css({display:'block'}).html(e.censor);$('#token').attr({name:e.token_val,value:e.token});$('#censortest').attr({value:''}).val('')}});return!1};$(function(){var e=$('#mention').find('input[id^=\'notifications\'][id$=\'[notification]\']');e.change(function(){var e=$(this).closest('dl'),t=$(this).parent();if(this.checked){e.find('dt:not(:first-child)').fadeIn();e.find('dd:not(:nth-child(2))').each(function(){$(this).fadeIn();$(this).find('input').prop('disabled',!1)})}
else{e.find('dt:not(:first-child)').hide();e.find('dd:not(:nth-child(2))').each(function(){$(this).hide();$(this).find('input').prop('disabled',!0)})};t.show();t.prev().show()});e.change()});$(function(){$('#clean_hives').on('click',function(){var e=new ElkInfoBar('bar_clean_hives');$.ajax({type:'POST',dataType:'json',url:elk_scripturl+'?action=admin;area=featuresettings;sa=basic;xml;api=json',data:{cleanhives:!0}}).done(function(t){e.changeText(t.response);if(t.success===!0){e.isSuccess()}
else{e.isError()}}).fail(function(t){e.isError();e.changeText(txt_invalid_response)}).always(function(t){e.showBar()});return!1})});$(function(){if($('#core_features').length===0){return};$('.core_features_hide').css('display','none');$('.core_features_img').show().css({'cursor':'pointer'}).each(function(){var e=$(this).hasClass('on')?feature_on_text:feature_off_text;$(this).attr({title:e,alt:e})});$('#core_features_submit').css('display','none');if(!token_name)token_name=$('#core_features_token').attr('name');if(!token_value)token_value=$('#core_features_token').attr('value');$('.core_features_img').click(function(){var o=$(this),t=$(this).attr('id').substring(7),s=new Array(elk_images_url+'/admin/switch_off.png',elk_images_url+'/admin/switch_on.png'),i=!$('#feature_'+t).attr('checked'),e=new ElkInfoBar('core_features_bar',{error_class:'errorbox',success_class:'successbox'}),n;$('#feature_'+t).attr('checked',i);n={save:'save',feature_id:t};n[$('#core_features_session').attr('name')]=$('#core_features_session').val();n[token_name]=token_value;$('.core_features_status_box').each(function(){n[$(this).attr('name')]=!$(this).attr('checked')?0:1});$.ajax({url:elk_scripturl+'?action=xmlhttp;sa=corefeatures;xml',type:'post',data:n}).done(function(n){if($(n).find('errors').find('error').length!==0){e.isError();e.changeText($(n).find('errors').find('error').text()).showBar()}
else if($(n).find('elk').length!==0){$('#feature_link_'+t).html($(n).find('corefeatures').find('corefeature').text());o.attr({'src':s[i?1:0],'title':i?feature_on_text:feature_off_text,'alt':i?feature_on_text:feature_off_text});$('#feature_link_'+t).fadeOut().fadeIn();e.isSuccess();var a=$(n).find('messages').find('message').text();e.changeText(a).showBar();token_name=$(n).find('tokens').find('[type="token"]').text();token_value=$(n).find('tokens').find('[type="token_var"]').text()}
else{e.isError();e.changeText(core_settings_generic_error).showBar()}}).fail(function(t){e.changeText(t).showBar()})})});(function(e){e.fn.Elk_Captcha=function(t){var n={'letterCount':5,'uniqueID':'','imageURL':'','useLibrary':!1,'refreshevent':'click','playevent':'click','admin':!1};e.extend(n,t);return this.each(function(){$this=e(this);if($this.data('type')=='sound'){$this.on(n.playevent,function(e){e.preventDefault();popupFailed=reqWin(n.imageURL+';sound',400,300);if(!popupFailed){if(is_ie&&e.cancelBubble)e.cancelBubble=!0;else if(e.stopPropagation){e.stopPropagation();e.preventDefault()}};return popupFailed})}
else{$this.on(n.refreshevent,function(t){t.preventDefault();var s=n.uniqueID?'_'+n.uniqueID:'',i='',o=0;if(n.admin){n.imageURL=e('#verification_image'+s).attr('src').replace(/.$/,'')+$this.val();i=String(n.imageURL)}
else{i=String(n.imageURL);i=i.substr(0,i.indexOf('rand=')+5);var a='0123456789abcdef';for(o=0;o<32;o++)i=i+a.substr(Math.floor(Math.random()*16),1)};if(n.useLibrary){e('#verification_image'+s).attr('src',i)}
else if(document.getElementById('verification_image'+s)){for(o=1;o<=n.letterCount;o++)if(document.getElementById('verification_image'+s+'_'+o))document.getElementById('verification_image'+s+'_'+o).src=i+';letter='+o}})}})}})(jQuery);