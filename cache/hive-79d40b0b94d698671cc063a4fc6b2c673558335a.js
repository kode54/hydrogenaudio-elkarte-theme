// https://hydrogenaud.io/themes/default/portal.js elk_jquery_plugins.js script.js script_elk.js theme.js register.js

/*
 2015-2017 SimplePortal Team
 @license BSD 3-clause
 @version 1.0.0 RC1
*/
function sp_collapseBlock(a){$("#sp_block_"+a).slideToggle(300).promise().done(function(){var b=!1;$("#sp_block_"+a).is(":visible")&&(b=!0);0===elk_member_id?document.cookie="sp_block_"+a+"="+(b?0:1):elk_setThemeOption("sp_block_"+a,b?0:1,null,null);$("#sp_collapse_"+a).attr("class",b?"collapse":"expand")})}
function sp_collapseSide(a){var b=[,"sp_left",,,"sp_right"];mode=""===document.getElementById(b[a]).style.display?0:1;0===elk_member_id?document.cookie=b[a]+"="+(mode?0:1):elk_setThemeOption(b[a],mode?0:1,null,null);document.getElementById("sp_collapse_side"+a).className=mode?"dot collapse":"dot expand";$("#"+b[a]).toggle(400)}
function sp_collapse_object(a,b){var c=""===document.getElementById("sp_object_"+a).style.display?0:1;$("#sp_object_"+a).toggle(300);if("undefined"===typeof b||!0===b)document.getElementById("sp_collapse_"+a).src=elk_images_url+(c?"/collapse.png":"/expand.png")}
function sp_image_resize(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)if("bbc_img sp_article"===a[b].className){var c=new Image;c.src=a[b].src;300<c.width?(a[b].height=300*c.height/c.width,a[b].width=300):(a[b].width=c.width,a[b].height=c.height)}"undefined"!==typeof window_oldSPImageOnload&&window_oldSPImageOnload&&(window_oldSPImageOnload(),window_oldSPImageOnload=null)}
function sp_submit_shout(a,b,c){if(window.XMLHttpRequest){shoutbox_indicator(a,!0);var d=document.getElementById("new_shout_"+a).value.replace(/&#/g,"&#38;#").php_urlencode();sendXMLDocument(elk_prepareScriptUrl(sp_script_url)+"action=shoutbox;xml","shoutbox_id="+a+"&shout="+d+"&"+b+"="+c,onShoutReceived);document.getElementById("new_shout_"+a).value="";return!1}}
function sp_delete_shout(a,b,c,d){if(window.XMLHttpRequest)return shoutbox_indicator(a,!0),sendXMLDocument(elk_prepareScriptUrl(sp_script_url)+"action=shoutbox;xml","shoutbox_id="+a+"&delete="+b+"&"+c+"="+d,onShoutReceived),!1}function sp_refresh_shout(a,b){if(window.XMLHttpRequest)return shoutbox_indicator(a,!0),getXMLDocument(elk_prepareScriptUrl(sp_script_url)+"action=shoutbox;shoutbox_id="+a+";time="+b+";xml",onShoutReceived),!1}
function onShoutReceived(a){var b="";var c=a.getElementsByTagName("elk")[0].getElementsByTagName("shoutbox")[0].childNodes[0].nodeValue;if("1"===a.getElementsByTagName("elk")[0].getElementsByTagName("updated")[0].childNodes[0].nodeValue){shouts=a.getElementsByTagName("elk")[0].getElementsByTagName("shout");var d=a.getElementsByTagName("elk")[0].getElementsByTagName("error")[0].childNodes[0].nodeValue;var e=a.getElementsByTagName("elk")[0].getElementsByTagName("warning")[0].childNodes[0].nodeValue;
var f=a.getElementsByTagName("elk")[0].getElementsByTagName("reverse")[0].childNodes[0].nodeValue;"0"!==e&&(b+='<li class="shoutbox_warning smalltext">'+e+"</li>");if("0"!==d)document.getElementById("shouts_"+c).innerHTML=b+'<li class="smalltext">'+d+"</li>";else{for(var g=0;g<shouts.length;g++){var h=a.getElementsByTagName("elk")[0].getElementsByTagName("shout")[g];h.getElementsByTagName("id");d=h.getElementsByTagName("author")[0].childNodes[0].nodeValue;e=h.getElementsByTagName("time")[0].childNodes[0].nodeValue;
h.getElementsByTagName("timeclean");var k=h.getElementsByTagName("delete")[0].childNodes[0].nodeValue;var m=h.getElementsByTagName("content")[0].childNodes[0].nodeValue;h=h.getElementsByTagName("is_me")[0].childNodes[0].nodeValue;b+="<li>"+("0"===h?"<strong>"+d+":</strong> ":"")+m+"<br />"+(0!==k?'<span class="shoutbox_delete">'+k+"</span>":"")+'<span class="smalltext shoutbox_time">'+e+"</span></li>"}document.getElementById("shouts_"+c).innerHTML=b;"0"!==f?document.getElementById("shouts_"+c).scrollTop=
document.getElementById("shouts_"+c).scrollHeight:document.getElementById("shouts_"+c).scrollTop=0}}shoutbox_indicator(c,!1);return!1}function shoutbox_indicator(a,b){document.getElementById("shoutbox_load_"+a).style.display=b?"":"none"}function sp_catch_enter(a){if(window.event)var b=window.event.keyCode;else a&&(b=a.which);if(13===b)return!0}
function sp_show_ignored_shout(a){document.getElementById("ignored_shout_"+a).style.display="";document.getElementById("ignored_shout_link_"+a).style.display="none"}function sp_show_history_ignored_shout(a){document.getElementById("history_ignored_shout_"+a).style.display="";document.getElementById("history_ignored_shout_link_"+a).style.display="none"}
function sp_showMoreSmileys(a,b,c,d,e,f){if("undefined"!==typeof this.oSmileyPopupWindow&&"closed"in this.oSmileyPopupWindow&&!this.oSmileyPopupWindow.closed)this.oSmileyPopupWindow.focus();else{if("undefined"===typeof g){var g="";for(i=0;i<sp_smileys.length;i++)sp_smileys[i][2]=sp_smileys[i][2].replace(/"/g,"&quot;"),sp_smileys[i][0]=sp_smileys[i][0].replace(/"/g,"&quot;"),g+='<a href="javascript:void(0);" onclick="window.opener.replaceText(\' '+sp_smileys[i][0].php_addslashes()+"', window.opener.document.getElementById('new_shout_"+
a+'\')); window.focus(); return false;"><img src="'+f+"/"+sp_smileys[i][1]+'" id="sml_'+sp_smileys[i][1]+'" alt="'+sp_smileys[i][2]+'" title="'+sp_smileys[i][2]+'" style="padding: 4px;" border="0" /></a> '}this.oSmileyPopupWindow=window.open("","add_smileys","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,width=480,height=220,resizable=yes");this.oSmileyPopupWindow.document.open("text/html","replace");this.oSmileyPopupWindow.document.write(sp_moreSmileysTemplate.easyReplace({smileyRows:g}));
this.oSmileyPopupWindow.document.close()}}
function sp_update_editor(a,b){var c=$("textarea"),d=c.sceditor("instance"),e="";"bbc"===a&&"undefined"===typeof d?(e="html"===b?c.html().php_unhtmlspecialchars():"[code]"+c.val().replace(/\n/g,"<br >")+"[/code]",elk_editor(),d=c.sceditor("instance"),d.sourceMode(!1),d.setWysiwygEditorValue(e),d.sourceMode(!0)):"bbc"!==a&&"undefined"!==typeof d&&""!==b?("html"===a?""!==d.getSourceEditorValue()&&(e=d.getWysiwygEditorValue(!1),e=e.replace(/<span .*>\s?<\/span>/g,"").replace(/<br( \\)?>/g,"\n")):e=d.getSourceEditorValue(!1).replace(/<br( \\)?>/g,
"\n").php_unhtmlspecialchars().replace("[code]","").replace("[/code]",""),d.destroy(),$("textarea").val(e)):"bbc"!==a&&"undefined"!==typeof d&&("html"===a&&d.updateOriginal(),d.destroy())}function sp_editor_change_type(a){var b;$("#"+a).on("focus",function(){b=this.value}).change(function(){sp_update_editor(this.value,b);b=this.value})}function sp_theme_select(a){a=a.options[a.selectedIndex].value;document.getElementById("sp_ts_thumb").src=sp_ts_thumbs[a]}
function sp_collapseCalendar(a){new_day="sp_calendar_"+a;if(new_day===current_day)return!1;document.getElementById(current_day).style.display="none";document.getElementById(new_day).style.display="";current_day=new_day}function sp_collapseObject(a){var b=document.getElementById("sp_object_"+a).style.display;b=""===b|"block"===b?!1:!0;$("#sp_object_"+a).slideToggle(300);document.getElementById("sp_collapse_"+a).src=elk_images_url+(b?"/selected.png":"/selected_open.png")}
function check_style_options(){var a=document.getElementById("no_title").checked,b=document.getElementById("no_body").checked;document.getElementById("title_default_class").disabled=a;document.getElementById("title_custom_class").disabled=a;document.getElementById("title_custom_style").disabled=a;document.getElementById("body_default_class").disabled=b;document.getElementById("body_custom_class").disabled=b;document.getElementById("body_custom_style").disabled=b}
function sp_surroundText(a,b,c){if("caretPos"in c&&"createTextRange"in c){var d=c.caretPos,e=d.text.length;d.text=" "===d.text.charAt(d.text.length-1)?a+d.text+b+" ":a+d.text+b;0===e?(d.moveStart("character",-b.length),d.moveEnd("character",-b.length),d.select()):c.focus(d)}else if("selectionStart"in c){d=c.value.substr(0,c.selectionStart);e=c.value.substr(c.selectionStart,c.selectionEnd-c.selectionStart);var f=c.value.substr(c.selectionEnd),g=c.selectionStart,h=c.scrollTop;c.value=d+a+e+b+f;c.setSelectionRange&&
(0===e.length?c.setSelectionRange(g+a.length,g+a.length):c.setSelectionRange(g,g+a.length+e.length+b.length),c.focus());c.scrollTop=h}else c.value+=a+b,c.focus(c.value.length-1)};/*
 ElkArte Forum contributors
 @license   BSD http://opensource.org/licenses/BSD-3-Clause

 @version 1.1

 This file contains javascript plugins for use with jquery
 hoverIntent v1.9.0 // 2014.08.11 // jQuery v1.9.1+
 http://cherne.net/brian/resources/jquery.hoverIntent.html

 You may use hoverIntent under the terms of the MIT license. Basically that
 means you are free to use hoverIntent as long as this header is left intact.
 Copyright 2007, 2014 Brian Cherne
 Superclick v1.0.0 - jQuery menu widget
 Copyright (c) 2013 Joel Birch

 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html
 @name      ElkArte news fader
 @copyright ElkArte Forum contributors
 @license   MIT http://www.opensource.org/licenses/mit-license.php
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.hoverIntent&&a(jQuery)})(function(a){var b={interval:100,sensitivity:6,timeout:0},c=0,d,e,f=function(a){d=a.pageX;e=a.pageY},g=function(a,b,c,n){if(Math.sqrt((c.pX-d)*(c.pX-d)+(c.pY-e)*(c.pY-e))<n.sensitivity)return b.off("mousemove.hoverIntent"+c.namespace,f),delete c.timeoutId,c.isActive=!0,delete c.pX,delete c.pY,n.over.apply(b[0],[a]);c.pX=d;c.pY=e;c.timeoutId=setTimeout(function(){g(a,b,c,n)},n.interval)};
a.fn.hoverIntent=function(d,e,m){var h=c++,k=a.extend({},b);k=a.isPlainObject(d)?a.extend(k,d):a.isFunction(e)?a.extend(k,{over:d,out:e,selector:m}):a.extend(k,{over:d,out:d,selector:e});d=function(b){var c=a.extend({},b),d=a(this),e=d.data("hoverIntent");e||d.data("hoverIntent",e={});var r=e[h];r||(e[h]=r={id:h});r.timeoutId&&(r.timeoutId=clearTimeout(r.timeoutId));e=r.namespace=".hoverIntent"+h;"mouseenter"===b.type?r.isActive||(r.pX=c.pageX,r.pY=c.pageY,d.on("mousemove.hoverIntent"+e,f),r.timeoutId=
setTimeout(function(){g(c,d,r,k)},k.interval)):r.isActive&&(d.off("mousemove.hoverIntent"+e,f),r.timeoutId=setTimeout(function(){var a=r,b=k.out;delete d.data("hoverIntent")[a.id];b.apply(d[0],[c])},k.timeout))};return this.on({"mouseenter.hoverIntent":d,"mouseleave.hoverIntent":d},k.selector)}});
(function(a,b){var c=function(){(function(){a(window).on("load",function(){a("body").children().on("click.superfish",function(){a(".sf-js-enabled").superfish("hide","true")})})})();var c=function(){var b=/^(?![\w\W]*Windows Phone)[\w\W]*(iPhone|iPad|iPod)/i.test(navigator.userAgent);if(b)a("html").css("cursor","pointer").on("click",a.noop);return b}(),e=function(){var a=document.documentElement.style;return"behavior"in a&&"fill"in a&&/iemobile/i.test(navigator.userAgent)}(),f=!!b.PointerEvent,g=function(a,
b,c){var d="sf-js-enabled";b.cssArrows&&(d+=" sf-arrows");a[c?"addClass":"removeClass"](d)},h=function(b,c){return b.find("li."+c.pathClass).slice(0,c.pathLevels).addClass(c.hoverClass+" sf-breadcrumb").filter(function(){return a(this).children(c.popUpSelector).hide().show().length}).removeClass(c.pathClass)},k=function(a,b){var c=b?"addClass":"removeClass";a.children("a")[c]("sf-with-ul")},m=function(a){var b=a.css("ms-touch-action"),c=a.css("touch-action");c="pan-y"===(c||b)?"auto":"pan-y";a.css({"ms-touch-action":c,
"touch-action":c})},n=function(a){return a.closest(".sf-js-enabled").data("sfOptions")},p=function(){var b=a(this),c=n(b);clearTimeout(c.sfTimer);b.siblings().superfish("hide").end().superfish("show")},l=function(b){b.retainPath=-1<a.inArray(this[0],b.$path);this.superfish("hide");this.parents("."+b.hoverClass).length||(b.onIdle.call(this.closest(".sf-js-enabled")),b.$path.length&&a.proxy(p,b.$path)())},q=function(){var b=a(this),d=n(b);c?a.proxy(l,b,d)():(clearTimeout(d.sfTimer),d.sfTimer=setTimeout(a.proxy(l,
b,d),d.delay))},u=function(b){var c=a(this),d=n(c),e=c.siblings(b.data.popUpSelector);if(!1===d.onHandleTouch.call(e))return this;0<e.length&&e.is(":hidden")&&(c.one("click.superfish",!1),"MSPointerDown"===b.type||"pointerdown"===b.type?c.trigger("focus"):a.proxy(p,c.parent("li"))())};return{hide:function(b){if(this.length){var c=n(this);if(!c)return this;var d=!0===c.retainPath?c.$path:"";d=this.find("li."+c.hoverClass).add(this).not(d).removeClass(c.hoverClass).children(c.popUpSelector);var e=c.speedOut;
b&&(d.show(),e=0);c.retainPath=!1;if(!1===c.onBeforeHide.call(d))return this;d.stop(!0,!0).animate(c.animationOut,e,function(){var b=a(this);c.onHide.call(b)})}return this},show:function(){var a=n(this);if(!a)return this;var b=this.addClass(a.hoverClass).children(a.popUpSelector);if(!1===a.onBeforeShow.call(b))return this;b.stop(!0,!0).animate(a.animation,a.speed,function(){a.onShow.call(b)});return this},destroy:function(){return this.each(function(){var b=a(this),c=b.data("sfOptions");if(!c)return!1;
var d=b.find(c.popUpSelector).parent("li");clearTimeout(c.sfTimer);g(b,c);k(d);m(b);b.off(".superfish").off(".hoverIntent");d.children(c.popUpSelector).attr("style",function(a,b){return b.replace(/display[^;]+;?/g,"")});c.$path.removeClass(c.hoverClass+" sf-breadcrumb").addClass(c.pathClass);b.find("."+c.hoverClass).removeClass(c.hoverClass);c.onDestroy.call(b);b.removeData("sfOptions")})},init:function(b){return this.each(function(){var d=a(this);if(d.data("sfOptions"))return!1;var l=a.extend({},
a.fn.superfish.defaults,b),n=d.find(l.popUpSelector).parent("li");l.$path=h(d,l);d.data("sfOptions",l);g(d,l,!0);k(n,!0);m(d);var t="li:has("+l.popUpSelector+")";if(a.fn.hoverIntent&&!l.disableHI)d.hoverIntent(p,q,t);else d.on("mouseenter.superfish",t,p).on("mouseleave.superfish",t,q);t="MSPointerDown.superfish";f&&(t="pointerdown.superfish");c||(t+=" touchend.superfish");e&&(t+=" mousedown.superfish");d.on("focusin.superfish","li",p).on("focusout.superfish","li",q).on(t,"a",l,u);n.not(".sf-breadcrumb").superfish("hide",
!0);l.onInit.call(this)})}}}();a.fn.superfish=function(b,e){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof b&&b?a.error("Method "+b+" does not exist on jQuery.fn.superfish"):c.init.apply(this,arguments)};a.fn.superfish.defaults={popUpSelector:"ul,.sf-mega",hoverClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,disableHI:!1,onInit:a.noop,onBeforeShow:a.noop,
onShow:a.noop,onBeforeHide:a.noop,onHide:a.noop,onIdle:a.noop,onDestroy:a.noop,onHandleTouch:a.noop}})(jQuery,window);
(function(a,b){var c=function(){(function(){a(b).on("load",function(){a("body").children().on("click.superclick",function(){a(".sf-js-enabled").superclick("reset")})})})();var c=function(a,b){var c="sf-js-enabled";b.cssArrows&&(c+=" sf-arrows");a.toggleClass(c)},e=function(b,c){return b.find("li."+c.pathClass).slice(0,c.pathLevels).addClass(c.activeClass+" sf-breadcrumb").filter(function(){return a(this).children(c.popUpSelector).hide().show().length}).removeClass(c.pathClass)},f=function(a){var b=
a.css("ms-touch-action"),c=a.css("touch-action");c="pan-y"===(c||b)?"auto":"pan-y";a.css({"ms-touch-action":c,"touch-action":c})},g=function(b){var c=a(this),d=c.siblings(b.data.popUpSelector);if(d.length)return b=!d.is(":hidden"),d=d.is(":hidden")?k:m,a.proxy(d,c.parent("li"))(),!!b},h=function(b){var c=a(this),d=c.siblings(b.data.popUpSelector);b=b.currentTarget.href;if(1===d.length&&b)return d.not(":hidden")&&a.proxy(m,c.parent("li"))(),window.location=b,!1},k=function(){var b=a(this);p(b);b.siblings().superclick("hide").end().superclick("show")},
m=function(){var b=a(this),c=p(b);a.proxy(n,b,c)()},n=function(b){b.retainPath=-1<a.inArray(this[0],b.$path);this.superclick("hide");this.parents("."+b.activeClass).length||(b.onIdle.call(this.closest(".sf-js-enabled")),b.$path.length&&a.proxy(k,b.$path)())},p=function(a){return a.closest(".sf-js-enabled").data("sf-options")};return{hide:function(b){if(this.length){var c=p(this);if(!c)return this;var d=!0===c.retainPath?c.$path:"";d=this.find("li."+c.activeClass).add(this).not(d).removeClass(c.activeClass).children(c.popUpSelector);
var e=c.speedOut;b&&(d.show(),e=0);c.retainPath=!1;c.onBeforeHide.call(d);d.stop(!0,!0).animate(c.animationOut,e,function(){var b=a(this);c.onHide.call(b)})}return this},show:function(){var a=p(this);if(!a)return this;var b=this.addClass(a.activeClass).children(a.popUpSelector);a.onBeforeShow.call(b);b.stop(!0,!0).animate(a.animation,a.speed,function(){a.onShow.call(b)});return this},destroy:function(){return this.each(function(){var b=a(this),d=b.data("sf-options");if(!d)return!1;var e=b.find(d.popUpSelector).parent("li");
c(b,d);e.children("a").toggleClass("sf-with-ul");f(b);b.off(".superclick");e.children(d.popUpSelector).attr("style",function(a,b){return b.replace(/display[^;]+;?/g,"")});d.$path.removeClass(d.activeClass+" sf-breadcrumb").addClass(d.pathClass);b.find("."+d.activeClass).removeClass(d.activeClass);d.onDestroy.call(b);b.removeData("sf-options")})},reset:function(){return this.each(function(){var b=a(this),c=p(b);a(b.find("."+c.activeClass).toArray().reverse()).children("a").trigger("click")})},init:function(b){return this.each(function(){var d=
a(this);if(d.data("sf-options"))return!1;var k=a.extend({},a.fn.superclick.defaults,b),m=d.find(k.popUpSelector).parent("li");k.$path=e(d,k);d.data("sf-options",k);c(d,k);m.children("a").toggleClass("sf-with-ul");f(d);d.on("click.superclick","a",k,g);m.on("dblclick.superclick","a",k,h);m.not(".sf-breadcrumb").superclick("hide",!0);k.onInit.call(this)})}}}();a.fn.superclick=function(b,e){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof b&&b?a.error("Method "+b+
" does not exist on jQuery.fn.superclick"):c.init.apply(this,arguments)};a.fn.superclick.defaults={popUpSelector:"ul,.sf-mega",activeClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,onInit:a.noop,onBeforeShow:a.noop,onShow:a.noop,onBeforeHide:a.noop,onHide:a.noop,onIdle:a.noop,onDestroy:a.noop}})(jQuery,window);
(function(a){a.fn.Elk_NewsFader=function(b){var c={iFadeDelay:5E3,iFadeSpeed:1E3},d=0,e=a(this).find("li");1<e.length&&(a.extend(c,b),e.hide(),e.eq(0).fadeIn(c.iFadeSpeed),setInterval(function(){a(e[d]).fadeOut(c.iFadeSpeed,function(){d++;d==e.length&&(d=0);a(e[d]).fadeIn(c.iFadeSpeed)})},c.iFadeSpeed+c.iFadeDelay));return this}})(jQuery);/*
 @name      ElkArte Forum
 @copyright ElkArte Forum contributors
 @license   BSD http://opensource.org/licenses/BSD-3-Clause

 This file contains code covered by:
 copyright:	2011 Simple Machines (http://www.simplemachines.org)
 license:		BSD, See included LICENSE.TXT for terms and conditions.

 @version 1.1
*/
var elk_formSubmitted=!1,lastKeepAliveCheck=(new Date).getTime(),ajax_indicator_ele=null,ua=navigator.userAgent.toLowerCase(),is_opera=!!window.opera,is_ff="undefined"!==typeof InstallTrigger||(-1!==ua.indexOf("iceweasel")||-1!==ua.indexOf("icecat")||-1!==ua.indexOf("shiretoko")||-1!==ua.indexOf("minefield"))&&!is_opera,is_safari=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),is_chrome=!!window.chrome,is_ie=!!document.documentMode,is_webkit=-1!==ua.indexOf("applewebkit");
is_osx=0<=navigator.platform.toUpperCase().indexOf("MAC");is_mobile=-1!==navigator.userAgent.indexOf("Mobi");is_touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;"getElementsByClassName"in document||(document.getElementsByClassName=function(a){return $("."+a)});
function getXMLDocument(a,b){var c=new XMLHttpRequest,d="undefined"!==typeof b,e=this;d&&(c.onreadystatechange=function(){4===c.readyState&&(null!==c.responseXML&&200===c.status?b.call(e,c.responseXML):b.call(e,!1))});c.open("GET",a,d);c.send(null);return c}
function sendXMLDocument(a,b,c){var d=new window.XMLHttpRequest,e=this;"undefined"!==typeof c&&(d.onreadystatechange=function(){4===d.readyState&&(null!==d.responseXML&&200===d.status?c.call(e,d.responseXML):c.call(e,!1))});d.open("POST",a,!0);"setRequestHeader"in d&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");d.send(b);return!0}String.prototype.php_strtr=function(a,b){return this.replace(new RegExp("["+a+"]","g"),function(c){return b.charAt(a.indexOf(c))})};
String.prototype.php_strtolower=function(){return"boolean"===typeof elk_iso_case_folding&&!0===elk_iso_case_folding?this.php_strtr("ABCDEFGHIJKLMNOPQRSTUVWXYZ\u008a\u008c\u008e\u009f\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d7\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de","abcdefghijklmnopqrstuvwxyz\u009a\u009c\u009e\u00ff\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f7\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe"):
this.php_strtr("ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")};String.prototype.php_urlencode=function(){return encodeURIComponent(this).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")};String.prototype.php_htmlspecialchars=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};
String.prototype.php_unhtmlspecialchars=function(){return this.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")};String.prototype.php_addslashes=function(){return this.replace(/\\/g,"\\\\").replace(/'/g,"\\'")};String.prototype._replaceEntities=function(a,b,c){return String.fromCharCode(parseInt(c))};String.prototype.removeEntities=function(){return this.replace(/&(amp;)?#(\d+);/g,this._replaceEntities)};
String.prototype.easyReplace=function(a){var b=this;for(c in a){var c=c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");b=b.replace(new RegExp("%"+c+"%","g"),a[c])}return b};function php_str_repeat(a,b){return 1>b?"":a+php_str_repeat(a,b-1)}
function reqWin(a,b,c,d){b&&.8*self.screen.availWidth<b||c&&.8*self.screen.availHeight<c?(d=!1,b=Math.min(b,.8*self.screen.availWidth),c=Math.min(c,.8*self.screen.availHeight)):d="boolean"===typeof d&&!0===d;window.open(a,"requested_popup","toolbar=no,location=no,status=no,menubar=no,scrollbars="+(d?"no":"yes")+",width="+(b?b:480)+",height="+(c?c:220)+",resizable=no");return!1}
function reqOverlayDiv(a,b,c){b="string"===typeof b?b:help_popup_heading_text;b=new smc_Popup({heading:b,content:'<div class="centertext"><i class="icon icon-spin icon-big i-spinner"></i></div>',icon:"string"===typeof c?c:"i-help"});var d=$("#"+b.popup_id).find(".popup_content");$.ajax({url:a,type:"GET",dataType:"html"}).done(function(a,b,c){a=$('<div id="temp_help">').html(a).find('a[href$="self.close();"]').hide().prev("br").hide().parent().html();d.html(a)}).fail(function(a,b,c){d.html(b)});return!1}
function smc_Popup(a){this.opt=a;this.popup_id=this.opt.custom_id?this.opt.custom_id:"elk_popup";this.show()}
smc_Popup.prototype.show=function(){var a="popup_window "+(this.opt.custom_class?this.opt.custom_class:"content"),b=this.opt.icon?'<i class="icon '+this.opt.icon+' icon-top"></i> ':"";$("body").append('<div id="'+this.popup_id+'" class="popup_container"><div class="'+a+'" style="max-height: none;"><h3 class="popup_heading"><a href="javascript:void(0);" class="hide_popup icon i-close" title="Close"></a>'+b+this.opt.heading+'</h3><div class="popup_content">'+this.opt.content+"</div></div></div>");this.popup_body=
$("#"+this.popup_id).children(".popup_window");this.popup_body.parent().fadeIn(300);this.popup_body.addClass("in");var c=this;$(document).mouseup(function(a){0===$("#"+c.popup_id).has(a.target).length&&c.hide()}).keyup(function(a){27===a.keyCode&&c.hide()});$("#"+this.popup_id).find(".hide_popup").on("click",function(){return c.hide()});return!1};smc_Popup.prototype.hide=function(){$("#"+this.popup_id).fadeOut(300,function(){$(this).remove()});return!1};
function replaceText(a,b){if("selectionStart"in b){var c=b.value.substr(0,b.selectionStart),d=b.value.substr(b.selectionEnd),e=b.scrollTop,f=0;b.value=c+a+d;b.setSelectionRange&&(b.focus(),is_opera&&null!==a.match(/\n/g)&&(f=a.match(/\n/g).length),b.setSelectionRange(c.length+a.length+f,c.length+a.length+f));b.scrollTop=e}else b.value+=a,b.focus(b.value.length-1)}
function isEmptyText(a){for(a="string"===typeof a?a:a.value;0<a.length&&(" "===a.charAt(0)||"\t"===a.charAt(0));)a=a.substring(1,a.length);for(;0<a.length&&(" "===a.charAt(a.length-1)||"\t"===a.charAt(a.length-1));)a=a.substring(0,a.length-1);return""===a}function submitonce(a){elk_formSubmitted=!0}
function submitThisOnce(a,b){var c=("form"in a?a.form:a).getElementsByTagName("textarea");b="undefined"==typeof b?!0:b;for(var d=0,e=c.length;d<e;d++)c[d].readOnly=b;window.setTimeout(function(){submitThisOnce(a,!1)},1E3);return!elk_formSubmitted}function setInnerHTML(a,b){a&&(a.innerHTML=b)}function getInnerHTML(a){if(a)return a.innerHTML}
function setOuterHTML(a,b){if("outerHTML"in a)a.outerHTML=b;else{var c=document.createRange();c.setStartBefore(a);a.parentNode.replaceChild(c.createContextualFragment(b),a)}}function in_array(a,b){for(var c in b)if(b[c]==a)return!0;return!1}function array_search(a,b){for(var c in b)if(b[c]==a)return c;return null}function selectRadioByName(a,b){if(!("length"in a))return a.checked=!0;for(var c=0,d=a.length;c<d;c++)if(a[c].value===b)return a[c].checked=!0;return!1}
function selectAllRadio(a,b,c,d){for(a=0;a<b.length;a++)void 0!==b[a].name&&b[a].name.substr(0,c.length)==c&&b[a].value==d&&(b[a].checked=!0)}function invertAll(a,b,c,d){for(var e=0;e<b.length;e++)"name"in b[e]&&("string"!==typeof c||b[e].name.substr(0,c.length)===c||b[e].id.substr(0,c.length)===c)&&(!b[e].disabled||"boolean"===typeof d&&d)&&(b[e].checked=a.checked)}
function elk_sessionKeepAlive(){var a=(new Date).getTime();elk_scripturl&&9E5<a-lastKeepAliveCheck&&((new Image).src=elk_prepareScriptUrl(elk_scripturl)+"action=keepalive;time="+a,lastKeepAliveCheck=a);window.setTimeout(function(){elk_sessionKeepAlive()},12E5)}window.setTimeout(function(){elk_sessionKeepAlive()},12E5);
function elk_setThemeOption(a,b,c,d){if(null===d||"undefined"===typeof d)d="";(new Image).src=elk_prepareScriptUrl(elk_scripturl)+"action=jsoption;var="+a+";val="+b+";"+elk_session_var+"="+elk_session_id+d+(null===c?"":"&th="+c)+";time="+(new Date).getTime()}
function hashLoginPassword(a,b,c){"undefined"!==typeof hex_sha256&&-1===a.user.value.indexOf("@")&&(a.passwrd.autocomplete="off",a.hash_passwrd.value=hex_sha256(a.user.value.php_strtolower()+a.passwrd.value),"old_hash_passwrd"in a&&"undefined"!==typeof hex_sha1&&(a.old_hash_passwrd.value=hex_sha1(hex_sha1(a.user.value.php_strtolower()+a.passwrd.value)+b+("undefined"===typeof c?"":c))),a.passwrd.value=a.passwrd.value.replace(/./g,"*"))}
function hashAdminPassword(a,b,c,d){"undefined"!==typeof hex_sha256&&(a.admin_hash_pass.value=hex_sha256(b.php_strtolower()+a.admin_pass.value),a.admin_pass.value=a.admin_pass.value.replace(/./g,"*"))}function hashModeratePassword(a,b,c,d){"undefined"!==typeof hex_sha256&&(a.moderate_hash_pass.value=hex_sha256(b.php_strtolower()+a.moderate_pass.value),a.moderate_pass.value=a.moderate_pass.value.replace(/./g,"*"))}
function expandPages(a,b,c,d,e){var f="",g=0;50<(d-c)/e&&(g=d,d=c+50*e);for(;c<d;c+=e)f+='<a class="navPages" href="'+b.replace(/%1\$d/,c).replace(/%%/g,"%")+'">'+(1+c/e)+"</a> ";0<g&&(f+='<span class="expand_pages" role="menuitem" onclick="expandPages(this, \''+b+"', "+d+", "+g+", "+e+');"> ... </span> ');setOuterHTML(a,f)}function smc_preCacheImage(a){"smc_aCachedImages"in window||(window.smc_aCachedImages=[]);in_array(a,window.smc_aCachedImages)||((new Image).src=a)}
function smc_Cookie(a){this.opt=a;this.oCookies={};this.init()}smc_Cookie.prototype.init=function(){if("cookie"in document&&""!==document.cookie)for(var a=document.cookie.split(";"),b=0,c=a.length;b<c;b++){var d=a[b].split("=");this.oCookies[d[0].replace(/^\s+|\s+$/g,"")]=decodeURIComponent(d[1])}};smc_Cookie.prototype.get=function(a){return a in this.oCookies?this.oCookies[a]:null};smc_Cookie.prototype.set=function(a,b){document.cookie=a+"="+encodeURIComponent(b)};
function elk_Toggle(a){this.opt=a;this.bCollapsed=!1;this.oCookie=null;this.init()}
elk_Toggle.prototype.init=function(){var a=0,b=0;if(!("bToggleEnabled"in this.opt)||this.opt.bToggleEnabled){"oCookieOptions"in this.opt&&this.opt.oCookieOptions.bUseCookie&&(this.oCookie=new smc_Cookie({}),a=this.oCookie.get(this.opt.oCookieOptions.sCookieName),null!==a&&(this.opt.bCurrentlyCollapsed="1"===a));this.opt.bCurrentlyCollapsed&&this.changeState(!0,!0);if("aSwapImages"in this.opt)for(a=0,b=this.opt.aSwapImages.length;a<b;a++){var c=document.getElementById(this.opt.aSwapImages[a].sId);
"object"===typeof c&&null!==c&&("none"===getComputedStyle(c).getPropertyValue("display")&&(c.style.display="inline"),c.instanceRef=this,c.onclick=function(){this.instanceRef.toggle();this.blur()},c.style.cursor="pointer",smc_preCacheImage(this.opt.aSwapImages[a].srcCollapsed))}else if("aSwapClasses"in this.opt)for(a=0,b=this.opt.aSwapClasses.length;a<b;a++)c=document.getElementById(this.opt.aSwapClasses[a].sId),"object"===typeof c&&null!==c&&("none"===getComputedStyle(c).getPropertyValue("display")&&
(c.style.display="block"),c.instanceRef=this,c.onclick=function(){this.instanceRef.toggle();this.blur()},c.style.cursor="pointer");if("aSwapLinks"in this.opt)for(a=0,b=this.opt.aSwapLinks.length;a<b;a++)c=document.getElementById(this.opt.aSwapLinks[a].sId),"object"===typeof c&&null!==c&&("none"===getComputedStyle(c).getPropertyValue("display")&&(c.style.display="inline-block"),c.instanceRef=this,c.onclick=function(){this.instanceRef.toggle();this.blur();return!1})}};
elk_Toggle.prototype.changeState=function(a,b){var c;b="undefined"!==typeof b;!b&&a&&"funcOnBeforeCollapse"in this.opt?(this.tmpMethod=this.opt.funcOnBeforeCollapse,this.tmpMethod(),delete this.tmpMethod):!b&&!a&&"funcOnBeforeExpand"in this.opt&&(this.tmpMethod=this.opt.funcOnBeforeExpand,this.tmpMethod(),delete this.tmpMethod);if("aSwapImages"in this.opt){var d=0;for(c=this.opt.aSwapImages.length;d<c;d++){var e=document.getElementById(this.opt.aSwapImages[d].sId);if("object"===typeof e&&null!==e){var f=
a?this.opt.aSwapImages[d].srcCollapsed:this.opt.aSwapImages[d].srcExpanded;e.src!=f&&(e.src=f);e.alt=e.title=a?this.opt.aSwapImages[d].altCollapsed:this.opt.aSwapImages[d].altExpanded}}}else if("aSwapClasses"in this.opt)for(d=0,c=this.opt.aSwapClasses.length;d<c;d++)e=document.getElementById(this.opt.aSwapClasses[d].sId),"object"===typeof e&&null!==e&&(f=a?this.opt.aSwapClasses[d].classCollapsed:this.opt.aSwapClasses[d].classExpanded,e.className!==f&&(e.className=f),e.title=e.title=a?this.opt.aSwapClasses[d].titleCollapsed:
this.opt.aSwapClasses[d].titleExpanded);if("aSwapLinks"in this.opt)for(d=0,c=this.opt.aSwapLinks.length;d<c;d++)e=document.getElementById(this.opt.aSwapLinks[d].sId),"object"===typeof e&&null!==e&&(e.innerHTML=a?this.opt.aSwapLinks[d].msgCollapsed:this.opt.aSwapLinks[d].msgExpanded);d=0;for(c=this.opt.aSwappableContainers.length;d<c;d++)null!==this.opt.aSwappableContainers[d]&&(e=document.getElementById(this.opt.aSwappableContainers[d]),"object"===typeof e&&null!==e&&(a?$(e).slideUp():$(e).slideDown()));
this.bCollapsed=a;"oCookieOptions"in this.opt&&this.opt.oCookieOptions.bUseCookie&&this.oCookie.set(this.opt.oCookieOptions.sCookieName,this.bCollapsed?"1":"0");!b&&"oThemeOptions"in this.opt&&this.opt.oThemeOptions.bUseThemeSettings&&elk_setThemeOption(this.opt.oThemeOptions.sOptionName,this.bCollapsed?"1":"0","sThemeId"in this.opt.oThemeOptions?this.opt.oThemeOptions.sThemeId:null,"sAdditionalVars"in this.opt.oThemeOptions?this.opt.oThemeOptions.sAdditionalVars:null)};
elk_Toggle.prototype.toggle=function(){this.changeState(!this.bCollapsed)};function ajax_indicator(a){null===ajax_indicator_ele&&(ajax_indicator_ele=document.getElementById("ajax_in_progress"),null===ajax_indicator_ele&&create_ajax_indicator_ele());null!==ajax_indicator_ele&&(ajax_indicator_ele.style.display=a?"block":"none")}
function create_ajax_indicator_ele(){ajax_indicator_ele=document.createElement("div");ajax_indicator_ele.id="ajax_in_progress";var a=document.createElement("a");a.href="javascript:ajax_indicator(false)";var b=document.createElement("img");b.src=elk_images_url+"/icons/quick_remove.png";"undefined"!==typeof ajax_notification_cancel_text&&(b.alt=ajax_notification_cancel_text,b.title=ajax_notification_cancel_text);a.appendChild(b);ajax_indicator_ele.appendChild(a);ajax_indicator_ele.innerHTML+=ajax_notification_text;
document.body.appendChild(ajax_indicator_ele)}function createEventListener(a){"addEventListener"in a||(a.attachEvent?(a.addEventListener=function(b,c,d){a.attachEvent("on"+b,c)},a.removeEventListener=function(b,c,d){a.detachEvent("on"+b,c)}):(a.addEventListener=function(b,c,d){a["on"+b]=c},a.removeEventListener=function(b,c,d){a["on"+b]=null}))}function grabJumpToContent(){getXMLDocument(elk_prepareScriptUrl(elk_scripturl)+"action=xmlhttp;sa=jumpto;xml",onJumpReceived);return!1}
function onJumpReceived(a){var b=[],c,d=a.getElementsByTagName("elk")[0].getElementsByTagName("item");a=0;for(c=d.length;a<c;a++)b[b.length]={id:parseInt(d[a].getAttribute("id")),isCategory:"category"===d[a].getAttribute("type"),name:d[a].firstChild.nodeValue.removeEntities(),is_current:!1,childLevel:parseInt(d[a].getAttribute("childlevel"))};a=0;for(c=aJumpTo.length;a<c;a++)aJumpTo[a].fillSelect(b)}var aJumpTo=[];
function JumpTo(a){this.opt=a;this.dropdownList=null;this.showSelect();createEventListener(this.dropdownList);is_mobile&&is_touch?this.dropdownList.addEventListener("touchstart",grabJumpToContent):this.dropdownList.addEventListener("mouseenter",grabJumpToContent)}JumpTo.prototype.removeAll=function(){for(var a=this.dropdownList.options.length;0<a;a--)this.dropdownList.remove(a-1)};
JumpTo.prototype.showSelect=function(){for(var a="",b=this.opt.iCurBoardChildLevel;0<b;b--)a+=this.opt.sBoardChildLevelIndicator;""!==a&&(a+=this.opt.sBoardPrefix);document.getElementById(this.opt.sContainerId).innerHTML=this.opt.sJumpToTemplate.replace(/%select_id%/,this.opt.sContainerId+"_select").replace(/%dropdown_list%/,"<select "+(!0===this.opt.bDisabled?'disabled="disabled" ':"")+(void 0!==this.opt.sClassName?'class="'+this.opt.sClassName+'" ':"")+'name="'+(void 0!==this.opt.sCustomName?this.opt.sCustomName:
this.opt.sContainerId+"_select")+'" id="'+this.opt.sContainerId+'_select"><option value="'+(void 0!==this.opt.bNoRedirect&&!0===this.opt.bNoRedirect?this.opt.iCurBoardId:"?board="+this.opt.iCurBoardId+".0")+'">'+a+this.opt.sCurBoardName.removeEntities()+"</option></select>&nbsp;"+(void 0!==this.opt.sGoButtonLabel?'<input type="button" class="button_submit" value="'+this.opt.sGoButtonLabel+'" onclick="window.location.href = \''+elk_prepareScriptUrl(elk_scripturl)+"board="+this.opt.iCurBoardId+".0';\" />":
""));this.dropdownList=document.getElementById(this.opt.sContainerId+"_select")};
JumpTo.prototype.fillSelect=function(a){this.removeAll();is_mobile&&is_touch?this.dropdownList.removeEventListener("touchstart",grabJumpToContent):this.dropdownList.removeEventListener("mouseenter",grabJumpToContent);for(var b=document.createDocumentFragment(),c=document.createElement("optgroup"),d=0,e=a.length;d<e;d++){var f="";if(a[d].isCategory)c=document.createElement("optgroup"),c.label=a[d].name,b.appendChild(c);else{var g=a[d].childLevel;for(f="";0<g;g--)f+=this.opt.sBoardChildLevelIndicator;
""!==f&&(f+=this.opt.sBoardPrefix);g=document.createElement("option");var h=document.createElement("span");h.innerHTML=f+a[d].name;a[d].id===this.opt.iCurBoardId&&(g.selected="selected");g.appendChild(h);g.value=this.opt.bNoRedirect?a[d].id:"?board="+a[d].id+".0";c.appendChild(g)}}this.dropdownList.appendChild(b);this.opt.bNoRedirect||(this.dropdownList.onchange=function(){0<this.selectedIndex&&this.options[this.selectedIndex].value&&(window.location.href=elk_scripturl+this.options[this.selectedIndex].value.substr(-1===
elk_scripturl.indexOf("?")||"?"!==this.options[this.selectedIndex].value.substr(0,1)?0:1))});"funcOnBeforeCollapse"in this.opt&&(this.tmpMethod=this.opt.funcOnBeforeCollapse,this.tmpMethod(this),delete this.tmpMethod)};var aIconLists=[];
function IconList(a){this.opt=a;this.bListLoaded=!1;this.funcMousedownHandler=this.oContainerDiv=null;this.funcParent=this;this.iCurTimeout=this.iCurMessageId=0;"sAction"in this.opt&&null!==this.opt.sAction||(this.opt.sAction="messageicons;board="+this.opt.iBoardId);this.initIcons()}
IconList.prototype.initIcons=function(){for(var a=document.images.length-1,b=this.opt.sIconIdPrefix.length;0<=a;a--)document.images[a].id.substr(0,b)===this.opt.sIconIdPrefix&&setOuterHTML(document.images[a],'<div title="'+this.opt.sLabelIconList+'" onclick="'+this.opt.sBackReference+".openPopup(this, "+document.images[a].id.substr(b)+')" onmouseover="'+this.opt.sBackReference+'.onBoxHover(this, true)" onmouseout="'+this.opt.sBackReference+'.onBoxHover(this, false)" style="background: '+this.opt.sBoxBackground+
'; cursor: pointer; padding: 2px; margin: 0 auto; vertical-align: top"><img src="'+document.images[a].src+'" alt="'+document.images[a].alt+'" id="'+document.images[a].id+'" style="vertical-align: top; margin: 0 auto; padding: 0 2px;" /></div>')};
IconList.prototype.onBoxHover=function(a,b){a.style.border=b?this.opt.iBoxBorderWidthHover+"px solid "+this.opt.sBoxBorderColorHover:"";a.style.background=b?this.opt.sBoxBackgroundHover:this.opt.sBoxBackground;a.style.padding=b?2-this.opt.iBoxBorderWidthHover+"px":"2px"};
IconList.prototype.openPopup=function(a,b){this.iCurMessageId=b;this.bListLoaded||null!==this.oContainerDiv||(this.oContainerDiv=document.createElement("div"),this.oContainerDiv.id="iconList",this.oContainerDiv.style.display="none",this.oContainerDiv.style.cursor="pointer",this.oContainerDiv.style.position="absolute",this.oContainerDiv.style.background=this.opt.sContainerBackground,this.oContainerDiv.style.border=this.opt.sContainerBorder,this.oContainerDiv.style.padding="6px 0px",document.body.appendChild(this.oContainerDiv),
ajax_indicator(!0),sendXMLDocument.call(this,elk_prepareScriptUrl(elk_scripturl)+"action=xmlhttp;sa="+this.opt.sAction+";xml","",this.onIconsReceived),createEventListener(document.body));var c=elk_itemPos(a);this.oContainerDiv.style.top=c[1]+a.offsetHeight+"px";this.oContainerDiv.style.left=c[0]-1+"px";this.oClickedIcon=a;this.bListLoaded&&(this.oContainerDiv.style.display="block");document.body.addEventListener("mousedown",this.onWindowMouseDown,!1)};
IconList.prototype.onIconsReceived=function(a){a=a.getElementsByTagName("elk")[0].getElementsByTagName("icon");for(var b="",c=0,d=a.length;c<d;c++)b+='<span onmouseover="'+this.opt.sBackReference+'.onItemHover(this, true)" onmouseout="'+this.opt.sBackReference+'.onItemHover(this, false);" onmousedown="'+this.opt.sBackReference+".onItemMouseDown(this, '"+a[c].getAttribute("value")+'\');" style="padding: 2px 3px; line-height: 20px; border: '+this.opt.sItemBorder+"; background: "+this.opt.sItemBackground+
'"><img src="'+a[c].getAttribute("url")+'" alt="'+a[c].getAttribute("name")+'" title="'+a[c].firstChild.nodeValue+'" style="vertical-align: middle" /></span>';this.oContainerDiv.innerHTML=b;this.oContainerDiv.style.display="block";this.bListLoaded=!0;is_ie&&(this.oContainerDiv.style.width=this.oContainerDiv.clientWidth+"px");ajax_indicator(!1)};
IconList.prototype.onItemHover=function(a,b){a.style.background=b?this.opt.sItemBackgroundHover:this.opt.sItemBackground;a.style.border=b?this.opt.sItemBorderHover:this.opt.sItemBorder;0!==this.iCurTimeout&&window.clearTimeout(this.iCurTimeout);if(b)this.onBoxHover(this.oClickedIcon,!0);else this.iCurTimeout=window.setTimeout(this.opt.sBackReference+".collapseList();",500)};
IconList.prototype.onItemMouseDown=function(a,b){if(0!==this.iCurMessageId){ajax_indicator(!0);this.tmpMethod=getXMLDocument;var c=this.tmpMethod(elk_prepareScriptUrl(elk_scripturl)+"action=jsmodify;topic="+this.opt.iTopicId+";msg="+this.iCurMessageId+";"+elk_session_var+"="+elk_session_id+";icon="+b+";xml");delete this.tmpMethod;ajax_indicator(!1);c=c.responseXML.getElementsByTagName("elk")[0].getElementsByTagName("message")[0];0===c.getElementsByTagName("error").length&&(this.opt.bShowModify&&0!==
c.getElementsByTagName("modified").length&&null!==document.getElementById("modified_"+this.iCurMessageId)&&(document.getElementById("modified_"+this.iCurMessageId).innerHTML=c.getElementsByTagName("modified")[0].childNodes[0].nodeValue),this.oClickedIcon.getElementsByTagName("img")[0].src=a.getElementsByTagName("img")[0].src)}else this.oClickedIcon.getElementsByTagName("img")[0].src=a.getElementsByTagName("img")[0].src,"sLabelIconBox"in this.opt&&(document.getElementById(this.opt.sLabelIconBox).value=
b)};IconList.prototype.onWindowMouseDown=function(){for(var a=aIconLists.length-1;0<=a;a--)aIconLists[a].funcParent.tmpMethod=aIconLists[a].collapseList,aIconLists[a].funcParent.tmpMethod(),delete aIconLists[a].funcParent.tmpMethod};IconList.prototype.collapseList=function(){this.onBoxHover(this.oClickedIcon,!1);this.oContainerDiv.style.display="none";this.iCurMessageId=0;document.body.removeEventListener("mousedown",this.onWindowMouseDown,!1)};
function elk_itemPos(a){var b=0,c=0;if("offsetParent"in a)for(b=a.offsetLeft,c=a.offsetTop;a.offsetParent&&"object"===typeof a.offsetParent;)a=a.offsetParent,b+=a.offsetLeft,c+=a.offsetTop;else"x"in a&&(b=a.x,c=a.y);return[b,c]}function elk_prepareScriptUrl(a){return-1===a.indexOf("?")?a+"?":a+("?"===a.charAt(a.length-1)||"&"===a.charAt(a.length-1)||";"===a.charAt(a.length-1)?"":";")}var aOnloadEvents=[];
function addLoadEvent(a){"function"!==typeof a||"onload"in window&&"function"===typeof window.onload?0===aOnloadEvents.length?(aOnloadEvents[0]=window.onload,aOnloadEvents[1]=a,window.onload=function(){for(var a=0,c=aOnloadEvents.length;a<c;a++)if("function"===typeof aOnloadEvents[a])aOnloadEvents[a]();else"string"===typeof aOnloadEvents[a]&&eval(aOnloadEvents[a])}):aOnloadEvents[aOnloadEvents.length]=a:window.onload=a}
function elkSelectText(a,b){var c="boolean"===typeof b&&b?document.getElementById(a):a.parentNode.nextSibling;if("object"!==typeof c||null===c)return!1;if("createTextRange"in document.body){var d=document.body.createTextRange();d.moveToElementText(c);d.select()}else if(window.getSelection){d=window.getSelection();var e=document.createRange();e.selectNodeContents(c);d.removeAllRanges();d.addRange(e)}return!1}
function smc_saveEntities(a,b,c){var d;if("string"===typeof c){var e=0;for(d=document.forms[a].elements.length;e<d;e++)document.forms[a].elements[e].id.substr(0,c.length)===c&&(b[b.length]=document.forms[a].elements[e].name)}e=0;for(d=b.length;e<d;e++)b[e]in document.forms[a]&&("undefined"!==typeof post_box_name&&b[e]===post_box_name&&void 0!==$editor_data[post_box_name]?(document.forms[a][b[e]].value=$editor_data[post_box_name].val().replace(/&#/g,"&#38;#"),$editor_data[post_box_name].val(document.forms[a][b[e]].value)):
document.forms[a][b[e]].value=document.forms[a][b[e]].value.replace(/&#/g,"&#38;#"))}function pollOptions(){var a=document.getElementById("poll_expire");isEmptyText(a)||0===a.value?(document.forms[form_name].poll_hide[2].disabled=!0,document.forms[form_name].poll_hide[2].checked&&(document.forms[form_name].poll_hide[1].checked=!0)):document.forms[form_name].poll_hide[2].disabled=!1}
function generateDays(a){a="undefined"!==typeof a?a:"";var b=document.getElementById("day"+a);var c=document.getElementById("year"+a);a=document.getElementById("month"+a);var d=[31,28,31,30,31,30,31,31,30,31,30,31];d[1]=28;0===c.options[c.selectedIndex].value%4&&(d[1]=29);for(c=b.selectedIndex;b.options.length;)b.options[0]=null;a=d[a.value-1];for(d=1;d<=a;d++)b.options[b.length]=new Option(d,d);c<a&&(b.selectedIndex=c)}function toggleLinked(a){a.board.disabled=!a.link_to_board.checked}
function initSearch(){-1!==document.forms.searchform.search.value.indexOf("%u")&&(document.forms.searchform.search.value=decodeURI(document.forms.searchform.search.value))}function selectBoards(a,b,c){for(var d=!0,e=0,f=document.forms.length;e<f;e++)if(document.forms[e].name==b){aForm=document.forms[e];break}if("undefined"!=typeof aForm){for(b=0;b<a.length;b++)d=d&&aForm[c+"["+a[b]+"]"].checked;for(b=0;b<a.length;b++)aForm[c+"["+a[b]+"]"].checked=!d}}
function expandCollapse(a,b,c){a=$("#"+a);b=b||!1;c=c||300;b&&$("#"+b).attr("src",elk_images_url+(!0!==a.is(":hidden")?"/selected.png":"/selected_open.png"));a.slideToggle(c)}function initHighlightSelection(a){$("#"+a+' [name="def_language"]').on("click",function(b){$("#"+a+" .standard_row").removeClass("highlight2");$(this).parent().parent().addClass("highlight2")})}
function doAutoSubmit(a,b,c){var d="undefined"!==typeof c?c:"autoSubmit";if(0===a)document.forms[d].submit();else if(-1===a)return;document.forms[d].cont.value=b+" ("+a+")";a--;setTimeout(function(){doAutoSubmit(a,b,d)},1E3)};/*
 @name      ElkArte Forum
 @copyright ElkArte Forum contributors
 @license   BSD http://opensource.org/licenses/BSD-3-Clause

 @version 1.1
*/
function elk_codefix(){$(".bbc_code").each(function(){var a=$(this);a.get(0).scrollHeight>a.innerHeight()?(a.css("height",a.height()),a.css("max-height","none")):a.css("resize","none")})}
function toggleButtonAJAX(a,b,c){$.ajax({type:"GET",url:a.href+";xml;api",context:document.body,beforeSend:ajax_indicator(!0)}).done(function(d){if(""!==d){var e=$(d).find("elk")[0];if(0===e.getElementsByTagName("error").length){var f=e.getElementsByTagName("text"),g=e.getElementsByTagName("url"),h=e.getElementsByTagName("confirm");if(1===h.length)var k=h[0].firstChild.nodeValue.removeEntities();$("."+a.className.replace(/(list|link)level\d/g,"").trim()).each(function(){1===f.length&&$(this).html("<span>"+
f[0].firstChild.nodeValue.removeEntities()+"</span>");1===g.length&&$(this).attr("href",g[0].firstChild.nodeValue.removeEntities());"undefined"!==typeof k&&eval(b+"= '"+k.replace(/[\\']/g,"\\$&")+"'")})}else 0!==e.getElementsByTagName("text").length&&alert(e.getElementsByTagName("text")[0].firstChild.nodeValue.removeEntities()),0!==e.getElementsByTagName("url").length&&(window.location.href=e.getElementsByTagName("url")[0].firstChild.nodeValue);"undefined"!==typeof c&&c(a,d,e.getElementsByTagName("error"))}}).fail(function(){}).always(function(){ajax_indicator(!1)});
return!1}
function toggleHeaderAJAX(a,b){ajax_indicator(!0);$.ajax({type:"GET",url:a.href+";xml;api",context:document.body,beforeSend:ajax_indicator(!0)}).done(function(a){if(""!==a){var c=$(a).find("elk")[0];0===c.getElementsByTagName("error").length&&(a=c.getElementsByTagName("text"),c=c.getElementsByTagName("body"),$("#"+b+" .pagesection").remove(),$("#"+b+" .topic_listing").remove(),$("#"+b+" .topic_sorting").remove(),1===a.length&&$("#"+b+" #unread_header").html(a[0].firstChild.nodeValue.removeEntities()),1===
c.length&&$('<div class="board_row centertext">{body}</div>'.replace("{body}",c[0].firstChild.nodeValue.removeEntities())).insertAfter("#unread_header"))}}).fail(function(){}).always(function(){ajax_indicator(!1)})}function notifyButton(a){return"undefined"===typeof notification_topic_notice||confirm(notification_topic_notice)?toggleButtonAJAX(a,"notification_topic_notice",function(a,c,d){0<d.length||(a=-1!==a.href.indexOf("sa=on")?1:0,$("input[name='notify']").val(a))}):!1}
function notifyboardButton(a){if("undefined"!==typeof notification_board_notice&&!confirm(notification_board_notice))return!1;toggleButtonAJAX(a,"notification_board_notice");return!1}function unwatchButton(a){toggleButtonAJAX(a);return!1}function markboardreadButton(a){if(!confirm(txt_mark_as_read_confirm))return!1;toggleButtonAJAX(a);$(".new_posts").remove();return!1}
function markallreadButton(a){if(!confirm(txt_mark_as_read_confirm))return!1;toggleButtonAJAX(a);$(".new_posts").remove();$(".board_icon").each(function(){$(this).removeClass("i-board-new i-board-sub").addClass("i-board-off")});$(".board_new_posts").removeClass("board_new_posts");return!1}function markunreadButton(a){if(!confirm(txt_mark_as_read_confirm))return!1;toggleHeaderAJAX(a,"main_content_section");return!1}var relative_time_refresh=0;
function updateRelativeTime(){relative_time_refresh=36E5;$("time").each(function(){var a=new relativeTime(1E3*$(this).data("timestamp"),oRttime.referenceTime);if(a.seconds())$(this).text(oRttime.now),relative_time_refresh=Math.min(relative_time_refresh,1E4);else if(a.minutes()){var b=1<a.deltaTime?oRttime.minutes:oRttime.minute;$(this).text(b.replace("%s",a.deltaTime));relative_time_refresh=Math.min(relative_time_refresh,6E4)}else a.hours()?(b=1<a.deltaTime?oRttime.hours:oRttime.hour,$(this).text(b.replace("%s",
a.deltaTime)),relative_time_refresh=Math.min(relative_time_refresh,36E5)):a.days()?(b=1<a.deltaTime?oRttime.days:oRttime.day,$(this).text(b.replace("%s",a.deltaTime)),relative_time_refresh=Math.min(relative_time_refresh,36E5)):a.weeks()?(b=1<a.deltaTime?oRttime.weeks:oRttime.week,$(this).text(b.replace("%s",a.deltaTime)),relative_time_refresh=Math.min(relative_time_refresh,36E5)):a.months()?(b=1<a.deltaTime?oRttime.months:oRttime.month,$(this).text(b.replace("%s",a.deltaTime)),relative_time_refresh=
Math.min(relative_time_refresh,36E5)):a.years()&&(b=1<a.deltaTime?oRttime.years:oRttime.year,$(this).text(b.replace("%s",a.deltaTime)),relative_time_refresh=Math.min(relative_time_refresh,36E5))});oRttime.referenceTime+=relative_time_refresh;setTimeout(function(){updateRelativeTime()},relative_time_refresh)}
function relativeTime(a,b){if("undefined"===typeof b)this.dateTo=new Date;else if("NaN"==parseInt(b)){var c=b.split(/\D/);this.dateTo=new Date(c[0],--c[1],c[2],c[3],c[4])}else this.dateTo=new Date(b);"NaN"==parseInt(a)?(c=a.split(/\D/),this.dateFrom=new Date(c[0],--c[1],c[2],c[3],c[4])):this.dateFrom=new Date(a);this.time_text="";this.past_time=(this.dateTo-this.dateFrom)/1E3;this.deltaTime=0}relativeTime.prototype.seconds=function(){return 60>this.past_time?(this.deltaTime=this.past_time,!0):!1};
relativeTime.prototype.minutes=function(){return 60<=this.past_time&&60>Math.round(this.past_time/60)?(this.deltaTime=Math.round(this.past_time/60),!0):!1};relativeTime.prototype.hours=function(){return 60<=Math.round(this.past_time/60)&&24>Math.round(this.past_time/3600)?(this.deltaTime=Math.round(this.past_time/3600),!0):!1};relativeTime.prototype.days=function(){return 24<=Math.round(this.past_time/3600)&&7>Math.round(this.past_time/86400)?(this.deltaTime=Math.round(this.past_time/86400),!0):!1};
relativeTime.prototype.weeks=function(){return 7<=Math.round(this.past_time/86400)&&30>Math.round(this.past_time/86400)?(this.deltaTime=Math.round(this.past_time/86400/7),!0):!1};relativeTime.prototype.months=function(){return 30<=Math.round(this.past_time/86400)&&12>Math.round(this.past_time/2592E3)?(this.deltaTime=Math.round(this.past_time/2592E3),!0):!1};
relativeTime.prototype.years=function(){return 12<=Math.round(this.past_time/2592E3)?(this.deltaTime=this.dateTo.getFullYear()-this.dateFrom.getFullYear(),!0):!1};
function revalidateMentions(a,b){for(var c,d,e,f,g=-1,h=/[ \.,;!\?'-\\\/="]/i,k=0,m=all_elk_mentions.length;k<m;k++)if(all_elk_mentions[k].selector===b||all_elk_mentions[k].selector==="#"+b){all_elk_mentions[k].oOptions.isPlugin?(f=$editor_data[all_elk_mentions[k].selector],c=f.opts.mentionOptions.cache.names,d=f.opts.mentionOptions.cache.queries,e=f.getText().replace(/[\u00a0\r\n]/g," "),f=$(f.opts.mentionOptions.cache.mentions)):(c=all_elk_mentions[k].oMention.cached_names,d=all_elk_mentions[k].oMention.cached_queries,
e=document.forms[a][b].value.replace(/[\u00a0\r\n]/g," "),f=$(all_elk_mentions[k].oMention.mentions));e=" "+e+" ";$(f).find("input").each(function(a,b){var c=$(b).data("name");var d=e.indexOf(c);"undefined"!==typeof c&&(-1===d?$(b).remove():(c=e.charAt(d+c.length),d=e.charAt(d-1),""!==c&&0!==c.search(h)?$(b).remove():""!==d&&0!==d.search(h)&&$(b).remove()))});for(var n=0,p=d.length;n<p;n++)for(var l=c[d[n]],q=0,u=l.length;q<u;q++)checkWordOccurrence(e,l[q].name)&&(g=e.indexOf(" @"+l[q].name),-1!==
g&&0===e.charAt(g+2+l[q].name.length+1).search(h)&&f.append($('<input type="hidden" name="uid[]" />').val(l[q].id)))}}function checkWordOccurrence(a,b){return(new RegExp("\\b"+b+"\\b","i")).test(a)}var all_elk_mentions=[];function add_elk_mention(a,b){all_elk_mentions.hasOwnProperty(a)||("undefined"===typeof b&&(b={}),b.selector=a,all_elk_mentions[all_elk_mentions.length]={selector:a,oOptions:b})}
(function(a){a.fn.elkSortable=function(b){a.fn.elkSortable.oDefaultsSettings={opacity:.7,cursor:"move",axis:"y",scroll:!0,containment:"parent",delay:150,handle:"",href:"",tolerance:"intersect",setorder:"serialize",placeholder:"",preprocess:"",tag:"#table_grid_sortable",connect:"",sa:"",title:"",error:"",token:""};var c=a.extend({},a.fn.elkSortable.oDefaultsSettings,b||{});"undefined"===typeof c.infobar&&(c.infobar=new ElkInfoBar("sortable_bar",{error_class:"errorbox",success_class:"infobox"}));a("<div id='errorContainer'><div/>").appendTo("body");
a("#errorContainer").css({display:"none"});a(c.tag).sortable({opacity:c.opacity,cursor:c.cursor,axis:c.axis,handle:c.handle,containment:c.containment,connectWith:c.connect,placeholder:c.placeholder,tolerance:c.tolerance,delay:c.delay,scroll:c.scroll,helper:function(b,e){var d=e.children(),g=e.clone();g.children().each(function(){a(this).replaceWith(function(){return a("<span />",{html:a(this).html()})})});g.children().each(function(b){return a(this).width(d.eq(b).width()).css("display","inline-block")});
a("body").append('<div id="clone" class="'+c.placeholder+'">'+g.html()+"</div>");var h=a("#clone");h.hide();setTimeout(function(){h.appendTo(e.parent());h.show()},1);return h},update:function(b,e){var d="",g=e.item.attr("id"),h=[],k=e.item.parent().attr("id");if(""!==c.preprocess)window[c.preprocess]();"inorder"===c.setorder?(a(c.tag).find("li").each(function(){var b=a(this).attr("id").split("_");h.push({name:b[0]+"[]",value:b[1]})}),d=a.param(h)):a(c.tag).each(function(){d=""===d?d+a(this).sortable(c.setorder):
d+("&"+a(this).sortable(c.setorder))});d+="&"+elk_session_var+"="+elk_session_id;d+="&order=reorder";d+="&moved="+g;d+="&received="+k;""!==c.token&&(d+="&"+c.token.token_var+"="+c.token.token_id);a.ajax({type:"POST",url:elk_scripturl+"?action=xmlhttp;sa="+c.sa+";xml",dataType:"xml",data:d}).fail(function(a,b,d){c.infobar.isError();c.infobar.changeText(b).showBar();""!==c.href&&setTimeout(function(){window.location.href=elk_scripturl+c.href},1E3)}).done(function(b,d,e){e=a("#errorContent");var f=a("#errorContainer");
0!==a(b).find("error").length?(f.append('<p id="errorContent"></p>'),e.html(a(b).find("error").text()),e.dialog({autoOpen:!0,title:c.title,modal:!0,close:function(a,b){""!==c.href&&(window.location.href=elk_scripturl+c.href)}})):0!==a(b).find("elk").length?(c.infobar.isSuccess(),c.infobar.changeText(a(b).find("elk > orders > order").text()).showBar()):(f.append('<p id="errorContent"></p>'),e.html(c.error+" : "+d),e.dialog({autoOpen:!0,title:c.title,modal:!0}))}).always(function(b,d,e){0!==a(b).find("elk > tokens > token").length&&
(c.token.token_id=a(b).find("tokens").find('[type="token"]').text(),c.token.token_var=a(b).find("tokens").find('[type="token_var"]').text())})}})}})(jQuery);
function setBoardIds(){$("[id^=category_]").each(function(){var a=$(this).attr("id").split("category_"),b=$(this).find("ul");1===b.length?0===$(b).find("li").length?$(b).append('<li id="cbp_'+a+',-1,-1"></li>'):$(b).find("li:not(:has(ul))").append('<ul class="nolist elk_droppings"></ul>'):$(b).find("li:not(:has(ul))").append('<ul class="nolist elk_droppings"></ul>');$(this).find("ul:parent").each(function(b,d){var c=$(this).parent("li").attr("id"),f=0;"undefined"!==typeof c&&(f=c.split(","),f=f[1]);
$(this).find("li").each(function(b,c){var d=$(c).attr("id").split(",");$(c).removeAttr("id");d="cbp_"+a[1]+","+d[1]+","+f;$(c).attr("id",d)})})})}
(function(a){a.fn.expand_pages=function(){function b(c){var d=a(c.closest(".linavPages")),e=d.prev().clone(),f=e.find("a").clone(),g=c.clone(),h=c.data("perpage"),k=c.data("firstpage"),m=c.data("lastpage"),n=c.data("baseurl");c=eval(c.data("baseurl"));var p,l=0,q=0;10<(m-k)/h&&(q=m,m=k+10*h);for(l=m;l>k;l-=h){var u=f.clone(),t=e.clone();u.attr("href",c.replace("%1$d",l-h)).text(l/h);t.find("a").each(function(){a(this).replaceWith(u[0])});d.after(t);"undefined"===typeof p&&(p=t)}d.remove();0<q&&(g.find("#expanded_pages_container").each(function(){a(this).remove()}),
g.on("click",function(c){var d=a(this);c.preventDefault();b(d);d.off("mouseenter focus")}).on("mouseenter focus",function(){hover_expand(a(this))}).data("perpage",h).data("firstpage",m).data("lastpage",q).data("baseurl",n),p.after(g))}this.attr("tabindex",0).on("click",function(c){var d=a(this);c.preventDefault();b(d)})}})(jQuery);
(function(a){a.fn.SiteTooltip=function(b){a.fn.SiteTooltip.oDefaultsSettings={followMouse:1,hoverIntent:{sensitivity:10,interval:650,timeout:50},positionTop:12,positionLeft:12,tooltipID:"site_tooltip",tooltipTextID:"site_tooltipText",tooltipClass:"tooltip",tooltipSwapClass:"site_swaptip",tooltipContent:"html"};var c=a.extend({},a.fn.SiteTooltip.oDefaultsSettings,b||{});a(this).each(function(){var b=a('<span class="'+c.tooltipSwapClass+'">'+this.title+"</span>").hide();a(this).append(b).attr("title",
"")});var d=function(b){var d=0,e=0,f=a("#"+c.tooltipID);b||(b=window.event);if(b.pageX||b.pageY)d=b.pageX,e=b.pageY;else if(b.clientX||b.clientY)d=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;b=d+c.positionLeft;e+=c.positionTop;d=f.width();var m=f.height(),n=a(window).scrollLeft(),p=a(window).scrollTop(),l=a(window).width()-24,q=a(window).height()-24;e+m>p+q&&b+d>n+l?(b=b-d-45,e=e-m-45):b+d>n+l?b-=b+
d-(n+l)+24:e+m>p+q&&(e-=e+m-(p+q)+24);f.css({left:b+"px",top:e+"px"})},e=function(){a("#"+c.tooltipID).fadeOut(175,function(){a(this).trigger("unload").remove()})};return this.each(function(){function b(b){if(a(this).children("."+c.tooltipSwapClass).text()){a("body").append('<div id="'+c.tooltipID+'" class="'+c.tooltipClass+'"><div id="'+c.tooltipTextID+'" class="hide"></div></div>');var e=a("#"+c.tooltipTextID);"html"===c.tooltipContent?e.html(a(this).children("."+c.tooltipSwapClass).html()):e.text(a(this).children("."+
c.tooltipSwapClass).text());a("#"+c.tooltipID+" #"+c.tooltipTextID).slideDown(150);d(b)}return!1}function g(a){e(this);return!1}a.fn.hoverIntent?a(this).hoverIntent({sensitivity:c.hoverIntent.sensitivity,interval:c.hoverIntent.interval,over:b,timeout:c.hoverIntent.timeout,out:g}):a(this).hover(b,g);if(c.followMouse)a(this).on("mousemove",function(a){d(a);return!1});a(this).on("click",function(){e(this);return!0})})}})(jQuery);var error_txts={};
function errorbox_handler(a){this.opt=a;this.oError_box=null;this.oErrorHandle=window;this.evaluate=!1;this.init()}
errorbox_handler.prototype.init=function(){void 0!==this.opt.check_id?this.oChecks_on=$(document.getElementById(this.opt.check_id)):void 0!==this.opt.selector?this.oChecks_on=this.opt.selector:void 0!==this.opt.editor&&(this.oChecks_on=eval(this.opt.editor),this.evaluate=!0);this.oErrorHandle.instanceRef=this;null===this.oError_box&&(this.oError_box=$(document.getElementById(this.opt.error_box_id)));if(!1===this.evaluate)this.oChecks_on.attr("onblur",this.opt.self+".checkErrors()"),this.oChecks_on.attr("onkeyup",
this.opt.self+".checkErrors()");else{var a=this.opt.self;$(function(){var b=eval(a);$editor_data[b.opt.editor_id].addEvent(b.opt.editor_id,"keyup",function(){b.checkErrors()})})}};errorbox_handler.prototype.boxVal=function(){return!1===this.evaluate?this.oChecks_on.val():this.oChecks_on()};
errorbox_handler.prototype.checkErrors=function(){var a=this.opt.error_checks.length;if(0!==a){for(var b=0;b<a;b++){var c=$(document.getElementById(this.opt.error_box_id+"_"+this.opt.error_checks[b].code));this.opt.error_checks[b].efunction(this.boxVal())?this.addError(c,this.opt.error_checks[b].code):this.removeError(this.oError_box,c)}this.oError_box.attr("class","errorbox")}0===this.oError_box.find("li").length?this.oError_box.slideUp():this.oError_box.slideDown()};
errorbox_handler.prototype.addError=function(a,b){0===a.length&&(""===$.trim(this.oError_box.children("#"+this.opt.error_box_id+"_list").html())&&this.oError_box.append("<ul id='"+this.opt.error_box_id+"_list'></ul>"),$(document.getElementById(this.opt.error_box_id+"_list")).append('<li style="display:none;" id=\''+this.opt.error_box_id+"_"+b+"' class='error'>"+error_txts[b]+"</li>"),$(document.getElementById(this.opt.error_box_id+"_"+b)).slideDown())};
errorbox_handler.prototype.removeError=function(a,b){0!==b.length&&b.slideUp(function(){b.remove();0===a.find("li").length&&a.slideUp()})};
function addAnotherOption(a,b,c,d){b.type=b.type||"text";b["class"]=b["class"]||"input_text";b.size=b.size||"20";c.type=c.type||"text";c["class"]=c["class"]||"input_text";c.size=c.size||"20";d=d||"";var e=document.createElement("dt"),f=document.createElement("input");f.name=b.name;f.type=b.type;f.setAttribute("class",b["class"]);f.size=b.size;e.appendChild(f);b=document.createElement("dd");f=""===d?document.createElement("input"):document.createElement("select");f.name=c.name;f.type=c.type;f.size=
c.size;f.setAttribute("class",c["class"]);b.appendChild(f);if(""!==d){var g;for(g in d){var h=d[g];c=document.createElement("option");c.name="option";c.value=h.id;c.innerHTML=h.name;f.appendChild(c)}}a=document.getElementById(a);a.parentNode.insertBefore(e,a);a.parentNode.insertBefore(b,a)}
function toggle_mlsearch_opt(){var a=$("#mlsearch_options");a.is(":visible")||(a.fadeIn("fast"),$("body").on("click",mlsearch_opt_hide),$("#mlsearch_options, #mlsearch_input").off("click",mlsearch_opt_hide).on("click",function(a){a.stopPropagation()}))}function mlsearch_opt_hide(){$("body").off("click",mlsearch_opt_hide);$("#mlsearch_options").slideToggle("fast")}
function loadAddNewPoll(a,b,c){if("undefined"===typeof b)return!0;var d=$("#post_header").closest("form"),e=$("#poll_main, #poll_options");if($(a).val()===poll_add){if($(a).val(poll_remove),a=$("#icon"),"xx"===a.val()&&a.val("poll").change(),d.attr("action",d.attr("action")+";poll"),0<$("#poll_main").length)return e.find("input").each(function(){"required"===$(this).data("required")&&$(this).attr("required","required")}),e.toggle(),!1}else return b=$("#icon"),"poll"===b.val()&&b.val("xx").change(),
d.attr("action",d.attr("action").replace(";poll","")),e.hide().find("input").each(function(){"required"===$(this).attr("required")&&($(this).data("required","required"),$(this).removeAttr("required"))}),$(a).val(poll_add),!1;$.ajax({url:elk_scripturl+"?action=poll;sa=interface;xml;board="+b,type:"GET",dataType:"html",beforeSend:ajax_indicator(!0)}).done(function(a,b,d){var e=0;b=0;for(d=document.forms[c].elements.length;b<d;b++)e=Math.max(e,document.forms[c].elements[b].tabIndex);$("#post_header").after(a);
$("#poll_main input, #poll_options input").each(function(){$(this).attr("tabindex",++e)});$("#poll_main legend, #poll_options legend").on("click",function(){$(this).siblings().slideToggle("fast");$(this).parent().toggleClass("collapsed")}).each(function(){$(this).data("collapsed")&&($(this).siblings().css({display:"none"}),$(this).parent().toggleClass("collapsed"))})}).always(function(){ajax_indicator(!1)});return!1}
function disableAutoComplete(){window.onload=function(){$("input[type=email], input[type=password], .input_text, .input_clear").attr("autocomplete","off");setTimeout(function(){$("input[type=password], .input_clear").val(" ").val("")},1)}}
(function(){var a=function(a){a=a?a:{};var b=[],d=0,e=function(a){for(var c=0;c<b.length;c++)b[c].send(a)},f=function(){0!==b.length&&$.ajax({url:elk_scripturl+"?action=mentions;sa=fetch;api=json;lastsent="+d}).done(function(b){""!==b&&(e(b),d=b.timelast);setTimeout(function(){f()},a.delay)})};(function(a){"undefined"===typeof a.delay&&(a.delay=15E3);setTimeout(function(){f()},a.delay)})(a);return{add:function(a){b.push(a)}}};"undefined"!==typeof define&&define.amd?define([],function(){return a}):
"undefined"!==typeof module&&module.exports?module.exports=a:this.ElkNotifications=a})();var ElkNotifier=new ElkNotifications;
(function(){var a=function(a,c,d){$.extend(d,{inlineSelector:".inline_insert",data:"attachid",addAfter:"label"});var b=[];return{addInterface:function(a,e){if("undefined"!==typeof d.trigger)var f=d.trigger.clone();else f=$("<a />"),"undefined"!==typeof d.triggerClass&&f.addClass(d.triggerClass);f.on("click",function(a){a.preventDefault();$editor_data[c].insertText("[attach]"+e+"[/attach]",!1,!0)}).attr("id","inline_attach_"+e).data("attachid",e);a.after(f);b.push(f)},removeAttach:function(a){var c=
[],d;for(d=0;d<b.length&&b[d].data("attachid")!=a;d++)c.push(b[d]);for(d++;d<b.length;d++)c.push(b[d]);b=c;$("#inline_attach_"+a).remove()}}};"undefined"!==typeof define&&define.amd?define([],function(){return a}):"undefined"!==typeof module&&module.exports?module.exports=a:this.ElkInlineAttachments=a})();
(function(){var a=function(a,c){c=$.extend({text:"","class":"ajax_infobar",hide_delay:4E3,error_class:"error",success_class:"success"},c);var b=$("#"+a),e=null,f=function(a){b.addClass(a);return this},g=function(a){b.removeClass(a);return this},h=function(){clearTimeout(e);b.slideUp();return this};(function(a,c){clearTimeout(e);0===b.length&&(b=$('<div id="'+a+'" class="'+c["class"]+' hide" />'),$("body").append(b),b.attr("id",a),b.addClass(c["class"]),b.text(c.text))})(a,c);return{changeText:function(a){clearTimeout(e);
b.html(a);return this},addClass:f,removeClass:g,showBar:function(){clearTimeout(e);b.fadeIn();0!==c.hide_delay&&(e=setTimeout(function(){h()},c.hide_delay));return this},isError:function(){g(c.success_class);f(c.error_class)},isSuccess:function(){g(c.error_class);f(c.success_class)},hide:h}};"undefined"!==typeof define&&define.amd?define([],function(){return a}):"undefined"!==typeof module&&module.exports?module.exports=a:this.ElkInfoBar=a})();$(function(){use_click_menu?$("#main_menu, ul.admin_menu, ul.sidebar_menu, ul.poster, ul.quickbuttons, #sort_by").superclick({speed:150,animation:{opacity:"show",height:"toggle"},speedOut:0,activeClass:"sfhover"}):$("#main_menu, ul.admin_menu, ul.sidebar_menu, ul.poster, ul.quickbuttons, #sort_by").superfish({delay:300,speed:175,hoverClass:"sfhover"});$("a[href='#top']").on("click",function(a){a.preventDefault();$("html,body").animate({scrollTop:0},1200)});$("a[href='#bot']").on("click",function(a){a.preventDefault();
a=$("#bot");var b=a.height();$("html,body").animate({scrollTop:a.offset().top+b-$(window).height()},1200)});(!is_mobile&&!is_touch||use_click_menu)&&$(".preview").SiteTooltip({hoverIntent:{sensitivity:10,interval:750,timeout:50}});$("a.bbc_link img.bbc_img").parent().css("border","0");"function"===typeof elk_codefix&&elk_codefix();$(".expand_pages").expand_pages();$(document).on("click","legend",function(){$(this).siblings().slideToggle("fast");$(this).parent().toggleClass("collapsed")});$("legend",
function(){$(this).data("collapsed")&&$(this).click()});$(".spoilerheader").click(function(){$(this).next().children().slideToggle("fast")});$("[data-lightboximage]").on("click.elk_lb",function(a){a.preventDefault();expandThumbLB($(this).data("lightboximage"),$(this).data("lightboxmessage"))});$("img").each(function(){if(!1===$(this).hasClass("bbc_img resized"))return!0;$(this).css({cursor:"pointer"});$(this).on("click.elk_bbc",function(){var a=$(this);$.isEmptyObject(a.data("bbc_img"))?(a.data("bbc_img",
{width:a.css("width"),height:a.css("height"),"max-width":a.css("max-width"),"max-height":a.css("max-height")}),a.css({width:"auto"===a.css("width")?null:"auto"}),a.css({height:"auto"===a.css("height")?null:"auto"}),a.css({"max-height":"none"}),a.css({"max-width":"100%"}),a.wrap('<div style="overflow:auto;display:inline-block;"></div>')):(a.css({width:a.data("bbc_img").width}),a.css({height:a.data("bbc_img").height}),a.css({"max-width":a.data("bbc_img")["max-width"]}),a.css({"max-height":a.data("bbc_img")["max-height"]}),
a.removeData("bbc_img"),a.unwrap(),a.css({"max-width":"100%"}))})});$(".hamburger_30").click(function(a){a.preventDefault();a=$(this).data("id");$("#"+a).addClass("visible");$(this).addClass("visible")})});
function elk_addButton(a,b,c){a=document.getElementById(a);b=a.getElementsByTagName("span");0<b.length&&(b=b[b.length-1],b.className=b.className.replace(/\s*last/,"position_holder"));a=a.getElementsByTagName("ul")[0];b=document.createElement("li");var d=document.createAttribute("role");d.value="menuitem";b.setAttributeNode(d);"sId"in c&&(b.id=c.sId);b.innerHTML='<a class="linklevel1" href="'+c.sUrl+'" '+("sCustom"in c?c.sCustom:"")+'><span class="last"'+("sId"in c?' id="'+c.sId+'_text"':"")+">"+c.sText+
"</span></a>";a.appendChild(b)};function elkRegister(a,b,c){this.verificationFields=[];this.verificationFieldLength=0;this.textStrings=c?c:[];this.passwordLevel=b?b:0;this.displayChanged=!1;this.autoSetup(a)}
elkRegister.prototype.addVerificationField=function(a,b){if(document.getElementById(b)){var c=document.getElementById(b),d=document.getElementById(b+"_img")?document.getElementById(b+"_img"):!1,e=document.getElementById(b+"_div")?document.getElementById(b+"_div"):!1,f=!1;"pwmain"===a?f="refreshMainPassword":"pwverify"===a?f="refreshVerifyPassword":"username"===a?f="refreshUsername":"displayname"===a?f="refreshDisplayname":"reserved"===a&&(f="refreshMainPassword");var g="reserved"===a?a+this.verificationFieldLength:
a;this.verificationFields[g]=Array(6);this.verificationFields[g][0]=b;this.verificationFields[g][1]=c;this.verificationFields[g][2]=d;this.verificationFields[g][3]=e;this.verificationFields[g][4]=a;this.verificationFields[g][5]=c.className;this.verificationFieldLength++;if(f){var h=this;createEventListener(c);c.addEventListener("keyup",function(a){h[f].call(h,a)},!1);this[f]();c.addEventListener("blur",function(a){h.autoCheckUsername.call(h,a)},!1)}e&&(e.style.display="inline")}};
elkRegister.prototype.addUsernameSearchTrigger=function(a){a=document.getElementById(a);var b=this;createEventListener(a);a.addEventListener("click",function(a){b.checkUsername.call(b,a)},!1)};
elkRegister.prototype.autoSetup=function(a){if(!document.getElementById(a))return!1;for(var b,c,d=0,e=document.getElementById(a).elements.length;d<e;d++)b=document.getElementById(a).elements[d],-1===b.id.indexOf("autov")||"text"!==b.type&&"password"!==b.type||(c=0,-1!==b.id.indexOf("username")?c="username":-1!==b.id.indexOf("displayname")?c="displayname":-1!==b.id.indexOf("pwmain")?c="pwmain":-1!==b.id.indexOf("pwverify")?c="pwverify":-1!==b.id.indexOf("reserve")&&(c="reserved"),c&&this.addVerificationField(c,
b.id),"username"===c&&document.getElementById(b.id+"_link")&&this.addUsernameSearchTrigger(b.id+"_link"));return!0};
elkRegister.prototype.refreshMainPassword=function(a){if(!this.verificationFields.pwmain)return!1;var b=this.verificationFields.pwmain[1].value,c="";if(8>b.length&&1<=this.passwordLevel||4>b.length)c="password_short";if(1<=this.passwordLevel){this.verificationFields.username&&this.verificationFields.username[1].value&&-1!==b.indexOf(this.verificationFields.username[1].value)&&(c="password_reserved");for(var d in this.verificationFields)"reserved"===this.verificationFields[d][4]&&this.verificationFields[d][1].value&&
-1!==b.indexOf(this.verificationFields[d][1].value)&&(c="password_reserved");1<this.passwordLevel&&(b===b.toLowerCase()&&(c="password_numbercase"),b.match(/(\D\d|\d\D)/)||(c="password_numbercase"))}b=""===c;""===c&&(c="password_valid");this.setVerificationImage(this.verificationFields.pwmain[2],b,this.textStrings[c]?this.textStrings[c]:"");this.verificationFields.pwmain[1].className=this.verificationFields.pwmain[5]+" "+(b?"valid_input":"invalid_input");this.verificationFields.pwverify&&!a&&this.refreshVerifyPassword();
return b};
elkRegister.prototype.refreshVerifyPassword=function(){if(!this.verificationFields.pwmain)return!1;var a=this.verificationFields.pwmain[1].value===this.verificationFields.pwverify[1].value&&this.refreshMainPassword(!0);this.setVerificationImage(this.verificationFields.pwverify[2],a,this.textStrings[1===a?"password_valid":"password_no_match"]?this.textStrings[1===a?"password_valid":"password_no_match"]:"");this.verificationFields.pwverify[1].className=this.verificationFields.pwverify[5]+" "+(a?"valid_input":
"invalid_input");return!0};
elkRegister.prototype.refreshUsername=function(){if(!this.verificationFields.username)return!1;"undefined"!==typeof this.verificationFields.displayname&&!1===this.displayChanged&&(this.verificationFields.displayname[1].value=this.verificationFields.username[1].value);this.verificationFields.username[1].className&&(this.verificationFields.username[1].className=this.verificationFields.username[5]);this.setVerificationImage(this.verificationFields.username[2],"check",this.textStrings.username_check?this.textStrings.username_check:
"");this.refreshMainPassword();return!0};
elkRegister.prototype.refreshDisplayname=function(a){if(!this.verificationFields.displayname)return!1;"undefined"!==typeof a&&!(a.altKey||a.ctrlKey||a.shiftKey)&&48<a.which&&(this.displayChanged=!0);this.verificationFields.displayname[1].className&&(this.verificationFields.displayname[1].className=this.verificationFields.displayname[5]);this.setVerificationImage(this.verificationFields.displayname[2],"check",this.textStrings.username_check?this.textStrings.username_check:"");this.refreshMainPassword();
return!0};elkRegister.prototype.autoCheckUsername=function(){this.checkUsername(!0)};
elkRegister.prototype.checkUsername=function(a){if(!this.verificationFields.username)return!1;var b=this.verificationFields.username[1].value,c="undefined"!==typeof this.verificationFields.displayname?this.verificationFields.displayname[1].value:"";if(!b&&!c)return!1;a||ajax_indicator(!0);a=b.php_urlencode();sendXMLDocument.call(this,elk_prepareScriptUrl(elk_scripturl)+"action=register;sa=usernamecheck;xml;username="+a,null,this.checkUsernameCallback);c&&(c=c.php_urlencode(),sendXMLDocument.call(this,
elk_prepareScriptUrl(elk_scripturl)+"action=register;sa=usernamecheck;xml;username="+c,null,this.checkDisplaynameCallback));return!0};
elkRegister.prototype.checkUsernameCallback=function(a){var b=!0;a.getElementsByTagName("username")&&(b=parseInt(a.getElementsByTagName("username")[0].getAttribute("valid")));a=this.textStrings[1===b?"username_valid":"username_invalid"]?this.textStrings[1===b?"username_valid":"username_invalid"]:"";this.verificationFields.username[1].className=this.verificationFields.username[5]+" "+(1===b?"valid_input":"invalid_input");this.setVerificationImage(this.verificationFields.username[2],1===b,a);ajax_indicator(!1)};
elkRegister.prototype.checkDisplaynameCallback=function(a){var b=!0;a.getElementsByTagName("username")&&(b=parseInt(a.getElementsByTagName("username")[0].getAttribute("valid")));a=this.textStrings[1===b?"username_valid":"username_invalid"]?this.textStrings[1===b?"username_valid":"username_invalid"]:"";this.verificationFields.displayname[1].className=this.verificationFields.displayname[5]+" "+(1===b?"valid_input":"invalid_input");this.setVerificationImage(this.verificationFields.displayname[2],1===
b,a);ajax_indicator(!1)};elkRegister.prototype.setVerificationImage=function(a,b,c){if(!a)return!1;c||(c="*");a.alt=c;a.title=c;a.className="icon "+(b?"check"===b?"i-help":"i-check":"i-warn");return!0};
function updateAuthMethod(){var a=document.getElementById("auth_openid")&&document.getElementById("auth_openid").checked?"openid":"passwd";if(!document.getElementById("auth_openid"))return!0;var b=document.getElementById("auth_openid").form.id;document.forms[b].openid_url.disabled="openid"!==a;document.forms[b].elk_autov_pwmain.disabled="passwd"!==a;document.forms[b].elk_autov_pwverify.disabled="passwd"!==a;document.getElementById("elk_autov_pwmain_div").style.display="passwd"===a?"inline":"none";
document.getElementById("elk_autov_pwverify_div").style.display="passwd"===a?"inline":"none";"passwd"===a?(verificationHandle.refreshMainPassword(),verificationHandle.refreshVerifyPassword(),document.forms[b].openid_url.style.backgroundColor="",document.getElementById("password1_group").style.display="block",document.getElementById("password2_group").style.display="block",document.getElementById("openid_group").style.display="none"):(document.forms[b].elk_autov_pwmain.style.backgroundColor="",document.forms[b].elk_autov_pwverify.style.backgroundColor=
"",document.forms[b].openid_url.style.backgroundColor="#FFF0F0",document.getElementById("password1_group").style.display="none",document.getElementById("password2_group").style.display="none",document.getElementById("openid_group").style.display="block");return!0}
function onCheckChange(){document.forms.postForm.emailActivate.checked||""===document.forms.postForm.password.value?(document.forms.postForm.emailPassword.disabled=!0,document.forms.postForm.emailPassword.checked=!0):document.forms.postForm.emailPassword.disabled=!1}
(function(a){a(document).ready(function(){a("#agreement_lang").change(function(){a.ajax({type:"POST",url:elk_scripturl+"?action=jslocale;sa=agreement;xml;api=json",data:{lang:a(this).val()},beforeSend:ajax_indicator(!0)}).done(function(b){""!=b&&a("#agreement_box").html(b)}).fail(function(a){}).always(function(){ajax_indicator(!1)})})})})(jQuery);
